import{B as e,E as t,G as n,S as r,U as i,d as a,p as o,q as s,t as c,tC as l,tE as u,tn as d,tp as f,v as p,w as m,x as h}from"./chunks/vue.runtime.esm-bundler.CJTU9PXy.js";c();var g={class:`flex items-start`},_={class:`w-30% flex-shrink-0 self-unset`},v={class:`w-full pt-full relative`},y=[`id`],b={class:`flex items-end`},x=[`checked`,`onChange`],S={class:`ml-5px leading-none`},C={class:`ml-20px mt-5px`},w=t({__name:`three-composite-demo`,setup(t){let r=[[`source-in`,{desc:`新图形只在新图形和目标画布重叠的地方绘制。其他的都是透明的。`}],[`source-over`,{desc:`这是默认设置，并在现有画布上下文之上绘制新图形。`}],[`source-out`,{desc:`在不与现有画布内容重叠的地方绘制新图形。`}],[`source-atop`,{desc:`新图形只在与现有画布内容重叠的地方绘制。`}],[`destination-over`,{desc:`在现有的画布内容后面绘制新的图形。`}],[`destination-in`,{desc:`现有的画布内容保持在新图形和现有画布内容重叠的位置。其他的都是透明的。`}],[`destination-out`,{desc:`现有内容保持在新图形不重叠的地方。`}],[`destination-atop`,{desc:`现有的画布只保留与新图形重叠的部分，新的图形是在画布内容后面绘制的。`}],[`lighter`,{desc:`两个重叠图形的颜色是通过颜色值相加来确定的。`}],[`copy`,{desc:`只显示新图形。`}],[`xor`,{desc:`图像中，那些重叠和正常绘制之外的其他地方是透明的。`}],[`multiply`,{desc:`将顶层像素与底层相应像素相乘，结果是一幅更黑暗的图片。`}],[`screen`,{desc:`像素被倒转，相乘，再倒转，结果是一幅更明亮的图片。`}],[`overlay`,{desc:`multiply 和 screen 的结合，原本暗的地方更暗，原本亮的地方更亮。`}],[`darken`,{desc:`保留两个图层中最暗的像素。`}],[`lighten`,{desc:`保留两个图层中最亮的像素。`}],[`color-dodge`,{desc:`将底层除以顶层的反置。`}],[`color-burn`,{desc:`将反置的底层除以顶层，然后将结果反过来。`}],[`hard-light`,{desc:`屏幕相乘（A combination of multiply and screen）类似于叠加，但上下图层互换了。`}],[`soft-light`,{desc:`用顶层减去底层或者相反来得到一个正值。`}],[`difference`,{desc:`一个柔和版本的强光（hard-light）。纯黑或纯白不会导致纯黑或纯白。`}],[`exclusion`,{desc:`和 difference 相似，但对比度较低。`}],[`hue`,{desc:`保留了底层的亮度（luma）和色度（chroma），同时采用了顶层的色调（hue）。`}],[`saturation`,{desc:`保留底层的亮度（luma）和色调（hue），同时采用顶层的色度（chroma）。`}],[`color`,{desc:`保留了底层的亮度（luma），同时采用了顶层的色调 (hue) 和色度 (chroma)。`}],[`luminosity`,{desc:`保持底层的色调（hue）和色度（chroma），同时采用顶层的亮度（luma）。`}]],s=f(0);function c(e){s.value=e;let t=r[s.value][0];m(t,d)}let d;function m(e,t){let n=document.createElement(`canvas`);n.width=200,n.height=200;let r=n.getContext(`2d`);r.clearRect(-100,100,200,200),r.fillStyle=`rgba(0,0,0, 0.3)`,r.fillRect(0,0,200,200),r.translate(100,100),r.globalCompositeOperation=e,r.beginPath(),r.fillStyle=`red`,r.arc(30,0,50,0,2*Math.PI),r.fill(),r.closePath(),r.beginPath(),r.fillStyle=`green`,r.arc(-30,0,50,0,2*Math.PI),r.fill(),r.closePath(),r.beginPath(),r.fillStyle=`blue`,r.arc(0,-30,50,0,2*Math.PI),r.fill(),r.closePath(),t.clearRect(0,0,200,200),t.drawImage(n,0,0,200,200)}return e(()=>{d=document.getElementById(`three-composite`).getContext(`2d`),m(r[s.value][0],d);for(let e of r){let t=e[0],n=document.getElementById(`test-canvas-${t}`).getContext(`2d`);m(t,n)}}),(e,t)=>(i(),h(o,null,[t[0]||=p(`canvas`,{id:`three-composite`,width:`200`,height:`200`},null,-1),t[1]||=p(`div`,{class:`font-bold text-fuchsia-600`},`合成模式：`,-1),(i(),h(o,null,n(r,(e,t)=>p(`div`,g,[p(`div`,_,[p(`div`,v,[p(`canvas`,{id:`test-canvas-`+e[0],width:`200`,height:`200`,class:`w-full h-full absolute top-0 left-0 border-dark-50 border-.5 border-solid`},null,8,y)])]),p(`label`,{class:l([`ml-10px flex flex-col`,s.value===t?`text-red`:``])},[p(`div`,b,[p(`input`,{type:`radio`,name:`go`,checked:s.value===t,onChange:a(e=>c(t),[`stop`])},null,40,x),p(`div`,S,u(e[0]),1)]),p(`div`,C,u(e[1].desc),1)],2)])),64))],64))}});c();var T={id:`card`},E=t({__name:`scratch-ticket`,setup(t){return e(()=>{let e=document.getElementById(`scratch-ticket`),t=e.getContext(`2d`),n,r;e.addEventListener(`mousedown`,l,!1),e.addEventListener(`mousemove`,u,!1),e.addEventListener(`mouseup`,d,!1),e.addEventListener(`touchstart`,l,!1),e.addEventListener(`touchmove`,u,!1),e.addEventListener(`touchend`,d,!1);function i(){let e=t.getImageData(0,0,200,200).data,n=e.length,r=n/32,i=0;for(let t=0;t<n;t+=32)e[t]===0&&i++;return Math.round(i/r*100)}function a(e,t){return Math.sqrt((t.x-e.x)**2+(t.y-e.y)**2)}function o(e,t){return Math.atan2(t.x-e.x,t.y-e.y)}function s(e,t){var n=0,r=0,i,a;if(t.offsetParent!==void 0)do n+=t.offsetLeft,r+=t.offsetTop;while(t=t.offsetParent);return i=(e.pageX||e.touches[0].pageX)-n,a=(e.pageY||e.touches[0].pageY)-r,{x:i,y:a}}function c(t){t||=0,t>80&&e?.parentNode?.removeChild(e)}function l(t){n=!0,r=s(t,e)}function u(l){if(l.preventDefault(),!n)return;let u=s(l,e),d=a(r,u),f=o(r,u),p,m;for(let e=0;e<d;e++)p=r.x+Math.sin(f)*e*2,m=u.y+Math.cos(f)*e*2,t.globalCompositeOperation=`destination-out`,t.beginPath(),t.arc(p,m,8,0,Math.PI*2,!0),t.closePath(),t.fill();r=u,c(i())}function d(){n=!1}function f(){t.save(),t.fillStyle=`#ddd`,t.fillRect(0,0,200,200),t.restore()}f()}),(e,t)=>(i(),h(`div`,T,t[0]||=[p(`canvas`,{id:`scratch-ticket`,width:`200`,height:`200`},null,-1)]))}});c();const D=JSON.parse(`{"title":"canvas 合成","description":"","frontmatter":{"label":"canvas"},"headers":[{"level":2,"title":"globalCompositeOperation","slug":"globalcompositeoperation","link":"#globalcompositeoperation","children":[]},{"level":2,"title":"合成三个图形","slug":"合成三个图形","link":"#合成三个图形","children":[]},{"level":2,"title":"刮刮乐 1","slug":"刮刮乐-1","link":"#刮刮乐-1","children":[]},{"level":2,"title":"刮刮乐 2","slug":"刮刮乐-2","link":"#刮刮乐-2","children":[]}],"relativePath":"useful/canvas/05 canvas 合成.md","filePath":"useful/canvas/05 canvas 合成.md","lastUpdated":1710946996000}`);var O=Object.assign({name:`useful/canvas/05 canvas 合成.md`},{setup(e){return(e,t)=>{let n=s(`clientOnly`);return i(),h(`div`,null,[t[0]||=r("",5),m(n,null,{default:d(()=>[m(w)]),_:1}),t[1]||=r("",3),m(n,null,{default:d(()=>[m(E)]),_:1}),t[2]||=r("",5)])}}});export{D as __pageData,O as default};