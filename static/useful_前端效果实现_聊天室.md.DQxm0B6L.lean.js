import{C as e,G as t,U as n,c as r,i,p as a,q as o,t as s,tC as c,tE as l,tn as u,tr as d,u as f,v as p,w as m,x as h}from"./chunks/vue.runtime.esm-bundler.CJTU9PXy.js";import{t as g}from"./chunks/plugin-vue_export-helper.BlZgCg_Z.js";s();var _={data(){return{messages:[{avatar:`#rabbit_01`,message:`春光无限，冰雪消融，新年佳节，岁岁平安，欢天喜地，百事顺心，笑口常开，阖家欢乐，喜气洋洋，缘遇新友，其乐融融，生活美满。兔年大吉！`,direction:`left`},{avatar:`#rabbit_02`,message:`祝你兔年大吉，一如既往，二人同心，三口之家，四季欢唱，五福临门，六六顺意，七喜来财，八方鸿福，九九吉祥，十全十美。`,direction:`left`},{avatar:`#rabbit_03`,message:`兔年到，好运到，我的祝福先送到。一祝你今年无烦恼，二祝你出门贵人罩，三祝你兔年大吉常常微笑，万事都好！`,direction:`left`},{avatar:`#rabbit_04`,message:`兔年送条兔，全家乐悠悠。兔脚为你开财路，兔耳为你撞鸿运，兔背为你驮康寿，让这头兔伴你左右，永远动如蛟兔！`,direction:`left`},{avatar:`#rabbit_05`,message:`兔年大吉喜气扬，兔头扬扬好运来，兔眼圆圆看祥瑞，兔须翘翘钱满园，兔身摆摆业登高，兔尾扫扫体健安，兔声震震尽欢颜，祝愿兔年多财气，旺兔载运福满天！`,direction:`left`},{avatar:`#rabbit_06`,message:`兔年来到，福兔祝你鸿福齐天，万事如意;祥兔祝你财气冲天，好运无穷;吉兔祝你吉星高照，心想事成;灵兔祝你天天开心，福寿安康;朋友则祝你兔年如意，万事顺心！`,direction:`left`}],message:``,chatBoxClass:``}},mounted(){this.chatBoxClass=`chat-box-${this._.uid}`,this.$nextTick(()=>{this.handleReceiveMsg()})},methods:{handleSendMsg(){if(!this.message)return;let e=[`#rabbit_01`,`#rabbit_02`,`#rabbit_03`,`#rabbit_04`,`#rabbit_05`,`#rabbit_06`],t={avatar:e[Math.floor(Math.random()*e.length)],message:this.message,direction:`right`};this.messages.push(t);let n=new Event(`send-message`);n.key=`message`,n.newValue=JSON.stringify(t),this.flagMe=!0,window.dispatchEvent(n),this.flagMe=!1,this.message=``,this.$nextTick(()=>{let e=document.querySelector(`.`+this.chatBoxClass);e.scrollTop=e.scrollHeight})},handleReceiveMsg(){window.addEventListener(`send-message`,e=>{if(e.key===`message`&&!this.flagMe){let t=JSON.parse(e.newValue);this.messages.push({avatar:t.avatar,message:t.message,direction:`left`}),this.$nextTick(()=>{let e=document.querySelector(`.`+this.chatBoxClass);e.scrollTop=e.scrollHeight})}})}}},v={class:`chat-container`},y={class:`chat-header`},b={class:`message`};function x(o,s,g,_,x,S){return n(),h(`div`,v,[p(`div`,y,[e(` 兔年聊到（聊天室`+l(o._.uid)+`）`,1),s[3]||=p(`span`,{class:`i-twemoji:rabbit-face`},null,-1)]),p(`div`,{class:c([`chat-wrap`,x.chatBoxClass])},[m(i,{name:`roll`,mode:`in-out`,appear:``},{default:u(()=>[(n(!0),h(a,null,t(x.messages,(t,r)=>(n(),h(`div`,{class:c([`message-box`,t.direction]),key:r},[s[5]||=p(`div`,{class:`avatar`},[p(`div`,{class:`i-twemoji:angry-face`})],-1),p(`div`,b,[e(l(t.message)+` `,1),s[4]||=p(`div`,{class:`i-twemoji:smiling-face-with-heart-eyes`},null,-1)])],2))),128))]),_:1})],2),p(`div`,{class:`input-box`,onKeyup:s[2]||=f((...e)=>S.handleSendMsg&&S.handleSendMsg(...e),[`enter`])},[d(p(`input`,{class:`input`,"onUpdate:modelValue":s[0]||=e=>x.message=e},null,512),[[r,x.message]]),p(`button`,{class:`send-btn`,onClick:s[1]||=(...e)=>S.handleSendMsg&&S.handleSendMsg(...e)},`发送`)],32)])}var S=g(_,[[`render`,x]]);s();var C={class:`flex mt-30px lt-md:flex-col`},w={class:`h-500px border border-gray border-solid rounded-8px md:mr-10px`},T={class:`h-500px border border-gray border-solid rounded-8px lt-md:mt-30px`};const E=JSON.parse(`{"title":"聊天室","description":"","frontmatter":{"label":["actual combat"]},"headers":[],"relativePath":"useful/前端效果实现/聊天室.md","filePath":"useful/前端效果实现/聊天室.md","lastUpdated":1709394628000}`);var D=Object.assign({name:`useful/前端效果实现/聊天室.md`},{setup(t){return(t,r)=>{let i=o(`ClientOnly`);return n(),h(`div`,null,[r[0]||=p(`h1`,{id:`聊天室`,tabindex:`-1`},[e(`聊天室 `),p(`a`,{class:`header-anchor`,href:`#聊天室`,"aria-label":`Permalink to “聊天室”`},`​`)],-1),m(i,null,{default:u(()=>[p(`div`,C,[p(`div`,w,[m(S)]),p(`div`,T,[m(S)])])]),_:1})])}}});export{E as __pageData,D as default};