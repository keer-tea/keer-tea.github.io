import{E as e,G as t,U as n,b as r,p as i,q as a,t as o,tA as s,tD as c,tT as l,tn as u,tp as d,v as f,w as p,x as m}from"./chunks/vue.runtime.esm-bundler.CJTU9PXy.js";var h=c(((exports,t)=>{(function(n,r){typeof exports==`object`&&typeof t==`object`?t.exports=r():typeof define==`function`&&define.amd?define([],r):typeof exports==`object`?exports.COS=r():n.COS=r()})(exports,function(){return(function(e){var t={};function n(r){if(t[r])return t[r].exports;var i=t[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){typeof Symbol<`u`&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:`Module`}),Object.defineProperty(e,`__esModule`,{value:!0})},n.t=function(e,t){if(t&1&&(e=n(e)),t&8||t&4&&typeof e==`object`&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,`default`,{enumerable:!0,value:e}),t&2&&typeof e!=`string`)for(var i in e)n.d(r,i,function(t){return e[t]}.bind(null,i));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,`a`,t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p=`/dist/`,n(n.s=`./index.js`)})({"./index.js":(function(e,t,n){e.exports=n(
/*! ./src/cos */
`./src/cos.js`)}),"./lib/base64.js":(function(e,t){e.exports=function(e){e||={};var t=e.Base64,n=`2.1.9`,r,i=`ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/`,a=function(e){for(var t={},n=0,r=e.length;n<r;n++)t[e.charAt(n)]=n;return t}(i),o=String.fromCharCode,s=function(e){if(e.length<2){var t=e.charCodeAt(0);return t<128?e:t<2048?o(192|t>>>6)+o(128|t&63):o(224|t>>>12&15)+o(128|t>>>6&63)+o(128|t&63)}else{var t=65536+(e.charCodeAt(0)-55296)*1024+(e.charCodeAt(1)-56320);return o(240|t>>>18&7)+o(128|t>>>12&63)+o(128|t>>>6&63)+o(128|t&63)}},c=/[\uD800-\uDBFF][\uDC00-\uDFFFF]|[^\x00-\x7F]/g,l=function(e){return e.replace(c,s)},u=function(e){var t=[0,2,1][e.length%3],n=e.charCodeAt(0)<<16|(e.length>1?e.charCodeAt(1):0)<<8|(e.length>2?e.charCodeAt(2):0);return[i.charAt(n>>>18),i.charAt(n>>>12&63),t>=2?`=`:i.charAt(n>>>6&63),t>=1?`=`:i.charAt(n&63)].join(``)},d=e.btoa?function(t){return e.btoa(t)}:function(e){return e.replace(/[\s\S]{1,3}/g,u)},f=r?function(e){return(e.constructor===r.constructor?e:new r(e)).toString(`base64`)}:function(e){return d(l(e))},p=function(e,t){return t?f(String(e)).replace(/[+\/]/g,function(e){return e==`+`?`-`:`_`}).replace(/=/g,``):f(String(e))},m=function(e){return p(e,!0)},h=new RegExp([`[À-ß][-¿]`,`[à-ï][-¿]{2}`,`[ð-÷][-¿]{3}`].join(`|`),`g`),g=function(e){switch(e.length){case 4:var t=(7&e.charCodeAt(0))<<18|(63&e.charCodeAt(1))<<12|(63&e.charCodeAt(2))<<6|63&e.charCodeAt(3),n=t-65536;return o((n>>>10)+55296)+o((n&1023)+56320);case 3:return o((15&e.charCodeAt(0))<<12|(63&e.charCodeAt(1))<<6|63&e.charCodeAt(2));default:return o((31&e.charCodeAt(0))<<6|63&e.charCodeAt(1))}},_=function(e){return e.replace(h,g)},v=function(e){var t=e.length,n=t%4,r=(t>0?a[e.charAt(0)]<<18:0)|(t>1?a[e.charAt(1)]<<12:0)|(t>2?a[e.charAt(2)]<<6:0)|(t>3?a[e.charAt(3)]:0),i=[o(r>>>16),o(r>>>8&255),o(r&255)];return i.length-=[0,0,2,1][n],i.join(``)},y=e.atob?function(t){return e.atob(t)}:function(e){return e.replace(/[\s\S]{1,4}/g,v)},b=r?function(e){return(e.constructor===r.constructor?e:new r(e,`base64`)).toString()}:function(e){return _(y(e))},x=function(e){return b(String(e).replace(/[-_]/g,function(e){return e==`-`?`+`:`/`}).replace(/[^A-Za-z0-9\+\/]/g,``))};return{VERSION:n,atob:y,btoa:d,fromBase64:x,toBase64:p,utob:l,encode:p,encodeURI:m,btou:_,decode:x,noConflict:function(){var n=e.Base64;return e.Base64=t,n}}}()}),"./lib/crypto.js":(function(e,t,n){(function(e){var t=n(
/*! @babel/runtime/helpers/typeof */
`./node_modules/@babel/runtime/helpers/typeof.js`),r=r||function(e,t){var n={},r=n.lib={},i=function(){},a=r.Base={extend:function(e){i.prototype=this;var t=new i;return e&&t.mixIn(e),t.hasOwnProperty(`init`)||(t.init=function(){t.$super.init.apply(this,arguments)}),t.init.prototype=t,t.$super=this,t},create:function(){var e=this.extend();return e.init.apply(e,arguments),e},init:function(){},mixIn:function(e){for(var t in e)e.hasOwnProperty(t)&&(this[t]=e[t]);e.hasOwnProperty(`toString`)&&(this.toString=e.toString)},clone:function(){return this.init.prototype.extend(this)}},o=r.WordArray=a.extend({init:function(e,n){e=this.words=e||[],this.sigBytes=n==t?4*e.length:n},toString:function(e){return(e||c).stringify(this)},concat:function(e){var t=this.words,n=e.words,r=this.sigBytes;if(e=e.sigBytes,this.clamp(),r%4)for(var i=0;i<e;i++)t[r+i>>>2]|=(n[i>>>2]>>>24-8*(i%4)&255)<<24-8*((r+i)%4);else if(65535<n.length)for(i=0;i<e;i+=4)t[r+i>>>2]=n[i>>>2];else t.push.apply(t,n);return this.sigBytes+=e,this},clamp:function(){var t=this.words,n=this.sigBytes;t[n>>>2]&=4294967295<<32-8*(n%4),t.length=e.ceil(n/4)},clone:function(){var e=a.clone.call(this);return e.words=this.words.slice(0),e},random:function(t){for(var n=[],r=0;r<t;r+=4)n.push(4294967296*e.random()|0);return new o.init(n,t)}}),s=n.enc={},c=s.Hex={stringify:function(e){var t=e.words;e=e.sigBytes;for(var n=[],r=0;r<e;r++){var i=t[r>>>2]>>>24-8*(r%4)&255;n.push((i>>>4).toString(16)),n.push((i&15).toString(16))}return n.join(``)},parse:function(e){for(var t=e.length,n=[],r=0;r<t;r+=2)n[r>>>3]|=parseInt(e.substr(r,2),16)<<24-4*(r%8);return new o.init(n,t/2)}},l=s.Latin1={stringify:function(e){var t=e.words;e=e.sigBytes;for(var n=[],r=0;r<e;r++)n.push(String.fromCharCode(t[r>>>2]>>>24-8*(r%4)&255));return n.join(``)},parse:function(e){for(var t=e.length,n=[],r=0;r<t;r++)n[r>>>2]|=(e.charCodeAt(r)&255)<<24-8*(r%4);return new o.init(n,t)}},u=s.Utf8={stringify:function(e){try{return decodeURIComponent(escape(l.stringify(e)))}catch{throw Error(`Malformed UTF-8 data`)}},parse:function(e){return l.parse(unescape(encodeURIComponent(e)))}},d=r.BufferedBlockAlgorithm=a.extend({reset:function(){this._data=new o.init,this._nDataBytes=0},_append:function(e){typeof e==`string`&&(e=u.parse(e)),this._data.concat(e),this._nDataBytes+=e.sigBytes},_process:function(t){var n=this._data,r=n.words,i=n.sigBytes,a=this.blockSize,s=i/(4*a),s=t?e.ceil(s):e.max((s|0)-this._minBufferSize,0);if(t=s*a,i=e.min(4*t,i),t){for(var c=0;c<t;c+=a)this._doProcessBlock(r,c);c=r.splice(0,t),n.sigBytes-=i}return new o.init(c,i)},clone:function(){var e=a.clone.call(this);return e._data=this._data.clone(),e},_minBufferSize:0});r.Hasher=d.extend({cfg:a.extend(),init:function(e){this.cfg=this.cfg.extend(e),this.reset()},reset:function(){d.reset.call(this),this._doReset()},update:function(e){return this._append(e),this._process(),this},finalize:function(e){return e&&this._append(e),this._doFinalize()},blockSize:16,_createHelper:function(e){return function(t,n){return new e.init(n).finalize(t)}},_createHmacHelper:function(e){return function(t,n){return new f.HMAC.init(e,n).finalize(t)}}});var f=n.algo={};return n}(Math);(function(){var e=r,t=e.lib,n=t.WordArray,i=t.Hasher,a=[],t=e.algo.SHA1=i.extend({_doReset:function(){this._hash=new n.init([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(e,t){for(var n=this._hash.words,r=n[0],i=n[1],o=n[2],s=n[3],c=n[4],l=0;80>l;l++){if(16>l)a[l]=e[t+l]|0;else{var u=a[l-3]^a[l-8]^a[l-14]^a[l-16];a[l]=u<<1|u>>>31}u=(r<<5|r>>>27)+c+a[l],u=20>l?u+((i&o|~i&s)+1518500249):40>l?u+((i^o^s)+1859775393):60>l?u+((i&o|i&s|o&s)-1894007588):u+((i^o^s)-899497514),c=s,s=o,o=i<<30|i>>>2,i=r,r=u}n[0]=n[0]+r|0,n[1]=n[1]+i|0,n[2]=n[2]+o|0,n[3]=n[3]+s|0,n[4]=n[4]+c|0},_doFinalize:function(){var e=this._data,t=e.words,n=8*this._nDataBytes,r=8*e.sigBytes;return t[r>>>5]|=128<<24-r%32,t[(r+64>>>9<<4)+14]=Math.floor(n/4294967296),t[(r+64>>>9<<4)+15]=n,e.sigBytes=4*t.length,this._process(),this._hash},clone:function(){var e=i.clone.call(this);return e._hash=this._hash.clone(),e}});e.SHA1=i._createHelper(t),e.HmacSHA1=i._createHmacHelper(t)})(),(function(){var e=r,t=e.enc.Utf8;e.algo.HMAC=e.lib.Base.extend({init:function(e,n){e=this._hasher=new e.init,typeof n==`string`&&(n=t.parse(n));var r=e.blockSize,i=4*r;n.sigBytes>i&&(n=e.finalize(n)),n.clamp();for(var a=this._oKey=n.clone(),o=this._iKey=n.clone(),s=a.words,c=o.words,l=0;l<r;l++)s[l]^=1549556828,c[l]^=909522486;a.sigBytes=o.sigBytes=i,this.reset()},reset:function(){var e=this._hasher;e.reset(),e.update(this._iKey)},update:function(e){return this._hasher.update(e),this},finalize:function(e){var t=this._hasher;return e=t.finalize(e),t.reset(),t.finalize(this._oKey.clone().concat(e))}})})(),(function(){var e=r,t=e.lib.WordArray,n=e.enc;n.Base64={stringify:function(e){var t=e.words,n=e.sigBytes,r=this._map;e.clamp();for(var i=[],a=0;a<n;a+=3)for(var o=t[a>>>2]>>>24-a%4*8&255,s=t[a+1>>>2]>>>24-(a+1)%4*8&255,c=t[a+2>>>2]>>>24-(a+2)%4*8&255,l=o<<16|s<<8|c,u=0;u<4&&a+u*.75<n;u++)i.push(r.charAt(l>>>6*(3-u)&63));var d=r.charAt(64);if(d)for(;i.length%4;)i.push(d);return i.join(``)},parse:function(e){var n=e.length,r=this._map,i=r.charAt(64);if(i){var a=e.indexOf(i);a!=-1&&(n=a)}for(var o=[],s=0,c=0;c<n;c++)if(c%4){var l=r.indexOf(e.charAt(c-1))<<c%4*2,u=r.indexOf(e.charAt(c))>>>6-c%4*2;o[s>>>2]|=(l|u)<<24-s%4*8,s++}return t.create(o,s)},_map:`ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=`}})(),t(e)===`object`?e.exports=r:window.CryptoJS=r}).call(this,n(
/*! ./../node_modules/webpack/buildin/module.js */
`./node_modules/webpack/buildin/module.js`)(e))}),"./lib/md5.js":(function(e,t,n){(function(e){var t,r=n(
/*! @babel/runtime/helpers/typeof */
`./node_modules/@babel/runtime/helpers/typeof.js`);(function(){var i=(typeof window>`u`?`undefined`:r(window))===`object`,a=i?window:{};a.JS_MD5_NO_WINDOW&&(i=!1),!i&&(typeof self>`u`?`undefined`:r(self))===`object`&&(a=self);var o=!a.JS_MD5_NO_COMMON_JS&&r(e)===`object`&&e.exports,s=n(
/*! !webpack amd options */
`./node_modules/webpack/buildin/amd-options.js`),c=!a.JS_MD5_NO_ARRAY_BUFFER&&typeof ArrayBuffer<`u`,l=`0123456789abcdef`.split(``),u=[128,32768,8388608,-2147483648],d=[0,8,16,24],f=[`hex`,`array`,`digest`,`buffer`,`arrayBuffer`,`base64`],p=`ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/`.split(``),m=[],h;if(c){var g=new ArrayBuffer(68);h=new Uint8Array(g),m=new Uint32Array(g)}(a.JS_MD5_NO_NODE_JS||!Array.isArray)&&(Array.isArray=function(e){return Object.prototype.toString.call(e)===`[object Array]`}),c&&(a.JS_MD5_NO_ARRAY_BUFFER_IS_VIEW||!ArrayBuffer.isView)&&(ArrayBuffer.isView=function(e){return r(e)===`object`&&e.buffer&&e.buffer.constructor===ArrayBuffer});var _=function(e){return function(t,n){return new y(!0).update(t,n)[e]()}},v=function(){var e=_(`hex`);e.getCtx=e.create=function(){return new y},e.update=function(t){return e.create().update(t)};for(var t=0;t<f.length;++t){var n=f[t];e[n]=_(n)}return e};function y(e){if(e)m[0]=m[16]=m[1]=m[2]=m[3]=m[4]=m[5]=m[6]=m[7]=m[8]=m[9]=m[10]=m[11]=m[12]=m[13]=m[14]=m[15]=0,this.blocks=m,this.buffer8=h;else if(c){var t=new ArrayBuffer(68);this.buffer8=new Uint8Array(t),this.blocks=new Uint32Array(t)}else this.blocks=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];this.h0=this.h1=this.h2=this.h3=this.start=this.bytes=this.hBytes=0,this.finalized=this.hashed=!1,this.first=!0}y.prototype.update=function(e,t){if(!this.finalized){for(var n,r=0,i,a=e.length,o=this.blocks,s=this.buffer8;r<a;){if(this.hashed&&(this.hashed=!1,o[0]=o[16],o[16]=o[1]=o[2]=o[3]=o[4]=o[5]=o[6]=o[7]=o[8]=o[9]=o[10]=o[11]=o[12]=o[13]=o[14]=o[15]=0),c)for(i=this.start;r<a&&i<64;++r)n=e.charCodeAt(r),t||n<128?s[i++]=n:n<2048?(s[i++]=192|n>>6,s[i++]=128|n&63):n<55296||n>=57344?(s[i++]=224|n>>12,s[i++]=128|n>>6&63,s[i++]=128|n&63):(n=65536+((n&1023)<<10|e.charCodeAt(++r)&1023),s[i++]=240|n>>18,s[i++]=128|n>>12&63,s[i++]=128|n>>6&63,s[i++]=128|n&63);else for(i=this.start;r<a&&i<64;++r)n=e.charCodeAt(r),t||n<128?o[i>>2]|=n<<d[i++&3]:n<2048?(o[i>>2]|=(192|n>>6)<<d[i++&3],o[i>>2]|=(128|n&63)<<d[i++&3]):n<55296||n>=57344?(o[i>>2]|=(224|n>>12)<<d[i++&3],o[i>>2]|=(128|n>>6&63)<<d[i++&3],o[i>>2]|=(128|n&63)<<d[i++&3]):(n=65536+((n&1023)<<10|e.charCodeAt(++r)&1023),o[i>>2]|=(240|n>>18)<<d[i++&3],o[i>>2]|=(128|n>>12&63)<<d[i++&3],o[i>>2]|=(128|n>>6&63)<<d[i++&3],o[i>>2]|=(128|n&63)<<d[i++&3]);this.lastByteIndex=i,this.bytes+=i-this.start,i>=64?(this.start=i-64,this.hash(),this.hashed=!0):this.start=i}return this.bytes>4294967295&&(this.hBytes+=this.bytes/4294967296<<0,this.bytes%=4294967296),this}},y.prototype.finalize=function(){if(!this.finalized){this.finalized=!0;var e=this.blocks,t=this.lastByteIndex;e[t>>2]|=u[t&3],t>=56&&(this.hashed||this.hash(),e[0]=e[16],e[16]=e[1]=e[2]=e[3]=e[4]=e[5]=e[6]=e[7]=e[8]=e[9]=e[10]=e[11]=e[12]=e[13]=e[14]=e[15]=0),e[14]=this.bytes<<3,e[15]=this.hBytes<<3|this.bytes>>>29,this.hash()}},y.prototype.hash=function(){var e,t,n,r,i,a,o=this.blocks;this.first?(e=o[0]-680876937,e=(e<<7|e>>>25)-271733879<<0,r=(-1732584194^e&2004318071)+o[1]-117830708,r=(r<<12|r>>>20)+e<<0,n=(-271733879^r&(e^-271733879))+o[2]-1126478375,n=(n<<17|n>>>15)+r<<0,t=(e^n&(r^e))+o[3]-1316259209,t=(t<<22|t>>>10)+n<<0):(e=this.h0,t=this.h1,n=this.h2,r=this.h3,e+=(r^t&(n^r))+o[0]-680876936,e=(e<<7|e>>>25)+t<<0,r+=(n^e&(t^n))+o[1]-389564586,r=(r<<12|r>>>20)+e<<0,n+=(t^r&(e^t))+o[2]+606105819,n=(n<<17|n>>>15)+r<<0,t+=(e^n&(r^e))+o[3]-1044525330,t=(t<<22|t>>>10)+n<<0),e+=(r^t&(n^r))+o[4]-176418897,e=(e<<7|e>>>25)+t<<0,r+=(n^e&(t^n))+o[5]+1200080426,r=(r<<12|r>>>20)+e<<0,n+=(t^r&(e^t))+o[6]-1473231341,n=(n<<17|n>>>15)+r<<0,t+=(e^n&(r^e))+o[7]-45705983,t=(t<<22|t>>>10)+n<<0,e+=(r^t&(n^r))+o[8]+1770035416,e=(e<<7|e>>>25)+t<<0,r+=(n^e&(t^n))+o[9]-1958414417,r=(r<<12|r>>>20)+e<<0,n+=(t^r&(e^t))+o[10]-42063,n=(n<<17|n>>>15)+r<<0,t+=(e^n&(r^e))+o[11]-1990404162,t=(t<<22|t>>>10)+n<<0,e+=(r^t&(n^r))+o[12]+1804603682,e=(e<<7|e>>>25)+t<<0,r+=(n^e&(t^n))+o[13]-40341101,r=(r<<12|r>>>20)+e<<0,n+=(t^r&(e^t))+o[14]-1502002290,n=(n<<17|n>>>15)+r<<0,t+=(e^n&(r^e))+o[15]+1236535329,t=(t<<22|t>>>10)+n<<0,e+=(n^r&(t^n))+o[1]-165796510,e=(e<<5|e>>>27)+t<<0,r+=(t^n&(e^t))+o[6]-1069501632,r=(r<<9|r>>>23)+e<<0,n+=(e^t&(r^e))+o[11]+643717713,n=(n<<14|n>>>18)+r<<0,t+=(r^e&(n^r))+o[0]-373897302,t=(t<<20|t>>>12)+n<<0,e+=(n^r&(t^n))+o[5]-701558691,e=(e<<5|e>>>27)+t<<0,r+=(t^n&(e^t))+o[10]+38016083,r=(r<<9|r>>>23)+e<<0,n+=(e^t&(r^e))+o[15]-660478335,n=(n<<14|n>>>18)+r<<0,t+=(r^e&(n^r))+o[4]-405537848,t=(t<<20|t>>>12)+n<<0,e+=(n^r&(t^n))+o[9]+568446438,e=(e<<5|e>>>27)+t<<0,r+=(t^n&(e^t))+o[14]-1019803690,r=(r<<9|r>>>23)+e<<0,n+=(e^t&(r^e))+o[3]-187363961,n=(n<<14|n>>>18)+r<<0,t+=(r^e&(n^r))+o[8]+1163531501,t=(t<<20|t>>>12)+n<<0,e+=(n^r&(t^n))+o[13]-1444681467,e=(e<<5|e>>>27)+t<<0,r+=(t^n&(e^t))+o[2]-51403784,r=(r<<9|r>>>23)+e<<0,n+=(e^t&(r^e))+o[7]+1735328473,n=(n<<14|n>>>18)+r<<0,t+=(r^e&(n^r))+o[12]-1926607734,t=(t<<20|t>>>12)+n<<0,i=t^n,e+=(i^r)+o[5]-378558,e=(e<<4|e>>>28)+t<<0,r+=(i^e)+o[8]-2022574463,r=(r<<11|r>>>21)+e<<0,a=r^e,n+=(a^t)+o[11]+1839030562,n=(n<<16|n>>>16)+r<<0,t+=(a^n)+o[14]-35309556,t=(t<<23|t>>>9)+n<<0,i=t^n,e+=(i^r)+o[1]-1530992060,e=(e<<4|e>>>28)+t<<0,r+=(i^e)+o[4]+1272893353,r=(r<<11|r>>>21)+e<<0,a=r^e,n+=(a^t)+o[7]-155497632,n=(n<<16|n>>>16)+r<<0,t+=(a^n)+o[10]-1094730640,t=(t<<23|t>>>9)+n<<0,i=t^n,e+=(i^r)+o[13]+681279174,e=(e<<4|e>>>28)+t<<0,r+=(i^e)+o[0]-358537222,r=(r<<11|r>>>21)+e<<0,a=r^e,n+=(a^t)+o[3]-722521979,n=(n<<16|n>>>16)+r<<0,t+=(a^n)+o[6]+76029189,t=(t<<23|t>>>9)+n<<0,i=t^n,e+=(i^r)+o[9]-640364487,e=(e<<4|e>>>28)+t<<0,r+=(i^e)+o[12]-421815835,r=(r<<11|r>>>21)+e<<0,a=r^e,n+=(a^t)+o[15]+530742520,n=(n<<16|n>>>16)+r<<0,t+=(a^n)+o[2]-995338651,t=(t<<23|t>>>9)+n<<0,e+=(n^(t|~r))+o[0]-198630844,e=(e<<6|e>>>26)+t<<0,r+=(t^(e|~n))+o[7]+1126891415,r=(r<<10|r>>>22)+e<<0,n+=(e^(r|~t))+o[14]-1416354905,n=(n<<15|n>>>17)+r<<0,t+=(r^(n|~e))+o[5]-57434055,t=(t<<21|t>>>11)+n<<0,e+=(n^(t|~r))+o[12]+1700485571,e=(e<<6|e>>>26)+t<<0,r+=(t^(e|~n))+o[3]-1894986606,r=(r<<10|r>>>22)+e<<0,n+=(e^(r|~t))+o[10]-1051523,n=(n<<15|n>>>17)+r<<0,t+=(r^(n|~e))+o[1]-2054922799,t=(t<<21|t>>>11)+n<<0,e+=(n^(t|~r))+o[8]+1873313359,e=(e<<6|e>>>26)+t<<0,r+=(t^(e|~n))+o[15]-30611744,r=(r<<10|r>>>22)+e<<0,n+=(e^(r|~t))+o[6]-1560198380,n=(n<<15|n>>>17)+r<<0,t+=(r^(n|~e))+o[13]+1309151649,t=(t<<21|t>>>11)+n<<0,e+=(n^(t|~r))+o[4]-145523070,e=(e<<6|e>>>26)+t<<0,r+=(t^(e|~n))+o[11]-1120210379,r=(r<<10|r>>>22)+e<<0,n+=(e^(r|~t))+o[2]+718787259,n=(n<<15|n>>>17)+r<<0,t+=(r^(n|~e))+o[9]-343485551,t=(t<<21|t>>>11)+n<<0,this.first?(this.h0=e+1732584193<<0,this.h1=t-271733879<<0,this.h2=n-1732584194<<0,this.h3=r+271733878<<0,this.first=!1):(this.h0=this.h0+e<<0,this.h1=this.h1+t<<0,this.h2=this.h2+n<<0,this.h3=this.h3+r<<0)},y.prototype.hex=function(){this.finalize();var e=this.h0,t=this.h1,n=this.h2,r=this.h3;return l[e>>4&15]+l[e&15]+l[e>>12&15]+l[e>>8&15]+l[e>>20&15]+l[e>>16&15]+l[e>>28&15]+l[e>>24&15]+l[t>>4&15]+l[t&15]+l[t>>12&15]+l[t>>8&15]+l[t>>20&15]+l[t>>16&15]+l[t>>28&15]+l[t>>24&15]+l[n>>4&15]+l[n&15]+l[n>>12&15]+l[n>>8&15]+l[n>>20&15]+l[n>>16&15]+l[n>>28&15]+l[n>>24&15]+l[r>>4&15]+l[r&15]+l[r>>12&15]+l[r>>8&15]+l[r>>20&15]+l[r>>16&15]+l[r>>28&15]+l[r>>24&15]},y.prototype.toString=y.prototype.hex,y.prototype.digest=function(e){if(e===`hex`)return this.hex();this.finalize();var t=this.h0,n=this.h1,r=this.h2,i=this.h3;return[t&255,t>>8&255,t>>16&255,t>>24&255,n&255,n>>8&255,n>>16&255,n>>24&255,r&255,r>>8&255,r>>16&255,r>>24&255,i&255,i>>8&255,i>>16&255,i>>24&255]},y.prototype.array=y.prototype.digest,y.prototype.arrayBuffer=function(){this.finalize();var e=new ArrayBuffer(16),t=new Uint32Array(e);return t[0]=this.h0,t[1]=this.h1,t[2]=this.h2,t[3]=this.h3,e},y.prototype.buffer=y.prototype.arrayBuffer,y.prototype.base64=function(){for(var e,t,n,r=``,i=this.array(),a=0;a<15;)e=i[a++],t=i[a++],n=i[a++],r+=p[e>>>2]+p[(e<<4|t>>>4)&63]+p[(t<<2|n>>>6)&63]+p[n&63];return e=i[a],r+=p[e>>>2]+p[e<<4&63]+`==`,r};var b=v();o?e.exports=b:(a.md5=b,s&&(t=(function(){return b}).call(b,n,b,e),t!==void 0&&(e.exports=t)))})()}).call(this,n(
/*! ./../node_modules/webpack/buildin/module.js */
`./node_modules/webpack/buildin/module.js`)(e))}),"./lib/request.js":(function(e,t,n){var r=n(
/*! @babel/runtime/helpers/typeof */
`./node_modules/@babel/runtime/helpers/typeof.js`),i=function(e){switch(r(e)){case`string`:return e;case`boolean`:return e?`true`:`false`;case`number`:return isFinite(e)?e:``;default:return``}},a=function(e,t,n,a){return t||=`&`,n||=`=`,e===null&&(e=void 0),r(e)===`object`?Object.keys(e).map(function(r){var a=encodeURIComponent(i(r))+n;return Array.isArray(e[r])?e[r].map(function(e){return a+encodeURIComponent(i(e))}).join(t):a+encodeURIComponent(i(e[r]))}).filter(Boolean).join(t):a?encodeURIComponent(i(a))+n+encodeURIComponent(i(e)):``},o=function(e,t,n){var r={},i=t.getAllResponseHeaders();return i&&i.length>0&&i.trim().split(`
`).forEach(function(e){if(e){var t=e.indexOf(`:`),n=e.substr(0,t).trim().toLowerCase();r[n]=e.substr(t+1).trim()}}),{error:e,statusCode:t.status,statusMessage:t.statusText,headers:r,body:n}},s=function(e,t){return!t&&t===`text`?e.responseText:e.response};e.exports=function(e,t){var n=(e.method||`GET`).toUpperCase(),r=e.url;if(e.qs){var i=a(e.qs);i&&(r+=(r.indexOf(`?`)===-1?`?`:`&`)+i)}var c=new XMLHttpRequest;if(c.open(n,r,!0),c.responseType=e.dataType||`text`,e.xhrFields)for(var l in e.xhrFields)c[l]=e.xhrFields[l];var u=e.headers;if(u)for(var d in u)u.hasOwnProperty(d)&&d.toLowerCase()!==`content-length`&&d.toLowerCase()!==`user-agent`&&d.toLowerCase()!==`origin`&&d.toLowerCase()!==`host`&&c.setRequestHeader(d,u[d]);return e.onProgress&&c.upload&&(c.upload.onprogress=e.onProgress),e.onDownloadProgress&&(c.onprogress=e.onDownloadProgress),e.timeout&&(c.timeout=e.timeout),c.ontimeout=function(e){t(o(Error(`timeout`),c))},c.onload=function(){t(o(null,c,s(c,e.dataType)))},c.onerror=function(n){var r=s(c,e.dataType);if(r)t(o(null,c,r));else{var i=c.statusText;!i&&c.status===0&&(i=Error(`CORS blocked or network error`)),t(o(i,c,r))}},c.send(e.body||``),c}}),"./node_modules/@babel/runtime/helpers/classCallCheck.js":(function(e,t){function n(e,t){if(!(e instanceof t))throw TypeError(`Cannot call a class as a function`)}e.exports=n,e.exports.__esModule=!0,e.exports.default=e.exports}),"./node_modules/@babel/runtime/helpers/createClass.js":(function(e,t,n){var r=n(
/*! ./toPropertyKey.js */
`./node_modules/@babel/runtime/helpers/toPropertyKey.js`);function i(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,`value`in i&&(i.writable=!0),Object.defineProperty(e,r(i.key),i)}}function a(e,t,n){return t&&i(e.prototype,t),n&&i(e,n),Object.defineProperty(e,`prototype`,{writable:!1}),e}e.exports=a,e.exports.__esModule=!0,e.exports.default=e.exports}),"./node_modules/@babel/runtime/helpers/defineProperty.js":(function(e,t,n){var r=n(
/*! ./toPropertyKey.js */
`./node_modules/@babel/runtime/helpers/toPropertyKey.js`);function i(e,t,n){return(t=r(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}e.exports=i,e.exports.__esModule=!0,e.exports.default=e.exports}),"./node_modules/@babel/runtime/helpers/toPrimitive.js":(function(e,t,n){var r=n(
/*! ./typeof.js */
`./node_modules/@babel/runtime/helpers/typeof.js`).default;function i(e,t){if(r(e)!=`object`||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var i=n.call(e,t||`default`);if(r(i)!=`object`)return i;throw TypeError(`@@toPrimitive must return a primitive value.`)}return(t===`string`?String:Number)(e)}e.exports=i,e.exports.__esModule=!0,e.exports.default=e.exports}),"./node_modules/@babel/runtime/helpers/toPropertyKey.js":(function(e,t,n){var r=n(
/*! ./typeof.js */
`./node_modules/@babel/runtime/helpers/typeof.js`).default,i=n(
/*! ./toPrimitive.js */
`./node_modules/@babel/runtime/helpers/toPrimitive.js`);function a(e){var t=i(e,`string`);return r(t)==`symbol`?t:t+``}e.exports=a,e.exports.__esModule=!0,e.exports.default=e.exports}),"./node_modules/@babel/runtime/helpers/typeof.js":(function(e,t){function n(t){"@babel/helpers - typeof";return e.exports=n=typeof Symbol==`function`&&typeof Symbol.iterator==`symbol`?function(e){return typeof e}:function(e){return e&&typeof Symbol==`function`&&e.constructor===Symbol&&e!==Symbol.prototype?`symbol`:typeof e},e.exports.__esModule=!0,e.exports.default=e.exports,n(t)}e.exports=n,e.exports.__esModule=!0,e.exports.default=e.exports}),"./node_modules/fast-xml-parser/src/fxp.js":(function(e,t,n){let r=n(
/*! ./validator */
`./node_modules/fast-xml-parser/src/validator.js`),i=n(
/*! ./xmlparser/XMLParser */
`./node_modules/fast-xml-parser/src/xmlparser/XMLParser.js`),a=n(
/*! ./xmlbuilder/json2xml */
`./node_modules/fast-xml-parser/src/xmlbuilder/json2xml.js`);e.exports={XMLParser:i,XMLValidator:r,XMLBuilder:a}}),"./node_modules/fast-xml-parser/src/ignoreAttributes.js":(function(e,t){function n(e){return typeof e==`function`?e:Array.isArray(e)?t=>{for(let n of e)if(typeof n==`string`&&t===n||n instanceof RegExp&&n.test(t))return!0}:()=>!1}e.exports=n}),"./node_modules/fast-xml-parser/src/util.js":(function(e,t,n){let r=`:A-Za-z_\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD`;r+``;let i=`[`+r+`][:A-Za-z_\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.\\d\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*`,a=RegExp(`^`+i+`$`);t.isExist=function(e){return e!==void 0},t.isEmptyObject=function(e){return Object.keys(e).length===0},t.merge=function(e,t,n){if(t){let r=Object.keys(t),i=r.length;for(let a=0;a<i;a++)n===`strict`?e[r[a]]=[t[r[a]]]:e[r[a]]=t[r[a]]}},t.getValue=function(e){return t.isExist(e)?e:``},t.isName=function(e){return a.exec(e)!=null},t.getAllMatches=function(e,t){let n=[],r=t.exec(e);for(;r;){let i=[];i.startIndex=t.lastIndex-r[0].length;let a=r.length;for(let e=0;e<a;e++)i.push(r[e]);n.push(i),r=t.exec(e)}return n},t.nameRegexp=i}),"./node_modules/fast-xml-parser/src/validator.js":(function(e,t,n){let r=n(
/*! ./util */
`./node_modules/fast-xml-parser/src/util.js`),i={allowBooleanAttributes:!1,unpairedTags:[]};t.validate=function(e,t){t=Object.assign({},i,t);let n=[],r=!1,l=!1;e[0]===`﻿`&&(e=e.substr(1));for(let i=0;i<e.length;i++)if(e[i]===`<`&&e[i+1]===`?`){if(i+=2,i=o(e,i),i.err)return i}else if(e[i]===`<`){let d=i;if(i++,e[i]===`!`){i=s(e,i);continue}else{let m=!1;e[i]===`/`&&(m=!0,i++);let _=``;for(;i<e.length&&e[i]!==`>`&&e[i]!==` `&&e[i]!==`	`&&e[i]!==`
`&&e[i]!==`\r`;i++)_+=e[i];if(_=_.trim(),_[_.length-1]===`/`&&(_=_.substring(0,_.length-1),i--),!h(_)){let t=_.trim().length===0?`Invalid space after '<'.`:`Tag '`+_+`' is an invalid name.`;return p(`InvalidTag`,t,g(e,i))}let v=c(e,i);if(v===!1)return p(`InvalidAttr`,`Attributes for '`+_+`' have open quote.`,g(e,i));let y=v.value;if(i=v.index,y[y.length-1]===`/`){let n=i-y.length;y=y.substring(0,y.length-1);let a=u(y,t);if(a===!0)r=!0;else return p(a.err.code,a.err.msg,g(e,n+a.err.line))}else if(m)if(v.tagClosed){if(y.trim().length>0)return p(`InvalidTag`,`Closing tag '`+_+`' can't have attributes or invalid starting.`,g(e,d));if(n.length===0)return p(`InvalidTag`,`Closing tag '`+_+`' has not been opened.`,g(e,d));{let t=n.pop();if(_!==t.tagName){let n=g(e,t.tagStartPos);return p(`InvalidTag`,`Expected closing tag '`+t.tagName+`' (opened in line `+n.line+`, col `+n.col+`) instead of closing tag '`+_+`'.`,g(e,d))}n.length==0&&(l=!0)}}else return p(`InvalidTag`,`Closing tag '`+_+`' doesn't have proper closing.`,g(e,i));else{let a=u(y,t);if(a!==!0)return p(a.err.code,a.err.msg,g(e,i-y.length+a.err.line));if(l===!0)return p(`InvalidXml`,`Multiple possible root nodes found.`,g(e,i));t.unpairedTags.indexOf(_)!==-1||n.push({tagName:_,tagStartPos:d}),r=!0}for(i++;i<e.length;i++)if(e[i]===`<`)if(e[i+1]===`!`){i++,i=s(e,i);continue}else if(e[i+1]===`?`){if(i=o(e,++i),i.err)return i}else break;else if(e[i]===`&`){let t=f(e,i);if(t==-1)return p(`InvalidChar`,`char '&' is not expected.`,g(e,i));i=t}else if(l===!0&&!a(e[i]))return p(`InvalidXml`,`Extra text at the end`,g(e,i));e[i]===`<`&&i--}}else{if(a(e[i]))continue;return p(`InvalidChar`,`char '`+e[i]+`' is not expected.`,g(e,i))}if(r){if(n.length==1)return p(`InvalidTag`,`Unclosed tag '`+n[0].tagName+`'.`,g(e,n[0].tagStartPos));if(n.length>0)return p(`InvalidXml`,`Invalid '`+JSON.stringify(n.map(e=>e.tagName),null,4).replace(/\r?\n/g,``)+`' found.`,{line:1,col:1})}else return p(`InvalidXml`,`Start tag expected.`,1);return!0};function a(e){return e===` `||e===`	`||e===`
`||e===`\r`}function o(e,t){let n=t;for(;t<e.length;t++)if(e[t]==`?`||e[t]==` `){let r=e.substr(n,t-n);if(t>5&&r===`xml`)return p(`InvalidXml`,`XML declaration allowed only at the start of the document.`,g(e,t));if(e[t]==`?`&&e[t+1]==`>`){t++;break}else continue}return t}function s(e,t){if(e.length>t+5&&e[t+1]===`-`&&e[t+2]===`-`){for(t+=3;t<e.length;t++)if(e[t]===`-`&&e[t+1]===`-`&&e[t+2]===`>`){t+=2;break}}else if(e.length>t+8&&e[t+1]===`D`&&e[t+2]===`O`&&e[t+3]===`C`&&e[t+4]===`T`&&e[t+5]===`Y`&&e[t+6]===`P`&&e[t+7]===`E`){let n=1;for(t+=8;t<e.length;t++)if(e[t]===`<`)n++;else if(e[t]===`>`&&(n--,n===0))break}else if(e.length>t+9&&e[t+1]===`[`&&e[t+2]===`C`&&e[t+3]===`D`&&e[t+4]===`A`&&e[t+5]===`T`&&e[t+6]===`A`&&e[t+7]===`[`){for(t+=8;t<e.length;t++)if(e[t]===`]`&&e[t+1]===`]`&&e[t+2]===`>`){t+=2;break}}return t}function c(e,t){let n=``,r=``,i=!1;for(;t<e.length;t++){if(e[t]===`"`||e[t]===`'`)r===``?r=e[t]:r!==e[t]||(r=``);else if(e[t]===`>`&&r===``){i=!0;break}n+=e[t]}return r===``?{value:n,index:t,tagClosed:i}:!1}let l=RegExp(`(\\s*)([^\\s=]+)(\\s*=)?(\\s*(['"])(([\\s\\S])*?)\\5)?`,`g`);function u(e,t){let n=r.getAllMatches(e,l),i={};for(let e=0;e<n.length;e++){if(n[e][1].length===0)return p(`InvalidAttr`,`Attribute '`+n[e][2]+`' has no space in starting.`,_(n[e]));if(n[e][3]!==void 0&&n[e][4]===void 0)return p(`InvalidAttr`,`Attribute '`+n[e][2]+`' is without value.`,_(n[e]));if(n[e][3]===void 0&&!t.allowBooleanAttributes)return p(`InvalidAttr`,`boolean attribute '`+n[e][2]+`' is not allowed.`,_(n[e]));let r=n[e][2];if(!m(r))return p(`InvalidAttr`,`Attribute '`+r+`' is an invalid name.`,_(n[e]));if(!i.hasOwnProperty(r))i[r]=1;else return p(`InvalidAttr`,`Attribute '`+r+`' is repeated.`,_(n[e]))}return!0}function d(e,t){let n=/\d/;for(e[t]===`x`&&(t++,n=/[\da-fA-F]/);t<e.length;t++){if(e[t]===`;`)return t;if(!e[t].match(n))break}return-1}function f(e,t){if(t++,e[t]===`;`)return-1;if(e[t]===`#`)return t++,d(e,t);let n=0;for(;t<e.length;t++,n++)if(!(e[t].match(/\w/)&&n<20)){if(e[t]===`;`)break;return-1}return t}function p(e,t,n){return{err:{code:e,msg:t,line:n.line||n,col:n.col}}}function m(e){return r.isName(e)}function h(e){return r.isName(e)}function g(e,t){let n=e.substring(0,t).split(/\r?\n/);return{line:n.length,col:n[n.length-1].length+1}}function _(e){return e.startIndex+e[1].length}}),"./node_modules/fast-xml-parser/src/xmlbuilder/json2xml.js":(function(e,t,n){let r=n(
/*! ./orderedJs2Xml */
`./node_modules/fast-xml-parser/src/xmlbuilder/orderedJs2Xml.js`),i=n(
/*! ../ignoreAttributes */
`./node_modules/fast-xml-parser/src/ignoreAttributes.js`),a={attributeNamePrefix:`@_`,attributesGroupName:!1,textNodeName:`#text`,ignoreAttributes:!0,cdataPropName:!1,format:!1,indentBy:`  `,suppressEmptyNode:!1,suppressUnpairedNode:!0,suppressBooleanAttributes:!0,tagValueProcessor:function(e,t){return t},attributeValueProcessor:function(e,t){return t},preserveOrder:!1,commentPropName:!1,unpairedTags:[],entities:[{regex:RegExp(`&`,`g`),val:`&amp;`},{regex:RegExp(`>`,`g`),val:`&gt;`},{regex:RegExp(`<`,`g`),val:`&lt;`},{regex:RegExp(`'`,`g`),val:`&apos;`},{regex:RegExp(`"`,`g`),val:`&quot;`}],processEntities:!0,stopNodes:[],oneListGroup:!1};function o(e){this.options=Object.assign({},a,e),this.options.ignoreAttributes===!0||this.options.attributesGroupName?this.isAttribute=function(){return!1}:(this.ignoreAttributesFn=i(this.options.ignoreAttributes),this.attrPrefixLen=this.options.attributeNamePrefix.length,this.isAttribute=l),this.processTextOrObjNode=s,this.options.format?(this.indentate=c,this.tagEndChar=`>
`,this.newLine=`
`):(this.indentate=function(){return``},this.tagEndChar=`>`,this.newLine=``)}o.prototype.build=function(e){return this.options.preserveOrder?r(e,this.options):(Array.isArray(e)&&this.options.arrayNodeName&&this.options.arrayNodeName.length>1&&(e={[this.options.arrayNodeName]:e}),this.j2x(e,0,[]).val)},o.prototype.j2x=function(e,t,n){let r=``,i=``,a=n.join(`.`);for(let o in e){if(!Object.prototype.hasOwnProperty.call(e,o))continue;if(e[o]===void 0)this.isAttribute(o)&&(i+=``);else if(e[o]===null)this.isAttribute(o)?i+=``:o[0]===`?`?i+=this.indentate(t)+`<`+o+`?`+this.tagEndChar:i+=this.indentate(t)+`<`+o+`/`+this.tagEndChar;else if(e[o]instanceof Date)i+=this.buildTextValNode(e[o],o,``,t);else if(typeof e[o]!=`object`){let n=this.isAttribute(o);if(n&&!this.ignoreAttributesFn(n,a))r+=this.buildAttrPairStr(n,``+e[o]);else if(!n)if(o===this.options.textNodeName){let t=this.options.tagValueProcessor(o,``+e[o]);i+=this.replaceEntitiesValue(t)}else i+=this.buildTextValNode(e[o],o,``,t)}else if(Array.isArray(e[o])){let r=e[o].length,a=``,s=``;for(let c=0;c<r;c++){let r=e[o][c];if(r!==void 0)if(r===null)o[0]===`?`?i+=this.indentate(t)+`<`+o+`?`+this.tagEndChar:i+=this.indentate(t)+`<`+o+`/`+this.tagEndChar;else if(typeof r==`object`)if(this.options.oneListGroup){let e=this.j2x(r,t+1,n.concat(o));a+=e.val,this.options.attributesGroupName&&r.hasOwnProperty(this.options.attributesGroupName)&&(s+=e.attrStr)}else a+=this.processTextOrObjNode(r,o,t,n);else if(this.options.oneListGroup){let e=this.options.tagValueProcessor(o,r);e=this.replaceEntitiesValue(e),a+=e}else a+=this.buildTextValNode(r,o,``,t)}this.options.oneListGroup&&(a=this.buildObjectNode(a,o,s,t)),i+=a}else if(this.options.attributesGroupName&&o===this.options.attributesGroupName){let t=Object.keys(e[o]),n=t.length;for(let i=0;i<n;i++)r+=this.buildAttrPairStr(t[i],``+e[o][t[i]])}else i+=this.processTextOrObjNode(e[o],o,t,n)}return{attrStr:r,val:i}},o.prototype.buildAttrPairStr=function(e,t){return t=this.options.attributeValueProcessor(e,``+t),t=this.replaceEntitiesValue(t),this.options.suppressBooleanAttributes&&t===`true`?` `+e:` `+e+`="`+t+`"`};function s(e,t,n,r){let i=this.j2x(e,n+1,r.concat(t));return e[this.options.textNodeName]!==void 0&&Object.keys(e).length===1?this.buildTextValNode(e[this.options.textNodeName],t,i.attrStr,n):this.buildObjectNode(i.val,t,i.attrStr,n)}o.prototype.buildObjectNode=function(e,t,n,r){if(e===``)return t[0]===`?`?this.indentate(r)+`<`+t+n+`?`+this.tagEndChar:this.indentate(r)+`<`+t+n+this.closeTag(t)+this.tagEndChar;{let i=`</`+t+this.tagEndChar,a=``;return t[0]===`?`&&(a=`?`,i=``),(n||n===``)&&e.indexOf(`<`)===-1?this.indentate(r)+`<`+t+n+a+`>`+e+i:this.options.commentPropName!==!1&&t===this.options.commentPropName&&a.length===0?this.indentate(r)+`<!--${e}-->`+this.newLine:this.indentate(r)+`<`+t+n+a+this.tagEndChar+e+this.indentate(r)+i}},o.prototype.closeTag=function(e){let t=``;return this.options.unpairedTags.indexOf(e)===-1?t=this.options.suppressEmptyNode?`/`:`></${e}`:this.options.suppressUnpairedNode||(t=`/`),t},o.prototype.buildTextValNode=function(e,t,n,r){if(this.options.cdataPropName!==!1&&t===this.options.cdataPropName)return this.indentate(r)+`<![CDATA[${e}]]>`+this.newLine;if(this.options.commentPropName!==!1&&t===this.options.commentPropName)return this.indentate(r)+`<!--${e}-->`+this.newLine;if(t[0]===`?`)return this.indentate(r)+`<`+t+n+`?`+this.tagEndChar;{let i=this.options.tagValueProcessor(t,e);return i=this.replaceEntitiesValue(i),i===``?this.indentate(r)+`<`+t+n+this.closeTag(t)+this.tagEndChar:this.indentate(r)+`<`+t+n+`>`+i+`</`+t+this.tagEndChar}},o.prototype.replaceEntitiesValue=function(e){if(e&&e.length>0&&this.options.processEntities)for(let t=0;t<this.options.entities.length;t++){let n=this.options.entities[t];e=e.replace(n.regex,n.val)}return e};function c(e){return this.options.indentBy.repeat(e)}function l(e){return e.startsWith(this.options.attributeNamePrefix)&&e!==this.options.textNodeName?e.substr(this.attrPrefixLen):!1}e.exports=o}),"./node_modules/fast-xml-parser/src/xmlbuilder/orderedJs2Xml.js":(function(e,t){function n(e,t){let n=``;return t.format&&t.indentBy.length>0&&(n=`
`),r(e,t,``,n)}function r(e,t,n,c){let l=``,u=!1;for(let d=0;d<e.length;d++){let f=e[d],p=i(f);if(p===void 0)continue;let m=``;if(m=n.length===0?p:`${n}.${p}`,p===t.textNodeName){let e=f[p];o(m,t)||(e=t.tagValueProcessor(p,e),e=s(e,t)),u&&(l+=c),l+=e,u=!1;continue}else if(p===t.cdataPropName){u&&(l+=c),l+=`<![CDATA[${f[p][0][t.textNodeName]}]]>`,u=!1;continue}else if(p===t.commentPropName){l+=c+`<!--${f[p][0][t.textNodeName]}-->`,u=!0;continue}else if(p[0]===`?`){let e=a(f[`:@`],t),n=p===`?xml`?``:c,r=f[p][0][t.textNodeName];r=r.length===0?``:` `+r,l+=n+`<${p}${r}${e}?>`,u=!0;continue}let h=c;h!==``&&(h+=t.indentBy);let g=a(f[`:@`],t),_=c+`<${p}${g}`,v=r(f[p],t,m,h);t.unpairedTags.indexOf(p)===-1?(!v||v.length===0)&&t.suppressEmptyNode?l+=_+`/>`:v&&v.endsWith(`>`)?l+=_+`>${v}${c}</${p}>`:(l+=_+`>`,v&&c!==``&&(v.includes(`/>`)||v.includes(`</`))?l+=c+t.indentBy+v+c:l+=v,l+=`</${p}>`):t.suppressUnpairedNode?l+=_+`>`:l+=_+`/>`,u=!0}return l}function i(e){let t=Object.keys(e);for(let n=0;n<t.length;n++){let r=t[n];if(e.hasOwnProperty(r)&&r!==`:@`)return r}}function a(e,t){let n=``;if(e&&!t.ignoreAttributes)for(let r in e){if(!e.hasOwnProperty(r))continue;let i=t.attributeValueProcessor(r,e[r]);i=s(i,t),i===!0&&t.suppressBooleanAttributes?n+=` ${r.substr(t.attributeNamePrefix.length)}`:n+=` ${r.substr(t.attributeNamePrefix.length)}="${i}"`}return n}function o(e,t){e=e.substr(0,e.length-t.textNodeName.length-1);let n=e.substr(e.lastIndexOf(`.`)+1);for(let r in t.stopNodes)if(t.stopNodes[r]===e||t.stopNodes[r]===`*.`+n)return!0;return!1}function s(e,t){if(e&&e.length>0&&t.processEntities)for(let n=0;n<t.entities.length;n++){let r=t.entities[n];e=e.replace(r.regex,r.val)}return e}e.exports=n}),"./node_modules/fast-xml-parser/src/xmlparser/DocTypeReader.js":(function(e,t,n){let r=n(
/*! ../util */
`./node_modules/fast-xml-parser/src/util.js`);function i(e,t){let n={};if(e[t+3]===`O`&&e[t+4]===`C`&&e[t+5]===`T`&&e[t+6]===`Y`&&e[t+7]===`P`&&e[t+8]===`E`){t+=9;let r=1,i=!1,f=!1,p=``;for(;t<e.length;t++)if(e[t]===`<`&&!f){if(i&&s(e,t))t+=7,[entityName,val,t]=a(e,t+1),val.indexOf(`&`)===-1&&(n[d(entityName)]={regx:RegExp(`&${entityName};`,`g`),val});else if(i&&c(e,t))t+=8;else if(i&&l(e,t))t+=8;else if(i&&u(e,t))t+=9;else if(o)f=!0;else throw Error(`Invalid DOCTYPE`);r++,p=``}else if(e[t]===`>`){if(f?e[t-1]===`-`&&e[t-2]===`-`&&(f=!1,r--):r--,r===0)break}else e[t]===`[`?i=!0:p+=e[t];if(r!==0)throw Error(`Unclosed DOCTYPE`)}else throw Error(`Invalid Tag instead of DOCTYPE`);return{entities:n,i:t}}function a(e,t){let n=``;for(;t<e.length&&e[t]!==`'`&&e[t]!==`"`;t++)n+=e[t];if(n=n.trim(),n.indexOf(` `)!==-1)throw Error(`External entites are not supported`);let r=e[t++],i=``;for(;t<e.length&&e[t]!==r;t++)i+=e[t];return[n,i,t]}function o(e,t){return e[t+1]===`!`&&e[t+2]===`-`&&e[t+3]===`-`}function s(e,t){return e[t+1]===`!`&&e[t+2]===`E`&&e[t+3]===`N`&&e[t+4]===`T`&&e[t+5]===`I`&&e[t+6]===`T`&&e[t+7]===`Y`}function c(e,t){return e[t+1]===`!`&&e[t+2]===`E`&&e[t+3]===`L`&&e[t+4]===`E`&&e[t+5]===`M`&&e[t+6]===`E`&&e[t+7]===`N`&&e[t+8]===`T`}function l(e,t){return e[t+1]===`!`&&e[t+2]===`A`&&e[t+3]===`T`&&e[t+4]===`T`&&e[t+5]===`L`&&e[t+6]===`I`&&e[t+7]===`S`&&e[t+8]===`T`}function u(e,t){return e[t+1]===`!`&&e[t+2]===`N`&&e[t+3]===`O`&&e[t+4]===`T`&&e[t+5]===`A`&&e[t+6]===`T`&&e[t+7]===`I`&&e[t+8]===`O`&&e[t+9]===`N`}function d(e){if(r.isName(e))return e;throw Error(`Invalid entity name ${e}`)}e.exports=i}),"./node_modules/fast-xml-parser/src/xmlparser/OptionsBuilder.js":(function(e,t){let n={preserveOrder:!1,attributeNamePrefix:`@_`,attributesGroupName:!1,textNodeName:`#text`,ignoreAttributes:!0,removeNSPrefix:!1,allowBooleanAttributes:!1,parseTagValue:!0,parseAttributeValue:!1,trimValues:!0,cdataPropName:!1,numberParseOptions:{hex:!0,leadingZeros:!0,eNotation:!0},tagValueProcessor:function(e,t){return t},attributeValueProcessor:function(e,t){return t},stopNodes:[],alwaysCreateTextNode:!1,isArray:()=>!1,commentPropName:!1,unpairedTags:[],processEntities:!0,htmlEntities:!1,ignoreDeclaration:!1,ignorePiTags:!1,transformTagName:!1,transformAttributeName:!1,updateTag:function(e,t,n){return e}};t.buildOptions=function(e){return Object.assign({},n,e)},t.defaultOptions=n}),"./node_modules/fast-xml-parser/src/xmlparser/OrderedObjParser.js":(function(e,t,n){let r=n(
/*! ../util */
`./node_modules/fast-xml-parser/src/util.js`),i=n(
/*! ./xmlNode */
`./node_modules/fast-xml-parser/src/xmlparser/xmlNode.js`),a=n(
/*! ./DocTypeReader */
`./node_modules/fast-xml-parser/src/xmlparser/DocTypeReader.js`),o=n(
/*! strnum */
`./node_modules/strnum/strnum.js`),s=n(
/*! ../ignoreAttributes */
`./node_modules/fast-xml-parser/src/ignoreAttributes.js`);class c{constructor(e){this.options=e,this.currentNode=null,this.tagsNodeStack=[],this.docTypeEntities={},this.lastEntities={apos:{regex:/&(apos|#39|#x27);/g,val:`'`},gt:{regex:/&(gt|#62|#x3E);/g,val:`>`},lt:{regex:/&(lt|#60|#x3C);/g,val:`<`},quot:{regex:/&(quot|#34|#x22);/g,val:`"`}},this.ampEntity={regex:/&(amp|#38|#x26);/g,val:`&`},this.htmlEntities={space:{regex:/&(nbsp|#160);/g,val:` `},cent:{regex:/&(cent|#162);/g,val:`¢`},pound:{regex:/&(pound|#163);/g,val:`£`},yen:{regex:/&(yen|#165);/g,val:`¥`},euro:{regex:/&(euro|#8364);/g,val:`€`},copyright:{regex:/&(copy|#169);/g,val:`©`},reg:{regex:/&(reg|#174);/g,val:`®`},inr:{regex:/&(inr|#8377);/g,val:`₹`},num_dec:{regex:/&#([0-9]{1,7});/g,val:(e,t)=>String.fromCharCode(Number.parseInt(t,10))},num_hex:{regex:/&#x([0-9a-fA-F]{1,6});/g,val:(e,t)=>String.fromCharCode(Number.parseInt(t,16))}},this.addExternalEntities=l,this.parseXml=m,this.parseTextData=u,this.resolveNameSpace=d,this.buildAttributesMap=p,this.isItStopNode=v,this.replaceEntitiesValue=g,this.readStopNodeData=S,this.saveTextToParentTag=_,this.addChild=h,this.ignoreAttributesFn=s(this.options.ignoreAttributes)}}function l(e){let t=Object.keys(e);for(let n=0;n<t.length;n++){let r=t[n];this.lastEntities[r]={regex:RegExp(`&`+r+`;`,`g`),val:e[r]}}}function u(e,t,n,r,i,a,o){if(e!==void 0&&(this.options.trimValues&&!r&&(e=e.trim()),e.length>0)){o||(e=this.replaceEntitiesValue(e));let r=this.options.tagValueProcessor(t,e,n,i,a);return r==null?e:typeof r!=typeof e||r!==e?r:this.options.trimValues||e.trim()===e?C(e,this.options.parseTagValue,this.options.numberParseOptions):e}}function d(e){if(this.options.removeNSPrefix){let t=e.split(`:`),n=e.charAt(0)===`/`?`/`:``;if(t[0]===`xmlns`)return``;t.length===2&&(e=n+t[1])}return e}let f=RegExp(`([^\\s=]+)\\s*(=\\s*(['"])([\\s\\S]*?)\\3)?`,`gm`);function p(e,t,n){if(this.options.ignoreAttributes!==!0&&typeof e==`string`){let n=r.getAllMatches(e,f),i=n.length,a={};for(let e=0;e<i;e++){let r=this.resolveNameSpace(n[e][1]);if(this.ignoreAttributesFn(r,t))continue;let i=n[e][4],o=this.options.attributeNamePrefix+r;if(r.length)if(this.options.transformAttributeName&&(o=this.options.transformAttributeName(o)),o===`__proto__`&&(o=`#__proto__`),i!==void 0){this.options.trimValues&&(i=i.trim()),i=this.replaceEntitiesValue(i);let e=this.options.attributeValueProcessor(r,i,t);e==null?a[o]=i:typeof e!=typeof i||e!==i?a[o]=e:a[o]=C(i,this.options.parseAttributeValue,this.options.numberParseOptions)}else this.options.allowBooleanAttributes&&(a[o]=!0)}if(!Object.keys(a).length)return;if(this.options.attributesGroupName){let e={};return e[this.options.attributesGroupName]=a,e}return a}}let m=function(e){let t=new i(`!xml`),n=t,r=``,o=``;for(let s=0;s<e.length;s++)if(e[s]===`<`)if(e[s+1]===`/`){let t=b(e,`>`,s,`Closing Tag is not closed.`),i=e.substring(s+2,t).trim();if(this.options.removeNSPrefix){let e=i.indexOf(`:`);e!==-1&&(i=i.substr(e+1))}this.options.transformTagName&&(i=this.options.transformTagName(i)),n&&(r=this.saveTextToParentTag(r,n,o));let a=o.substring(o.lastIndexOf(`.`)+1);if(i&&this.options.unpairedTags.indexOf(i)!==-1)throw Error(`Unpaired tag can not be used as closing tag: </${i}>`);let c=0;a&&this.options.unpairedTags.indexOf(a)!==-1?(c=o.lastIndexOf(`.`,o.lastIndexOf(`.`)-1),this.tagsNodeStack.pop()):c=o.lastIndexOf(`.`),o=o.substring(0,c),n=this.tagsNodeStack.pop(),r=``,s=t}else if(e[s+1]===`?`){let t=x(e,s,!1,`?>`);if(!t)throw Error(`Pi Tag is not closed.`);if(r=this.saveTextToParentTag(r,n,o),!(this.options.ignoreDeclaration&&t.tagName===`?xml`||this.options.ignorePiTags)){let e=new i(t.tagName);e.add(this.options.textNodeName,``),t.tagName!==t.tagExp&&t.attrExpPresent&&(e[`:@`]=this.buildAttributesMap(t.tagExp,o,t.tagName)),this.addChild(n,e,o)}s=t.closeIndex+1}else if(e.substr(s+1,3)===`!--`){let t=b(e,`-->`,s+4,`Comment is not closed.`);if(this.options.commentPropName){let i=e.substring(s+4,t-2);r=this.saveTextToParentTag(r,n,o),n.add(this.options.commentPropName,[{[this.options.textNodeName]:i}])}s=t}else if(e.substr(s+1,2)===`!D`){let t=a(e,s);this.docTypeEntities=t.entities,s=t.i}else if(e.substr(s+1,2)===`![`){let t=b(e,`]]>`,s,`CDATA is not closed.`)-2,i=e.substring(s+9,t);r=this.saveTextToParentTag(r,n,o);let a=this.parseTextData(i,n.tagname,o,!0,!1,!0,!0);a??=``,this.options.cdataPropName?n.add(this.options.cdataPropName,[{[this.options.textNodeName]:i}]):n.add(this.options.textNodeName,a),s=t+2}else{let a=x(e,s,this.options.removeNSPrefix),c=a.tagName,l=a.rawTagName,u=a.tagExp,d=a.attrExpPresent,f=a.closeIndex;this.options.transformTagName&&(c=this.options.transformTagName(c)),n&&r&&n.tagname!==`!xml`&&(r=this.saveTextToParentTag(r,n,o,!1));let p=n;if(p&&this.options.unpairedTags.indexOf(p.tagname)!==-1&&(n=this.tagsNodeStack.pop(),o=o.substring(0,o.lastIndexOf(`.`))),c!==t.tagname&&(o+=o?`.`+c:c),this.isItStopNode(this.options.stopNodes,o,c)){let t=``;if(u.length>0&&u.lastIndexOf(`/`)===u.length-1)c[c.length-1]===`/`?(c=c.substr(0,c.length-1),o=o.substr(0,o.length-1),u=c):u=u.substr(0,u.length-1),s=a.closeIndex;else if(this.options.unpairedTags.indexOf(c)!==-1)s=a.closeIndex;else{let n=this.readStopNodeData(e,l,f+1);if(!n)throw Error(`Unexpected end of ${l}`);s=n.i,t=n.tagContent}let r=new i(c);c!==u&&d&&(r[`:@`]=this.buildAttributesMap(u,o,c)),t&&=this.parseTextData(t,c,o,!0,d,!0,!0),o=o.substr(0,o.lastIndexOf(`.`)),r.add(this.options.textNodeName,t),this.addChild(n,r,o)}else{if(u.length>0&&u.lastIndexOf(`/`)===u.length-1){c[c.length-1]===`/`?(c=c.substr(0,c.length-1),o=o.substr(0,o.length-1),u=c):u=u.substr(0,u.length-1),this.options.transformTagName&&(c=this.options.transformTagName(c));let e=new i(c);c!==u&&d&&(e[`:@`]=this.buildAttributesMap(u,o,c)),this.addChild(n,e,o),o=o.substr(0,o.lastIndexOf(`.`))}else{let e=new i(c);this.tagsNodeStack.push(n),c!==u&&d&&(e[`:@`]=this.buildAttributesMap(u,o,c)),this.addChild(n,e,o),n=e}r=``,s=f}}else r+=e[s];return t.child};function h(e,t,n){let r=this.options.updateTag(t.tagname,n,t[`:@`]);r===!1||(typeof r==`string`&&(t.tagname=r),e.addChild(t))}let g=function(e){if(this.options.processEntities){for(let t in this.docTypeEntities){let n=this.docTypeEntities[t];e=e.replace(n.regx,n.val)}for(let t in this.lastEntities){let n=this.lastEntities[t];e=e.replace(n.regex,n.val)}if(this.options.htmlEntities)for(let t in this.htmlEntities){let n=this.htmlEntities[t];e=e.replace(n.regex,n.val)}e=e.replace(this.ampEntity.regex,this.ampEntity.val)}return e};function _(e,t,n,r){return e&&=(r===void 0&&(r=Object.keys(t.child).length===0),e=this.parseTextData(e,t.tagname,n,!1,t[`:@`]?Object.keys(t[`:@`]).length!==0:!1,r),e!==void 0&&e!==``&&t.add(this.options.textNodeName,e),``),e}function v(e,t,n){let r=`*.`+n;for(let n in e){let i=e[n];if(r===i||t===i)return!0}return!1}function y(e,t,n=`>`){let r,i=``;for(let a=t;a<e.length;a++){let t=e[a];if(r)t===r&&(r=``);else if(t===`"`||t===`'`)r=t;else if(t===n[0])if(n[1]){if(e[a+1]===n[1])return{data:i,index:a}}else return{data:i,index:a};else t===`	`&&(t=` `);i+=t}}function b(e,t,n,r){let i=e.indexOf(t,n);if(i===-1)throw Error(r);return i+t.length-1}function x(e,t,n,r=`>`){let i=y(e,t+1,r);if(!i)return;let a=i.data,o=i.index,s=a.search(/\s/),c=a,l=!0;s!==-1&&(c=a.substring(0,s),a=a.substring(s+1).trimStart());let u=c;if(n){let e=c.indexOf(`:`);e!==-1&&(c=c.substr(e+1),l=c!==i.data.substr(e+1))}return{tagName:c,tagExp:a,closeIndex:o,attrExpPresent:l,rawTagName:u}}function S(e,t,n){let r=n,i=1;for(;n<e.length;n++)if(e[n]===`<`)if(e[n+1]===`/`){let a=b(e,`>`,n,`${t} is not closed`);if(e.substring(n+2,a).trim()===t&&(i--,i===0))return{tagContent:e.substring(r,n),i:a};n=a}else if(e[n+1]===`?`)n=b(e,`?>`,n+1,`StopNode is not closed.`);else if(e.substr(n+1,3)===`!--`)n=b(e,`-->`,n+3,`StopNode is not closed.`);else if(e.substr(n+1,2)===`![`)n=b(e,`]]>`,n,`StopNode is not closed.`)-2;else{let r=x(e,n,`>`);r&&((r&&r.tagName)===t&&r.tagExp[r.tagExp.length-1]!==`/`&&i++,n=r.closeIndex)}}function C(e,t,n){if(t&&typeof e==`string`){let t=e.trim();return t===`true`?!0:t===`false`?!1:o(e,n)}else if(r.isExist(e))return e;else return``}e.exports=c}),"./node_modules/fast-xml-parser/src/xmlparser/XMLParser.js":(function(e,t,n){let{buildOptions:r}=n(
/*! ./OptionsBuilder */
`./node_modules/fast-xml-parser/src/xmlparser/OptionsBuilder.js`),i=n(
/*! ./OrderedObjParser */
`./node_modules/fast-xml-parser/src/xmlparser/OrderedObjParser.js`),{prettify:a}=n(
/*! ./node2json */
`./node_modules/fast-xml-parser/src/xmlparser/node2json.js`),o=n(
/*! ../validator */
`./node_modules/fast-xml-parser/src/validator.js`);class s{constructor(e){this.externalEntities={},this.options=r(e)}parse(e,t){if(typeof e!=`string`)if(e.toString)e=e.toString();else throw Error(`XML data is accepted in String or Bytes[] form.`);if(t){t===!0&&(t={});let n=o.validate(e,t);if(n!==!0)throw Error(`${n.err.msg}:${n.err.line}:${n.err.col}`)}let n=new i(this.options);n.addExternalEntities(this.externalEntities);let r=n.parseXml(e);return this.options.preserveOrder||r===void 0?r:a(r,this.options)}addEntity(e,t){if(t.indexOf(`&`)!==-1)throw Error(`Entity value can't have '&'`);if(e.indexOf(`&`)!==-1||e.indexOf(`;`)!==-1)throw Error(`An entity must be set without '&' and ';'. Eg. use '#xD' for '&#xD;'`);if(t===`&`)throw Error(`An entity with value '&' is not permitted`);this.externalEntities[e]=t}}e.exports=s}),"./node_modules/fast-xml-parser/src/xmlparser/node2json.js":(function(e,t,n){function r(e,t){return i(e,t)}function i(e,t,n){let r,c={};for(let l=0;l<e.length;l++){let u=e[l],d=a(u),f=``;if(f=n===void 0?d:n+`.`+d,d===t.textNodeName)r===void 0?r=u[d]:r+=``+u[d];else if(d===void 0)continue;else if(u[d]){let e=i(u[d],t,f),n=s(e,t);u[`:@`]?o(e,u[`:@`],f,t):Object.keys(e).length===1&&e[t.textNodeName]!==void 0&&!t.alwaysCreateTextNode?e=e[t.textNodeName]:Object.keys(e).length===0&&(t.alwaysCreateTextNode?e[t.textNodeName]=``:e=``),c[d]!==void 0&&c.hasOwnProperty(d)?(Array.isArray(c[d])||(c[d]=[c[d]]),c[d].push(e)):t.isArray(d,f,n)?c[d]=[e]:c[d]=e}}return typeof r==`string`?r.length>0&&(c[t.textNodeName]=r):r!==void 0&&(c[t.textNodeName]=r),c}function a(e){let t=Object.keys(e);for(let e=0;e<t.length;e++){let n=t[e];if(n!==`:@`)return n}}function o(e,t,n,r){if(t){let i=Object.keys(t),a=i.length;for(let o=0;o<a;o++){let a=i[o];r.isArray(a,n+`.`+a,!0,!0)?e[a]=[t[a]]:e[a]=t[a]}}}function s(e,t){let{textNodeName:n}=t,r=Object.keys(e).length;return!!(r===0||r===1&&(e[n]||typeof e[n]==`boolean`||e[n]===0))}t.prettify=r}),"./node_modules/fast-xml-parser/src/xmlparser/xmlNode.js":(function(e,t,n){class r{constructor(e){this.tagname=e,this.child=[],this[`:@`]={}}add(e,t){e===`__proto__`&&(e=`#__proto__`),this.child.push({[e]:t})}addChild(e){e.tagname===`__proto__`&&(e.tagname=`#__proto__`),e[`:@`]&&Object.keys(e[`:@`]).length>0?this.child.push({[e.tagname]:e.child,":@":e[`:@`]}):this.child.push({[e.tagname]:e.child})}}e.exports=r}),"./node_modules/process/browser.js":(function(e,t){var n=e.exports={},r,i;function a(){throw Error(`setTimeout has not been defined`)}function o(){throw Error(`clearTimeout has not been defined`)}(function(){try{r=typeof setTimeout==`function`?setTimeout:a}catch{r=a}try{i=typeof clearTimeout==`function`?clearTimeout:o}catch{i=o}})();function s(e){if(r===setTimeout)return setTimeout(e,0);if((r===a||!r)&&setTimeout)return r=setTimeout,setTimeout(e,0);try{return r(e,0)}catch{try{return r.call(null,e,0)}catch{return r.call(this,e,0)}}}function c(e){if(i===clearTimeout)return clearTimeout(e);if((i===o||!i)&&clearTimeout)return i=clearTimeout,clearTimeout(e);try{return i(e)}catch{try{return i.call(null,e)}catch{return i.call(this,e)}}}var l=[],u=!1,d,f=-1;function p(){!u||!d||(u=!1,d.length?l=d.concat(l):f=-1,l.length&&m())}function m(){if(!u){var e=s(p);u=!0;for(var t=l.length;t;){for(d=l,l=[];++f<t;)d&&d[f].run();f=-1,t=l.length}d=null,u=!1,c(e)}}n.nextTick=function(e){var t=Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];l.push(new h(e,t)),l.length===1&&!u&&s(m)};function h(e,t){this.fun=e,this.array=t}h.prototype.run=function(){this.fun.apply(null,this.array)},n.title=`browser`,n.browser=!0,n.env={},n.argv=[],n.version=``,n.versions={};function g(){}n.on=g,n.addListener=g,n.once=g,n.off=g,n.removeListener=g,n.removeAllListeners=g,n.emit=g,n.prependListener=g,n.prependOnceListener=g,n.listeners=function(e){return[]},n.binding=function(e){throw Error(`process.binding is not supported`)},n.cwd=function(){return`/`},n.chdir=function(e){throw Error(`process.chdir is not supported`)},n.umask=function(){return 0}}),"./node_modules/strnum/strnum.js":(function(e,t){let n=/^[-+]?0x[a-fA-F0-9]+$/,r=/^([\-\+])?(0*)([0-9]*(\.[0-9]*)?)$/,i={hex:!0,leadingZeros:!0,decimalPoint:`.`,eNotation:!0};function a(e,t={}){if(t=Object.assign({},i,t),!e||typeof e!=`string`)return e;let a=e.trim();if(t.skipLike!==void 0&&t.skipLike.test(a))return e;if(e===`0`)return 0;if(t.hex&&n.test(a))return s(a,16);if(a.search(/[eE]/)!==-1){let n=a.match(/^([-\+])?(0*)([0-9]*(\.[0-9]*)?[eE][-\+]?[0-9]+)$/);if(n){if(t.leadingZeros)a=(n[1]||``)+n[3];else if(!(n[2]===`0`&&n[3][0]===`.`))return e;return t.eNotation?Number(a):e}else return e}else{let n=r.exec(a);if(n){let r=n[1],i=n[2],s=o(n[3]);if(!t.leadingZeros&&i.length>0&&r&&a[2]!==`.`||!t.leadingZeros&&i.length>0&&!r&&a[1]!==`.`)return e;if(t.leadingZeros&&i===e)return 0;{let n=Number(a),o=``+n;return o.search(/[eE]/)===-1?a.indexOf(`.`)===-1?i?s===o||r+s===o?n:e:a===o||a===r+o?n:e:o===`0`&&s===``||o===s||r&&o===`-`+s?n:e:t.eNotation?n:e}}else return e}}function o(e){return e&&e.indexOf(`.`)!==-1?(e=e.replace(/0+$/,``),e===`.`?e=`0`:e[0]===`.`?e=`0`+e:e[e.length-1]===`.`&&(e=e.substr(0,e.length-1)),e):e}function s(e,t){if(parseInt)return parseInt(e,t);if(Number.parseInt)return Number.parseInt(e,t);if(window&&window.parseInt)return window.parseInt(e,t);throw Error(`parseInt, Number.parseInt, window.parseInt are not supported`)}e.exports=a}),"./node_modules/webpack/buildin/amd-options.js":(function(e,t){(function(t){e.exports=t}).call(this,{})}),"./node_modules/webpack/buildin/module.js":(function(e,t){e.exports=function(e){return e.webpackPolyfill||=(e.deprecate=function(){},e.paths=[],e.children||=[],Object.defineProperty(e,`loaded`,{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,`id`,{enumerable:!0,get:function(){return e.i}}),1),e}}),"./package.json":(function(e){e.exports=JSON.parse(`{"name":"cos-js-sdk-v5","version":"1.10.1","description":"JavaScript SDK for [腾讯云对象存储](https://cloud.tencent.com/product/cos)","main":"dist/cos-js-sdk-v5.js","types":"index.d.ts","scripts":{"prettier":"prettier --write src demo/demo.js demo/CIDemos/*.js test/test.js server/sts.js lib/request.js index.d.ts","server":"node server/sts.js","dev":"cross-env NODE_ENV=development webpack -w --mode=development","build":"cross-env NODE_ENV=production webpack --mode=production","cos-auth.min.js":"uglifyjs ./demo/common/cos-auth.js -o ./demo/common/cos-auth.min.js -c -m","test":"jest --runInBand --coverage","postinstall":"node scripts/patch-check.js"},"repository":{"type":"git","url":"git+https://github.com/tencentyun/cos-js-sdk-v5.git"},"keywords":[],"author":"carsonxu","license":"ISC","bugs":{"url":"https://github.com/tencentyun/cos-js-sdk-v5/issues"},"homepage":"https://github.com/tencentyun/cos-js-sdk-v5#readme","dependencies":{"fast-xml-parser":"4.5.0"},"devDependencies":{"@babel/core":"7.17.9","@babel/plugin-transform-runtime":"7.18.10","@babel/preset-env":"7.16.11","babel-loader":"8.2.5","body-parser":"^1.18.3","cross-env":"^5.2.0","express":"^4.16.4","jest":"29.7.0","jest-environment-jsdom":"29.7.0","patch-package":"^8.0.0","prettier":"^3.0.1","qcloud-cos-sts":"^3.0.2","request":"^2.87.0","terser-webpack-plugin":"4.2.3","uglifyjs":"^2.4.11","webpack":"4.46.0","webpack-cli":"4.10.0"}}`)}),"./src/advance.js":(function(e,t,n){var r=n(
/*! @babel/runtime/helpers/typeof */
`./node_modules/@babel/runtime/helpers/typeof.js`),i=n(
/*! ./session */
`./src/session.js`),a=n(
/*! ./async */
`./src/async.js`),o=n(
/*! ./event */
`./src/event.js`).EventProxy,s=n(
/*! ./util */
`./src/util.js`),c=n(
/*! ./tracker */
`./src/tracker.js`);function l(e,t){var n=this,r=new o,a=e.TaskId,c=e.Bucket,l=e.Region,d=e.Key,f=e.Body,m=e.ChunkSize||e.SliceSize||n.options.ChunkSize,g=e.AsyncLimit,_=e.StorageClass,v=e.ServerSideEncryption,y,b,x=e.onHashProgress,S=e.tracker;S&&S.setParams({chunkSize:m}),n.logger.info({cate:`PROCESS`,tag:`upload`,msg:`[key=${e.Key}] 分块上传开始`}),r.on(`error`,function(r){if(n._isRunningTask(a))return e.UploadData.UploadId&&i.removeUsing(e.UploadData.UploadId),r.UploadId=e.UploadData.UploadId||``,n.logger.error({cate:`RESULT`,tag:`upload`,msg:`[key=${e.Key}] 分块上传失败: ${JSON.stringify(r)}`}),t(r)}),r.on(`upload_complete`,function(n){var r=s.extend({UploadId:e.UploadData.UploadId||``},n);t(null,r)}),r.on(`upload_slice_complete`,function(t){var o={};s.each(e.Headers,function(e,t){var n=t.toLowerCase();(n.indexOf(`x-cos-meta-`)===0||[`pic-operations`,`x-cos-callback`,`x-cos-callback-var`,`x-cos-return-body`].includes(n))&&(o[t]=e)}),n.logger.info({cate:`PROCESS`,tag:`upload`,msg:`[key=${e.Key}] 开始完成分块请求`}),h.call(n,{Bucket:c,Region:l,Key:d,UploadId:t.UploadId,SliceList:t.SliceList,Headers:o,tracker:S},function(o,s){if(n._isRunningTask(a)){if(i.removeUsing(t.UploadId),o)return b(null,!0),n.logger.error({cate:`RESULT`,tag:`upload`,msg:`[key=${e.Key}] 完成分块请求失败`}),r.emit(`error`,o);i.removeUploadId.call(n,t.UploadId),b({loaded:y,total:y},!0),n.logger.info({cate:`RESULT`,tag:`upload`,msg:`[key=${e.Key}] 完成分块请求成功`}),r.emit(`upload_complete`,s)}})}),r.on(`get_upload_data_finish`,function(t){var o=i.getFileId(f,e.ChunkSize,c,d);o&&i.saveUploadId.call(n,o,t.UploadId,n.options.UploadIdCacheLimit),i.setUsing(t.UploadId),b(null,!0),n.logger.info({cate:`PROCESS`,tag:`upload`,msg:`[key=${e.Key}] 开始上传各个分块`}),p.call(n,{TaskId:a,Bucket:c,Region:l,Key:d,Body:f,FileSize:y,SliceSize:m,AsyncLimit:g,ServerSideEncryption:v,UploadData:t,Headers:e.Headers,onProgress:b,tracker:S},function(t,i){if(n._isRunningTask(a)){if(t)return b(null,!0),n.logger.error({cate:`PROCESS`,tag:`upload`,msg:`[key=${e.Key}] 分块上传失败`}),r.emit(`error`,t);n.logger.info({cate:`PROCESS`,tag:`upload`,msg:`[key=${e.Key}] 所有分块上传完成`}),r.emit(`upload_slice_complete`,i)}})}),r.on(`get_file_size_finish`,function(){if(b=s.throttleOnProgress.call(n,y,e.onProgress),e.UploadData.UploadId)n.logger.info({cate:`PROCESS`,tag:`upload`,msg:`[key=${e.Key}] 已经获取到 uploadId, ${e.UploadData.UploadId}`}),r.emit(`get_upload_data_finish`,e.UploadData);else{var t=s.extend({TaskId:a,Bucket:c,Region:l,Key:d,Headers:e.Headers,StorageClass:_,Body:f,FileSize:y,SliceSize:m,onHashProgress:x,tracker:S},e);n.logger.info({cate:`PROCESS`,tag:`upload`,msg:`[key=${e.Key}] 去获取 uploadId`}),u.call(n,t,function(t,i){if(n._isRunningTask(a)){if(t)return r.emit(`error`,t);e.UploadData.UploadId=i.UploadId,e.UploadData.PartList=i.PartList,n.logger.info({cate:`PROCESS`,tag:`upload`,msg:`[key=${e.Key}] 获取到 uploadId, ${e.UploadData.UploadId}`}),r.emit(`get_upload_data_finish`,e.UploadData)}})}}),y=e.ContentLength,delete e.ContentLength,!e.Headers&&(e.Headers={}),s.each(e.Headers,function(t,n){n.toLowerCase()===`content-length`&&delete e.Headers[n]}),(function(){for(var t=[1,2,4,8,16,32,64,128,256,512,1024,1024*2,1024*4,1024*5],r=1024*1024,i=0;i<t.length&&(r=t[i]*1024*1024,!(y/r<=n.options.MaxPartNumber));i++);e.ChunkSize=e.SliceSize=m=Math.max(m,r)})(),y===0?(e.Body=``,e.ContentLength=0,e.SkipTask=!0,n.logger.info({cate:`PROCESS`,tag:`upload`,msg:`[key=${e.Key}] 文件大小为 0，执行简单上传`}),n.putObject(e,t)):r.emit(`get_file_size_finish`)}function u(e,t){var n=e.TaskId,r=e.Bucket,c=e.Region,l=e.Key,u=e.StorageClass,p=this,m={},h=e.FileSize,g=e.SliceSize,_=Math.ceil(h/g),v=0,y=0,b=s.throttleOnProgress.call(p,h,e.onHashProgress),x=function(t,n){var r=g*(t-1),i=Math.min(r+g,h),a=i-r;m[t]?n(null,{PartNumber:t,ETag:m[t],Size:a}):s.fileSlice(e.Body,r,i,!1,function(e){s.getFileMd5(e,function(e,r){if(e)return n(s.error(e));var i=`"`+r+`"`;m[t]=i,v+=1,y+=a,b({loaded:y,total:h}),n(null,{PartNumber:t,ETag:i,Size:a})})})},S=function(e,t){var n=e.length;if(n===0)return t(null,!0);if(n>_||n>1&&Math.max(e[0].Size,e[1].Size)!==g)return t(null,!1);var r=function(i){if(i<n){var a=e[i];x(a.PartNumber,function(e,n){n&&n.ETag===a.ETag&&n.Size===a.Size?r(i+1):t(null,!1)})}else t(null,!0)};r(0)},C=new o;C.on(`error`,function(e){if(p._isRunningTask(n))return t(e)}),C.on(`upload_id_available`,function(e){var n={},r=[];s.each(e.PartList,function(e){n[e.PartNumber]=e});for(var i=1;i<=_;i++){var a=n[i];a?(a.PartNumber=i,a.Uploaded=!0):a={PartNumber:i,ETag:null,Uploaded:!1},r.push(a)}e.PartList=r,t(null,e)}),C.on(`no_available_upload_id`,function(){if(p._isRunningTask(n)){var i=s.extend({Bucket:r,Region:c,Key:l,Query:s.clone(e.Query),StorageClass:u,Body:e.Body,calledBySdk:`sliceUploadFile`,tracker:e.tracker},e),a=s.clone(e.Headers);delete a[`x-cos-mime-limit`],i.Headers=a,p.logger.info({cate:`PROCESS`,tag:`upload`,msg:`[key=${e.Key}] 准备初始化分块上传`}),p.multipartInit(i,function(r,i){if(p._isRunningTask(n)){if(r)return p.logger.error({cate:`PROCESS`,tag:`upload`,msg:`[key=${e.Key}] 初始化分块上传失败, ${JSON.stringify(r)}`}),C.emit(`error`,r);var a=i.UploadId;if(!a)return t(s.error(Error(`no such upload id`)));p.logger.info({cate:`PROCESS`,tag:`upload`,msg:`[key=${e.Key}] 初始化分块上传成功`}),C.emit(`upload_id_available`,{UploadId:a,PartList:[]})}})}}),C.on(`has_and_check_upload_id`,function(t){t=t.reverse(),a.eachLimit(t,1,function(t,a){if(p._isRunningTask(n)){if(i.using[t]){a();return}f.call(p,{Bucket:r,Region:c,Key:l,UploadId:t,tracker:e.tracker},function(e,r){if(p._isRunningTask(n)){if(e)return i.removeUsing(t),C.emit(`error`,e);var o=r.PartList;o.forEach(function(e){e.PartNumber*=1,e.Size*=1,e.ETag=e.ETag||``}),S(o,function(e,r){if(p._isRunningTask(n)){if(e)return C.emit(`error`,e);r?a({UploadId:t,PartList:o}):a()}})}})}},function(e){p._isRunningTask(n)&&(b(null,!0),e&&e.UploadId?C.emit(`upload_id_available`,e):C.emit(`no_available_upload_id`))})}),C.on(`seek_local_avail_upload_id`,function(t){var a=i.getFileId(e.Body,e.ChunkSize,r,l),o=i.getUploadIdList.call(p,a);if(!a||!o){C.emit(`has_and_check_upload_id`,t);return}var u=function(a){if(a>=o.length){C.emit(`has_and_check_upload_id`,t);return}var d=o[a];if(!s.isInArray(t,d)){i.removeUploadId.call(p,d),u(a+1);return}if(i.using[d]){u(a+1);return}f.call(p,{Bucket:r,Region:c,Key:l,UploadId:d,tracker:e.tracker},function(e,t){p._isRunningTask(n)&&(e?(i.removeUploadId.call(p,d),u(a+1)):C.emit(`upload_id_available`,{UploadId:d,PartList:t.PartList}))})};u(0)}),C.on(`get_remote_upload_id_list`,function(){d.call(p,{Bucket:r,Region:c,Key:l,tracker:e.tracker},function(t,a){if(p._isRunningTask(n)){if(t)return C.emit(`error`,t);var o=s.filter(a.UploadList,function(e){return e.Key===l&&(!u||e.StorageClass.toUpperCase()===u.toUpperCase())}).reverse().map(function(e){return e.UploadId||e.UploadID});if(o.length)C.emit(`seek_local_avail_upload_id`,o);else{var c=i.getFileId(e.Body,e.ChunkSize,r,l),d;c&&(d=i.getUploadIdList.call(p,c))&&s.each(d,function(e){i.removeUploadId.call(p,e)}),C.emit(`no_available_upload_id`)}}})}),C.emit(`get_remote_upload_id_list`)}function d(e,t){var n=this,r=[],i={Bucket:e.Bucket,Region:e.Region,Prefix:e.Key,calledBySdk:e.calledBySdk||`sliceUploadFile`,tracker:e.tracker},a=function(){n.multipartList(i,function(e,n){if(e)return t(e);r.push.apply(r,n.Upload||[]),n.IsTruncated===`true`?(i.KeyMarker=n.NextKeyMarker,i.UploadIdMarker=n.NextUploadIdMarker,a()):t(null,{UploadList:r})})};a()}function f(e,t){var n=this,r=[],i={Bucket:e.Bucket,Region:e.Region,Key:e.Key,UploadId:e.UploadId,calledBySdk:`sliceUploadFile`,tracker:e.tracker},a=function(){n.multipartListPart(i,function(e,n){if(e)return t(e);r.push.apply(r,n.Part||[]),n.IsTruncated===`true`?(i.PartNumberMarker=n.NextPartNumberMarker,a()):t(null,{PartList:r})})};a()}function p(e,t){var n=this,r=e.TaskId,i=e.Bucket,o=e.Region,c=e.Key,l=e.UploadData,u=e.FileSize,d=e.SliceSize,f=Math.min(e.AsyncLimit||n.options.ChunkParallelLimit||1,256),p=e.Body,h=Math.ceil(u/d),g=0,_=e.ServerSideEncryption,v=e.Headers,y=s.filter(l.PartList,function(e){return e.Uploaded&&(g+=e.PartNumber>=h&&u%d||d),!e.Uploaded}),b=e.onProgress;n.logger.info({cate:`PROCESS`,tag:`upload`,msg:`[key=${e.Key}] 开始并发上传各个分块`}),a.eachLimit(y,f,function(t,a){if(n._isRunningTask(r)){var s=t.PartNumber,f=Math.min(u,t.PartNumber*d)-(t.PartNumber-1)*d,h=0;n.logger.info({cate:`PROCESS`,tag:`upload`,msg:`[key=${e.Key}] 分块${s}开始上传`}),m.call(n,{TaskId:r,Bucket:i,Region:o,Key:c,SliceSize:d,FileSize:u,PartNumber:s,ServerSideEncryption:_,Body:p,UploadData:l,Headers:v,onProgress:function(e){g+=e.loaded-h,h=e.loaded,b({loaded:g,total:u})},tracker:e.tracker},function(i,o){n._isRunningTask(r)&&(!i&&!o.ETag&&(i=`get ETag error, please add "ETag" to CORS ExposeHeader setting.( 获取ETag失败，请在CORS ExposeHeader设置中添加ETag，请参考文档：https://cloud.tencent.com/document/product/436/13318 )`,n.logger.error({cate:`PROCESS`,tag:`upload`,msg:`[key=${e.Key}] 分块${s}上传请求成功，但是未获取到 eTag`})),i?(g-=h,n.logger.info({cate:`RESULT`,tag:`upload`,msg:`[key=${e.Key}] 分块${s}上传失败`})):(g+=f-h,t.ETag=o.ETag),n.logger.info({cate:`RESULT`,tag:`upload`,msg:`[key=${e.Key}] 分块${s}上传成功`}),b({loaded:g,total:u}),a(i||null,o))})}},function(e){if(n._isRunningTask(r)){if(e)return t(e);t(null,{UploadId:l.UploadId,SliceList:l.PartList})}})}function m(e,t){var n=this,r=e.TaskId,i=e.Bucket,o=e.Region,c=e.Key,l=e.FileSize,u=e.Body,d=e.PartNumber*1,f=e.SliceSize,p=e.ServerSideEncryption,m=e.UploadData,h=e.Headers||{},g=n.options.ChunkRetryTimes+1,_=f*(d-1),v=f,y=_+f;y>l&&(y=l,v=y-_);var b=[`x-cos-traffic-limit`,`x-cos-mime-limit`],x={};s.each(h,function(e,t){b.indexOf(t)>-1&&(x[t]=e)});var S=m.PartList[d-1];a.retry(g,function(t){n._isRunningTask(r)&&s.fileSlice(u,_,y,!0,function(a){n.multipartUpload({TaskId:r,Bucket:i,Region:o,Key:c,ContentLength:v,PartNumber:d,UploadId:m.UploadId,ServerSideEncryption:p,Body:a,Headers:x,onProgress:e.onProgress,calledBySdk:`sliceUploadFile`,tracker:e.tracker},function(e,i){if(n._isRunningTask(r))return e?t(e):(S.Uploaded=!0,t(null,i))})})},function(e,i){if(n._isRunningTask(r))return t(e,i)})}function h(e,t){var n=e.Bucket,r=e.Region,i=e.Key,o=e.UploadId,s=e.SliceList,c=this,l=this.options.ChunkRetryTimes+1,u=e.Headers,d=s.map(function(e){return{PartNumber:e.PartNumber,ETag:e.ETag}});a.retry(l,function(t){c.multipartComplete({Bucket:n,Region:r,Key:i,UploadId:o,Parts:d,Headers:u,calledBySdk:`sliceUploadFile`,tracker:e.tracker},t)},function(e,n){t(e,n)})}function g(e,t){var n=e.Bucket,r=e.Region,i=e.Key,a=e.UploadId,c=e.Level||`task`,l=e.AsyncLimit,u=this,f=new o;if(f.on(`error`,function(e){return t(e)}),f.on(`get_abort_array`,function(a){_.call(u,{Bucket:n,Region:r,Key:i,Headers:e.Headers,AsyncLimit:l,AbortArray:a},t)}),c===`bucket`)d.call(u,{Bucket:n,Region:r,calledBySdk:`abortUploadTask`},function(e,n){if(e)return t(e);f.emit(`get_abort_array`,n.UploadList||[])});else if(c===`file`){if(!i)return t(s.error(Error(`abort_upload_task_no_key`)));d.call(u,{Bucket:n,Region:r,Key:i,calledBySdk:`abortUploadTask`},function(e,n){if(e)return t(e);f.emit(`get_abort_array`,n.UploadList||[])})}else if(c===`task`){if(!a)return t(s.error(Error(`abort_upload_task_no_id`)));if(!i)return t(s.error(Error(`abort_upload_task_no_key`)));f.emit(`get_abort_array`,[{Key:i,UploadId:a}])}else return t(s.error(Error(`abort_unknown_level`)))}function _(e,t){var n=e.Bucket,r=e.Region,i=e.Key,o=e.AbortArray,s=e.AsyncLimit||1,c=this,l=0,u=Array(o.length);a.eachLimit(o,s,function(t,a){var o=l;if(i&&i!==t.Key){u[o]={error:{KeyNotMatch:!0}},a(null);return}var s=t.UploadId||t.UploadID;c.multipartAbort({Bucket:n,Region:r,Key:t.Key,Headers:e.Headers,UploadId:s},function(e){var i={Bucket:n,Region:r,Key:t.Key,UploadId:s};u[o]={error:e,task:i},a(null)}),l++},function(e){if(e)return t(e);for(var n=[],r=[],i=0,a=u.length;i<a;i++){var o=u[i];o.task&&(o.error?r.push(o.task):n.push(o.task))}return t(null,{successList:n,errorList:r})})}function v(e,t){var n=this,i=e.SliceSize===void 0?n.options.SliceSize:e.SliceSize,a=[],o=e.Body,l=o.size||o.length||0,u={TaskId:``};if(n.options.EnableReporter){var d=n.options.UseAccelerate||typeof n.options.Domain==`string`&&n.options.Domain.includes(`accelerate.`),f=l>i?`sliceUploadFile`:`putObject`;e.tracker=new c({Beacon:n.options.BeaconReporter,clsReporter:n.options.ClsReporter,bucket:e.Bucket,region:e.Region,apiName:`uploadFile`,realApi:f,fileKey:e.Key,fileSize:l,accelerate:d,deepTracker:n.options.DeepTracker,customId:n.options.CustomId,delay:n.options.TrackerDelay})}s.each(e,function(e,t){r(e)!==`object`&&typeof e!=`function`&&(u[t]=e)});var p=e.onTaskReady;e.onTaskReady=function(e){u.TaskId=e,p&&p(e)};var m=l>i?`sliceUploadFile`:`putObject`,h=e.onFileFinish;a.push({api:m,params:e,callback:function(n,r){e.tracker&&e.tracker.report(n,r),h&&h(n,r,u),t&&t(n,r)}}),n._addTasks(a)}function y(e,t){var n=this,i=e.SliceSize===void 0?n.options.SliceSize:e.SliceSize,a=0,o=0,l=s.throttleOnProgress.call(n,o,e.onProgress),u=e.files.length,d=e.onFileFinish,f=Array(u),p=function(e,n,r){l(null,!0),d&&d(e,n,r),f[r.Index]={options:r,error:e,data:n},--u<=0&&t&&t(null,{files:f})},m=[];s.each(e.files,function(e,t){(function(){var u=e.Body,d=u.size||u.length||0,f={Index:t,TaskId:``};if(!n.options.UseRawKey&&e.Key&&e.Key.substr(0,1)===`/`&&(e.Key=e.Key.substr(1)),a+=d,n.options.EnableReporter){var h=n.options.UseAccelerate||typeof n.options.Domain==`string`&&n.options.Domain.includes(`accelerate.`),g=d>i?`sliceUploadFile`:`putObject`;e.tracker=new c({Beacon:n.options.BeaconReporter,clsReporter:n.options.ClsReporter,bucket:e.Bucket,region:e.Region,apiName:`uploadFiles`,realApi:g,fileKey:e.Key,fileSize:d,accelerate:h,deepTracker:n.options.DeepTracker,customId:n.options.CustomId,delay:n.options.TrackerDelay})}s.each(e,function(e,t){r(e)!==`object`&&typeof e!=`function`&&(f[t]=e)});var _=e.onTaskReady;e.onTaskReady=function(e){f.TaskId=e,_&&_(e)};var v=0,y=e.onProgress;e.onProgress=function(e){o=o-v+e.loaded,v=e.loaded,y&&y(e),l({loaded:o,total:a})};var b=d>i?`sliceUploadFile`:`putObject`,x=e.onFileFinish;m.push({api:b,params:e,callback:function(t,n){e.tracker&&e.tracker.report(t,n),x&&x(t,n),p&&p(t,n,f)}})})()}),n._addTasks(m)}function b(e,t){var n=new o,r=this,c=e.Bucket,l=e.Region,u=e.Key,d=e.CopySource,p=s.getSourceParams.call(this,d);if(!p){t(s.error(Error(`CopySource format error`)));return}var m=p.Bucket,h=p.Region,g=decodeURIComponent(p.Key),_=e.CopySliceSize===void 0?r.options.CopySliceSize:e.CopySliceSize;_=Math.max(0,_);var v=e.CopyChunkSize||this.options.CopyChunkSize,y=this.options.CopyChunkParallelLimit,b=this.options.ChunkRetryTimes+1,S=0,C=0,w,T,E={},D={},O={};n.on(`copy_slice_complete`,function(n){var o={};s.each(e.Headers,function(e,t){t.toLowerCase().indexOf(`x-cos-meta-`)===0&&(o[t]=e)});var d=s.map(n.PartList,function(e){return{PartNumber:e.PartNumber,ETag:e.ETag}});a.retry(b,function(t){r.multipartComplete({Bucket:c,Region:l,Key:u,UploadId:n.UploadId,Parts:d,tracker:e.tracker,calledBySdk:`sliceCopyFile`},t)},function(e,r){if(i.removeUsing(n.UploadId),e)return T(null,!0),t(e);i.removeUploadId(n.UploadId),T({loaded:w,total:w},!0),t(null,r)})}),n.on(`get_copy_data_finish`,function(o){var f=i.getCopyFileId(d,E,v,c,u);f&&i.saveUploadId(f,o.UploadId,r.options.UploadIdCacheLimit),i.setUsing(o.UploadId);var p=s.filter(o.PartList,function(e){return e.Uploaded&&(C+=e.PartNumber>=S&&w%v||v),!e.Uploaded});a.eachLimit(p,y,function(t,n){var i=t.PartNumber,s=t.CopySourceRange,f=t.end-t.start;a.retry(b,function(t){x.call(r,{Bucket:c,Region:l,Key:u,CopySource:d,UploadId:o.UploadId,PartNumber:i,CopySourceRange:s,tracker:e.tracker,calledBySdk:`sliceCopyFile`},t)},function(e,r){if(e)return n(e);C+=f,T({loaded:C,total:w}),t.ETag=r.ETag,n(e||null,r)})},function(e){if(e)return i.removeUsing(o.UploadId),T(null,!0),t(e);n.emit(`copy_slice_complete`,o)})}),n.on(`get_chunk_size_finish`,function(){var a=function(){r.multipartInit({Bucket:c,Region:l,Key:u,Headers:O,tracker:e.tracker,calledBySdk:`sliceCopyFile`},function(r,i){if(r)return t(r);e.UploadId=i.UploadId,n.emit(`get_copy_data_finish`,{UploadId:e.UploadId,PartList:e.PartList})})},o=i.getCopyFileId(d,E,v,c,u),p=i.getUploadIdList(o);if(!o||!p)return a();var m=function(t){if(t>=p.length)return a();var o=p[t];if(i.using[o])return m(t+1);f.call(r,{Bucket:c,Region:l,Key:u,UploadId:o,tracker:e.tracker,calledBySdk:`sliceCopyFile`},function(r,a){if(r)i.removeUploadId(o),m(t+1);else{if(i.using[o])return m(t+1);var c={},l=0;s.each(a.PartList,function(e){var t=parseInt(e.Size),n=l+t-1;c[e.PartNumber+`|`+l+`|`+n]=e.ETag,l+=t}),s.each(e.PartList,function(e){var t=c[e.PartNumber+`|`+e.start+`|`+e.end];t&&(e.ETag=t,e.Uploaded=!0)}),n.emit(`get_copy_data_finish`,{UploadId:o,PartList:e.PartList})}})};m(0)}),n.on(`get_file_size_finish`,function(){if((function(){for(var t=[1,2,4,8,16,32,64,128,256,512,1024,1024*2,1024*4,1024*5],n=1024*1024,i=0;i<t.length&&(n=t[i]*1024*1024,!(w/n<=r.options.MaxPartNumber));i++);e.ChunkSize=v=Math.max(v,n),S=Math.ceil(w/v);for(var a=[],o=1;o<=S;o++){var s=(o-1)*v,c=o*v<w?o*v-1:w-1,l={PartNumber:o,start:s,end:c,CopySourceRange:`bytes=`+s+`-`+c};a.push(l)}e.PartList=a})(),O=e.Headers[`x-cos-metadata-directive`]===`Replaced`?e.Headers:D,O[`x-cos-storage-class`]=e.Headers[`x-cos-storage-class`]||D[`x-cos-storage-class`],O=s.clearKey(O),D[`x-cos-storage-class`]===`ARCHIVE`||D[`x-cos-storage-class`]===`DEEP_ARCHIVE`){var i=D[`x-cos-restore`];if(!i||i===`ongoing-request="true"`){t(s.error(Error(`Unrestored archive object is not allowed to be copied`)));return}}delete O[`x-cos-copy-source`],delete O[`x-cos-metadata-directive`],delete O[`x-cos-copy-source-If-Modified-Since`],delete O[`x-cos-copy-source-If-Unmodified-Since`],delete O[`x-cos-copy-source-If-Match`],delete O[`x-cos-copy-source-If-None-Match`],n.emit(`get_chunk_size_finish`)}),r.headObject({Bucket:m,Region:h,Key:g,tracker:e.tracker,calledBySdk:`sliceCopyFile`},function(i,a){if(i){i.statusCode&&i.statusCode===404?t(s.error(i,{ErrorStatus:g+` Not Exist`})):t(i);return}if(w=e.FileSize=a.headers[`content-length`],w===void 0||!w){t(s.error(Error(`get Content-Length error, please add "Content-Length" to CORS ExposeHeader setting.（ 获取Content-Length失败，请在CORS ExposeHeader设置中添加Content-Length，请参考文档：https://cloud.tencent.com/document/product/436/13318 ）`)));return}if(e.tracker&&e.tracker.setParams({httpSize:w}),T=s.throttleOnProgress.call(r,w,e.onProgress),w<=_)e.Headers[`x-cos-metadata-directive`]||(e.Headers[`x-cos-metadata-directive`]=`Copy`),r.putObjectCopy(Object.assign(e,{calledBySdk:`sliceCopyFile`}),function(e,n){if(e)return T(null,!0),t(e);T({loaded:w,total:w},!0),t(e,n)});else{var o=a.headers;E=o,D={"Cache-Control":o[`cache-control`],"Content-Disposition":o[`content-disposition`],"Content-Encoding":o[`content-encoding`],"Content-Type":o[`content-type`],Expires:o.expires,"x-cos-storage-class":o[`x-cos-storage-class`]},s.each(o,function(e,t){var n=`x-cos-meta-`;t.indexOf(n)===0&&t.length>n.length&&(D[t]=e)}),n.emit(`get_file_size_finish`)}})}function x(e,t){var n=e.TaskId,r=e.Bucket,i=e.Region,o=e.Key,s=e.CopySource,c=e.UploadId,l=e.PartNumber*1,u=e.CopySourceRange,d=this.options.ChunkRetryTimes+1,f=this;a.retry(d,function(t){f.uploadPartCopy({TaskId:n,Bucket:r,Region:i,Key:o,CopySource:s,UploadId:c,PartNumber:l,CopySourceRange:u,tracker:e.tracker,calledBySdk:e.calledBySdk},function(e,n){t(e||null,n)})},function(e,n){return t(e,n)})}var S={sliceUploadFile:l,abortUploadTask:g,uploadFile:v,uploadFiles:y,sliceCopyFile:b};e.exports.init=function(e,t){t.transferToTaskMethod(S,`sliceUploadFile`),s.each(S,function(t,n){e.prototype[n]=s.apiWrapper(n,t)})}}),"./src/async.js":(function(e,t){e.exports={eachLimit:function(e,t,n,r){if(r||=function(){},!e.length||t<=0)return r();var i=0,a=0,o=0;(function s(){if(i>=e.length)return r();for(;o<t&&a<e.length;)a+=1,o+=1,n(e[a-1],function(t){t?(r(t),r=function(){}):(i+=1,--o,i>=e.length?r():s())})})()},retry:function(e,t,n){var r=function(i){t(function(t,a){t&&i<e?r(i+1):n(t,a)})};e<1?n():r(1)}}}),"./src/base.js":(function(e,t,n){var r=n(
/*! @babel/runtime/helpers/defineProperty */
`./node_modules/@babel/runtime/helpers/defineProperty.js`),i=n(
/*! @babel/runtime/helpers/typeof */
`./node_modules/@babel/runtime/helpers/typeof.js`);function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]==null?{}:arguments[t];t%2?a(Object(n),!0).forEach(function(t){r(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var s=n(
/*! ../lib/request */
`./lib/request.js`),c=n(
/*! ./util */
`./src/util.js`);function l(e,t){var n=this.options.Protocol||(c.isBrowser&&(typeof location>`u`?`undefined`:i(location))===`object`&&location.protocol===`http:`?`http:`:`https:`),r=this.options.ServiceDomain,a=e.AppId||this.options.appId,o=e.Region;r?(r=r.replace(/\{\{AppId\}\}/gi,a||``).replace(/\{\{Region\}\}/gi,o||``).replace(/\{\{.*?\}\}/gi,``),/^[a-zA-Z]+:\/\//.test(r)||(r=n+`//`+r),r.slice(-1)===`/`&&(r=r.slice(0,-1))):r=o?n+`//cos.`+o+`.myqcloud.com`:n+`//service.cos.myqcloud.com`;var s=``,l=o?`cos.`+o+`.myqcloud.com`:`service.cos.myqcloud.com`,u=r.replace(/^https?:\/\/([^/]+)(\/.*)?$/,`$1`);l===u&&(s=l),$.call(this,{Action:`name/cos:GetService`,url:r,method:`GET`,headers:e.Headers,SignHost:s,tracker:e.tracker},function(e,n){if(e)return t(e);var r=n&&n.ListAllMyBucketsResult&&n.ListAllMyBucketsResult.Buckets&&n.ListAllMyBucketsResult.Buckets.Bucket||[];r=c.isArray(r)?r:[r];var i=n&&n.ListAllMyBucketsResult&&n.ListAllMyBucketsResult.Owner||{};t(null,{Buckets:r,Owner:i,statusCode:n.statusCode,headers:n.headers})})}function u(e,t){var n=this,r=``;if(e.BucketAZConfig){var i={BucketAZConfig:e.BucketAZConfig};r=c.json2xml({CreateBucketConfiguration:i})}$.call(this,{Action:`name/cos:PutBucket`,method:`PUT`,Bucket:e.Bucket,Region:e.Region,headers:e.Headers,body:r,tracker:e.tracker},function(r,i){if(r)return t(r);var a=Q({protocol:n.options.Protocol,domain:n.options.Domain,bucket:e.Bucket,region:e.Region,isLocation:!0});t(null,{Location:a,statusCode:i.statusCode,headers:i.headers})})}function d(e,t){$.call(this,{Action:`name/cos:HeadBucket`,Bucket:e.Bucket,Region:e.Region,headers:e.Headers,method:`HEAD`,tracker:e.tracker},t)}function f(e,t){var n={};n.prefix=e.Prefix||``,n.delimiter=e.Delimiter,n.marker=e.Marker,n[`max-keys`]=e.MaxKeys,n[`encoding-type`]=e.EncodingType,$.call(this,{Action:`name/cos:GetBucket`,ResourceKey:n.prefix,method:`GET`,Bucket:e.Bucket,Region:e.Region,headers:e.Headers,qs:n,tracker:e.tracker},function(e,n){if(e)return t(e);var r=n.ListBucketResult||{},i=r.Contents||[],a=r.CommonPrefixes||[];i=c.isArray(i)?i:[i],a=c.isArray(a)?a:[a];var o=c.clone(r);c.extend(o,{Contents:i,CommonPrefixes:a,statusCode:n.statusCode,headers:n.headers}),t(null,o)})}function p(e,t){$.call(this,{Action:`name/cos:DeleteBucket`,Bucket:e.Bucket,Region:e.Region,headers:e.Headers,method:`DELETE`,tracker:e.tracker},function(e,n){if(e&&e.statusCode===204)return t(null,{statusCode:e.statusCode});if(e)return t(e);t(null,{statusCode:n.statusCode,headers:n.headers})})}function m(e,t){var n=e.Headers,r=``;if(e.AccessControlPolicy){var i=c.clone(e.AccessControlPolicy||{}),a=i.Grants||i.Grant;a=c.isArray(a)?a:[a],delete i.Grant,delete i.Grants,i.AccessControlList={Grant:a},r=c.json2xml({AccessControlPolicy:i}),n[`Content-Type`]=`application/xml`,n[`Content-MD5`]=c.b64(c.md5(r))}c.each(n,function(e,t){t.indexOf(`x-cos-grant-`)===0&&(n[t]=Z(n[t]))}),$.call(this,{Action:`name/cos:PutBucketACL`,method:`PUT`,Bucket:e.Bucket,Region:e.Region,headers:n,action:`acl`,body:r,tracker:e.tracker},function(e,n){if(e)return t(e);t(null,{statusCode:n.statusCode,headers:n.headers})})}function h(e,t){$.call(this,{Action:`name/cos:GetBucketACL`,method:`GET`,Bucket:e.Bucket,Region:e.Region,headers:e.Headers,action:`acl`,tracker:e.tracker},function(e,n){if(e)return t(e);var r=n.AccessControlPolicy||{},i=r.Owner||{},a=r.AccessControlList.Grant||[];a=c.isArray(a)?a:[a];var o=Ne(r);n.headers&&n.headers[`x-cos-acl`]&&(o.ACL=n.headers[`x-cos-acl`]),o=c.extend(o,{Owner:i,Grants:a,statusCode:n.statusCode,headers:n.headers}),t(null,o)})}function g(e,t){var n=(e.CORSConfiguration||{}).CORSRules||e.CORSRules||[];n=c.clone(c.isArray(n)?n:[n]),c.each(n,function(e){c.each([`AllowedOrigin`,`AllowedHeader`,`AllowedMethod`,`ExposeHeader`],function(t){var n=t+`s`,r=e[n]||e[t]||[];delete e[n],e[t]=c.isArray(r)?r:[r]})});var r={CORSRule:n};e.ResponseVary&&(r.ResponseVary=e.ResponseVary);var i=c.json2xml({CORSConfiguration:r}),a=e.Headers;a[`Content-Type`]=`application/xml`,a[`Content-MD5`]=c.b64(c.md5(i)),$.call(this,{Action:`name/cos:PutBucketCORS`,method:`PUT`,Bucket:e.Bucket,Region:e.Region,body:i,action:`cors`,headers:a,tracker:e.tracker},function(e,n){if(e)return t(e);t(null,{statusCode:n.statusCode,headers:n.headers})})}function _(e,t){$.call(this,{Action:`name/cos:GetBucketCORS`,method:`GET`,Bucket:e.Bucket,Region:e.Region,headers:e.Headers,action:`cors`,tracker:e.tracker},function(e,n){if(e){if(e.statusCode===404&&e.error&&e.error.Code===`NoSuchCORSConfiguration`){var r={CORSRules:[],statusCode:e.statusCode};e.headers&&(r.headers=e.headers),t(null,r)}else t(e);return}var i=n.CORSConfiguration||{},a=i.CORSRules||i.CORSRule||[];a=c.clone(c.isArray(a)?a:[a]);var o=i.ResponseVary;c.each(a,function(e){c.each([`AllowedOrigin`,`AllowedHeader`,`AllowedMethod`,`ExposeHeader`],function(t){var n=t+`s`,r=e[n]||e[t]||[];delete e[t],e[n]=c.isArray(r)?r:[r]})}),t(null,{CORSRules:a,ResponseVary:o,statusCode:n.statusCode,headers:n.headers})})}function v(e,t){$.call(this,{Action:`name/cos:DeleteBucketCORS`,method:`DELETE`,Bucket:e.Bucket,Region:e.Region,headers:e.Headers,action:`cors`,tracker:e.tracker},function(e,n){if(e&&e.statusCode===204)return t(null,{statusCode:e.statusCode});if(e)return t(e);t(null,{statusCode:n.statusCode||e.statusCode,headers:n.headers})})}function y(e,t){$.call(this,{Action:`name/cos:GetBucketLocation`,method:`GET`,Bucket:e.Bucket,Region:e.Region,headers:e.Headers,action:`location`,tracker:e.tracker},t)}function b(e,t){var n=e.Policy;try{typeof n==`string`&&(n=JSON.parse(n))}catch{}if(!n||typeof n==`string`)return t(c.error(Error(`Policy format error`)));var r=JSON.stringify(n);n.version||=`2.0`;var i=e.Headers;i[`Content-Type`]=`application/json`,i[`Content-MD5`]=c.b64(c.md5(r)),$.call(this,{Action:`name/cos:PutBucketPolicy`,method:`PUT`,Bucket:e.Bucket,Region:e.Region,action:`policy`,body:r,headers:i,tracker:e.tracker},function(e,n){if(e&&e.statusCode===204)return t(null,{statusCode:e.statusCode});if(e)return t(e);t(null,{statusCode:n.statusCode,headers:n.headers})})}function x(e,t){$.call(this,{Action:`name/cos:GetBucketPolicy`,method:`GET`,Bucket:e.Bucket,Region:e.Region,headers:e.Headers,action:`policy`,rawBody:!0,tracker:e.tracker},function(e,n){if(e)return e.statusCode&&e.statusCode===403?t(c.error(e,{ErrorStatus:`Access Denied`})):e.statusCode&&e.statusCode===405?t(c.error(e,{ErrorStatus:`Method Not Allowed`})):e.statusCode&&e.statusCode===404?t(c.error(e,{ErrorStatus:`Policy Not Found`})):t(e);var r={};try{r=JSON.parse(n.body)}catch{}t(null,{Policy:r,statusCode:n.statusCode,headers:n.headers})})}function S(e,t){$.call(this,{Action:`name/cos:DeleteBucketPolicy`,method:`DELETE`,Bucket:e.Bucket,Region:e.Region,headers:e.Headers,action:`policy`,tracker:e.tracker},function(e,n){if(e&&e.statusCode===204)return t(null,{statusCode:e.statusCode});if(e)return t(e);t(null,{statusCode:n.statusCode||e.statusCode,headers:n.headers})})}function C(e,t){var n=e.Tagging||{},r=n.TagSet||n.Tags||e.Tags||[];r=c.clone(c.isArray(r)?r:[r]);var i=c.json2xml({Tagging:{TagSet:{Tag:r}}}),a=e.Headers;a[`Content-Type`]=`application/xml`,a[`Content-MD5`]=c.b64(c.md5(i)),$.call(this,{Action:`name/cos:PutBucketTagging`,method:`PUT`,Bucket:e.Bucket,Region:e.Region,body:i,action:`tagging`,headers:a,tracker:e.tracker},function(e,n){if(e&&e.statusCode===204)return t(null,{statusCode:e.statusCode});if(e)return t(e);t(null,{statusCode:n.statusCode,headers:n.headers})})}function w(e,t){$.call(this,{Action:`name/cos:GetBucketTagging`,method:`GET`,Bucket:e.Bucket,Region:e.Region,headers:e.Headers,action:`tagging`,tracker:e.tracker},function(e,n){if(e){if(e.statusCode===404&&e.error&&(e.error===`Not Found`||e.error.Code===`NoSuchTagSet`)){var r={Tags:[],statusCode:e.statusCode};e.headers&&(r.headers=e.headers),t(null,r)}else t(e);return}var i=[];try{i=n.Tagging.TagSet.Tag||[]}catch{}i=c.clone(c.isArray(i)?i:[i]),t(null,{Tags:i,statusCode:n.statusCode,headers:n.headers})})}function T(e,t){$.call(this,{Action:`name/cos:DeleteBucketTagging`,method:`DELETE`,Bucket:e.Bucket,Region:e.Region,headers:e.Headers,action:`tagging`,tracker:e.tracker},function(e,n){if(e&&e.statusCode===204)return t(null,{statusCode:e.statusCode});if(e)return t(e);t(null,{statusCode:n.statusCode,headers:n.headers})})}function E(e,t){var n=(e.LifecycleConfiguration||{}).Rules||e.Rules||[];n=c.clone(n);var r=c.json2xml({LifecycleConfiguration:{Rule:n}}),i=e.Headers;i[`Content-Type`]=`application/xml`,i[`Content-MD5`]=c.b64(c.md5(r)),$.call(this,{Action:`name/cos:PutBucketLifecycle`,method:`PUT`,Bucket:e.Bucket,Region:e.Region,body:r,action:`lifecycle`,headers:i,tracker:e.tracker},function(e,n){if(e&&e.statusCode===204)return t(null,{statusCode:e.statusCode});if(e)return t(e);t(null,{statusCode:n.statusCode,headers:n.headers})})}function D(e,t){$.call(this,{Action:`name/cos:GetBucketLifecycle`,method:`GET`,Bucket:e.Bucket,Region:e.Region,headers:e.Headers,action:`lifecycle`,tracker:e.tracker},function(e,n){if(e){if(e.statusCode===404&&e.error&&e.error.Code===`NoSuchLifecycleConfiguration`){var r={Rules:[],statusCode:e.statusCode};e.headers&&(r.headers=e.headers),t(null,r)}else t(e);return}var i=[];try{i=n.LifecycleConfiguration.Rule||[]}catch{}i=c.clone(c.isArray(i)?i:[i]),t(null,{Rules:i,statusCode:n.statusCode,headers:n.headers})})}function O(e,t){$.call(this,{Action:`name/cos:DeleteBucketLifecycle`,method:`DELETE`,Bucket:e.Bucket,Region:e.Region,headers:e.Headers,action:`lifecycle`,tracker:e.tracker},function(e,n){if(e&&e.statusCode===204)return t(null,{statusCode:e.statusCode});if(e)return t(e);t(null,{statusCode:n.statusCode,headers:n.headers})})}function ee(e,t){if(!e.VersioningConfiguration){t(c.error(Error(`missing param VersioningConfiguration`)));return}var n=e.VersioningConfiguration||{},r=c.json2xml({VersioningConfiguration:n}),i=e.Headers;i[`Content-Type`]=`application/xml`,i[`Content-MD5`]=c.b64(c.md5(r)),$.call(this,{Action:`name/cos:PutBucketVersioning`,method:`PUT`,Bucket:e.Bucket,Region:e.Region,body:r,action:`versioning`,headers:i,tracker:e.tracker},function(e,n){if(e&&e.statusCode===204)return t(null,{statusCode:e.statusCode});if(e)return t(e);t(null,{statusCode:n.statusCode,headers:n.headers})})}function k(e,t){$.call(this,{Action:`name/cos:GetBucketVersioning`,method:`GET`,Bucket:e.Bucket,Region:e.Region,headers:e.Headers,action:`versioning`,tracker:e.tracker},function(e,n){e||!n.VersioningConfiguration&&(n.VersioningConfiguration={}),t(e,n)})}function A(e,t){var n=c.clone(e.ReplicationConfiguration),r=c.json2xml({ReplicationConfiguration:n});r=r.replace(/<(\/?)Rules>/gi,`<$1Rule>`),r=r.replace(/<(\/?)Tags>/gi,`<$1Tag>`);var i=e.Headers;i[`Content-Type`]=`application/xml`,i[`Content-MD5`]=c.b64(c.md5(r)),$.call(this,{Action:`name/cos:PutBucketReplication`,method:`PUT`,Bucket:e.Bucket,Region:e.Region,body:r,action:`replication`,headers:i,tracker:e.tracker},function(e,n){if(e&&e.statusCode===204)return t(null,{statusCode:e.statusCode});if(e)return t(e);t(null,{statusCode:n.statusCode,headers:n.headers})})}function j(e,t){$.call(this,{Action:`name/cos:GetBucketReplication`,method:`GET`,Bucket:e.Bucket,Region:e.Region,headers:e.Headers,action:`replication`,tracker:e.tracker},function(e,n){if(e){if(e.statusCode===404&&e.error&&(e.error===`Not Found`||e.error.Code===`ReplicationConfigurationnotFoundError`)){var r={ReplicationConfiguration:{Rules:[]},statusCode:e.statusCode};e.headers&&(r.headers=e.headers),t(null,r)}else t(e);return}!n.ReplicationConfiguration&&(n.ReplicationConfiguration={}),n.ReplicationConfiguration.Rule&&(n.ReplicationConfiguration.Rules=c.makeArray(n.ReplicationConfiguration.Rule),delete n.ReplicationConfiguration.Rule),t(e,n)})}function te(e,t){$.call(this,{Action:`name/cos:DeleteBucketReplication`,method:`DELETE`,Bucket:e.Bucket,Region:e.Region,headers:e.Headers,action:`replication`,tracker:e.tracker},function(e,n){if(e&&e.statusCode===204)return t(null,{statusCode:e.statusCode});if(e)return t(e);t(null,{statusCode:n.statusCode,headers:n.headers})})}function M(e,t){if(!e.WebsiteConfiguration){t(c.error(Error(`missing param WebsiteConfiguration`)));return}var n=c.clone(e.WebsiteConfiguration||{}),r=n.RoutingRules||n.RoutingRule||[];r=c.isArray(r)?r:[r],delete n.RoutingRule,delete n.RoutingRules,r.length&&(n.RoutingRules={RoutingRule:r});var i=c.json2xml({WebsiteConfiguration:n}),a=e.Headers;a[`Content-Type`]=`application/xml`,a[`Content-MD5`]=c.b64(c.md5(i)),$.call(this,{Action:`name/cos:PutBucketWebsite`,method:`PUT`,Bucket:e.Bucket,Region:e.Region,body:i,action:`website`,headers:a,tracker:e.tracker},function(e,n){if(e&&e.statusCode===204)return t(null,{statusCode:e.statusCode});if(e)return t(e);t(null,{statusCode:n.statusCode,headers:n.headers})})}function N(e,t){$.call(this,{Action:`name/cos:GetBucketWebsite`,method:`GET`,Bucket:e.Bucket,Region:e.Region,Key:e.Key,headers:e.Headers,action:`website`,tracker:e.tracker},function(e,n){if(e){if(e.statusCode===404&&e.error.Code===`NoSuchWebsiteConfiguration`){var r={WebsiteConfiguration:{},statusCode:e.statusCode};e.headers&&(r.headers=e.headers),t(null,r)}else t(e);return}var i=n.WebsiteConfiguration||{};if(i.RoutingRules){var a=c.clone(i.RoutingRules.RoutingRule||[]);a=c.makeArray(a),i.RoutingRules=a}t(null,{WebsiteConfiguration:i,statusCode:n.statusCode,headers:n.headers})})}function P(e,t){$.call(this,{Action:`name/cos:DeleteBucketWebsite`,method:`DELETE`,Bucket:e.Bucket,Region:e.Region,headers:e.Headers,action:`website`,tracker:e.tracker},function(e,n){if(e&&e.statusCode===204)return t(null,{statusCode:e.statusCode});if(e)return t(e);t(null,{statusCode:n.statusCode,headers:n.headers})})}function ne(e,t){if(!e.RefererConfiguration){t(c.error(Error(`missing param RefererConfiguration`)));return}var n=c.clone(e.RefererConfiguration||{}),r=n.DomainList||{},i=r.Domains||r.Domain||[];i=c.isArray(i)?i:[i],i.length&&(n.DomainList={Domain:i});var a=c.json2xml({RefererConfiguration:n}),o=e.Headers;o[`Content-Type`]=`application/xml`,o[`Content-MD5`]=c.b64(c.md5(a)),$.call(this,{Action:`name/cos:PutBucketReferer`,method:`PUT`,Bucket:e.Bucket,Region:e.Region,body:a,action:`referer`,headers:o,tracker:e.tracker},function(e,n){if(e&&e.statusCode===204)return t(null,{statusCode:e.statusCode});if(e)return t(e);t(null,{statusCode:n.statusCode,headers:n.headers})})}function F(e,t){$.call(this,{Action:`name/cos:GetBucketReferer`,method:`GET`,Bucket:e.Bucket,Region:e.Region,Key:e.Key,headers:e.Headers,action:`referer`,tracker:e.tracker},function(e,n){if(e){if(e.statusCode===404&&e.error.Code===`NoSuchRefererConfiguration`){var r={WebsiteConfiguration:{},statusCode:e.statusCode};e.headers&&(r.headers=e.headers),t(null,r)}else t(e);return}var i=n.RefererConfiguration||{};i.DomainList&&={Domains:c.makeArray(i.DomainList.Domain||[])},t(null,{RefererConfiguration:i,statusCode:n.statusCode,headers:n.headers})})}function re(e,t){var n=(e.DomainConfiguration||{}).DomainRule||e.DomainRule||[];n=c.clone(n);var r=c.json2xml({DomainConfiguration:{DomainRule:n}}),i=e.Headers;i[`Content-Type`]=`application/xml`,i[`Content-MD5`]=c.b64(c.md5(r)),$.call(this,{Action:`name/cos:PutBucketDomain`,method:`PUT`,Bucket:e.Bucket,Region:e.Region,body:r,action:`domain`,headers:i,tracker:e.tracker},function(e,n){if(e&&e.statusCode===204)return t(null,{statusCode:e.statusCode});if(e)return t(e);t(null,{statusCode:n.statusCode,headers:n.headers})})}function I(e,t){$.call(this,{Action:`name/cos:GetBucketDomain`,method:`GET`,Bucket:e.Bucket,Region:e.Region,headers:e.Headers,action:`domain`,tracker:e.tracker},function(e,n){if(e)return t(e);var r=[];try{r=n.DomainConfiguration.DomainRule||[]}catch{}r=c.clone(c.isArray(r)?r:[r]),t(null,{DomainRule:r,statusCode:n.statusCode,headers:n.headers})})}function L(e,t){$.call(this,{Action:`name/cos:DeleteBucketDomain`,method:`DELETE`,Bucket:e.Bucket,Region:e.Region,headers:e.Headers,action:`domain`,tracker:e.tracker},function(e,n){if(e&&e.statusCode===204)return t(null,{statusCode:e.statusCode});if(e)return t(e);t(null,{statusCode:n.statusCode,headers:n.headers})})}function R(e,t){var n=(e.OriginConfiguration||{}).OriginRule||e.OriginRule||[];n=c.clone(n);var r=c.json2xml({OriginConfiguration:{OriginRule:n}}),i=e.Headers;i[`Content-Type`]=`application/xml`,i[`Content-MD5`]=c.b64(c.md5(r)),$.call(this,{Action:`name/cos:PutBucketOrigin`,method:`PUT`,Bucket:e.Bucket,Region:e.Region,body:r,action:`origin`,headers:i,tracker:e.tracker},function(e,n){if(e&&e.statusCode===204)return t(null,{statusCode:e.statusCode});if(e)return t(e);t(null,{statusCode:n.statusCode,headers:n.headers})})}function ie(e,t){$.call(this,{Action:`name/cos:GetBucketOrigin`,method:`GET`,Bucket:e.Bucket,Region:e.Region,headers:e.Headers,action:`origin`,tracker:e.tracker},function(e,n){if(e)return t(e);var r=[];try{r=n.OriginConfiguration.OriginRule||[]}catch{}r=c.clone(c.isArray(r)?r:[r]),t(null,{OriginRule:r,statusCode:n.statusCode,headers:n.headers})})}function ae(e,t){$.call(this,{Action:`name/cos:DeleteBucketOrigin`,method:`DELETE`,Bucket:e.Bucket,Region:e.Region,headers:e.Headers,action:`origin`,tracker:e.tracker},function(e,n){if(e&&e.statusCode===204)return t(null,{statusCode:e.statusCode});if(e)return t(e);t(null,{statusCode:n.statusCode,headers:n.headers})})}function z(e,t){var n=c.json2xml({BucketLoggingStatus:e.BucketLoggingStatus||``}),r=e.Headers;r[`Content-Type`]=`application/xml`,r[`Content-MD5`]=c.b64(c.md5(n)),$.call(this,{Action:`name/cos:PutBucketLogging`,method:`PUT`,Bucket:e.Bucket,Region:e.Region,body:n,action:`logging`,headers:r,tracker:e.tracker},function(e,n){if(e&&e.statusCode===204)return t(null,{statusCode:e.statusCode});if(e)return t(e);t(null,{statusCode:n.statusCode,headers:n.headers})})}function B(e,t){$.call(this,{Action:`name/cos:GetBucketLogging`,method:`GET`,Bucket:e.Bucket,Region:e.Region,headers:e.Headers,action:`logging`,tracker:e.tracker},function(e,n){if(e)return t(e);t(null,{BucketLoggingStatus:n.BucketLoggingStatus,statusCode:n.statusCode,headers:n.headers})})}function V(e,t,n){var r=c.clone(t.InventoryConfiguration);if(r.OptionalFields&&={Field:r.OptionalFields||[]},r.Destination&&r.Destination.COSBucketDestination&&r.Destination.COSBucketDestination.Encryption){var i=r.Destination.COSBucketDestination.Encryption;Object.keys(i).indexOf(`SSECOS`)>-1&&(i[`SSE-COS`]=i.SSECOS,delete i.SSECOS)}var a=c.json2xml({InventoryConfiguration:r}),o=t.Headers;o[`Content-Type`]=`application/xml`,o[`Content-MD5`]=c.b64(c.md5(a));var s=e===`PUT`?`name/cos:PutBucketInventory`:`name/cos:PostBucketInventory`;$.call(this,{Action:s,method:e,Bucket:t.Bucket,Region:t.Region,body:a,action:`inventory`,qs:{id:t.Id},headers:o,tracker:t.tracker},function(e,t){if(e&&e.statusCode===204)return n(null,{statusCode:e.statusCode});if(e)return n(e);n(null,{statusCode:t.statusCode,headers:t.headers})})}function H(e,t){return V.call(this,`PUT`,e,t)}function U(e,t){return V.call(this,`POST`,e,t)}function W(e,t){$.call(this,{Action:`name/cos:GetBucketInventory`,method:`GET`,Bucket:e.Bucket,Region:e.Region,headers:e.Headers,action:`inventory`,qs:{id:e.Id},tracker:e.tracker},function(e,n){if(e)return t(e);var r=n.InventoryConfiguration;if(r&&r.OptionalFields&&r.OptionalFields.Field){var i=r.OptionalFields.Field;c.isArray(i)||(i=[i]),r.OptionalFields=i}if(r.Destination&&r.Destination.COSBucketDestination&&r.Destination.COSBucketDestination.Encryption){var a=r.Destination.COSBucketDestination.Encryption;Object.keys(a).indexOf(`SSE-COS`)>-1&&(a.SSECOS=a[`SSE-COS`],delete a[`SSE-COS`])}t(null,{InventoryConfiguration:r,statusCode:n.statusCode,headers:n.headers})})}function G(e,t){$.call(this,{Action:`name/cos:ListBucketInventory`,method:`GET`,Bucket:e.Bucket,Region:e.Region,headers:e.Headers,action:`inventory`,qs:{"continuation-token":e.ContinuationToken},tracker:e.tracker},function(e,n){if(e)return t(e);var r=n.ListInventoryConfigurationResult,i=r.InventoryConfiguration||[];i=c.isArray(i)?i:[i],delete r.InventoryConfiguration,c.each(i,function(e){if(e&&e.OptionalFields&&e.OptionalFields.Field){var t=e.OptionalFields.Field;c.isArray(t)||(t=[t]),e.OptionalFields=t}if(e.Destination&&e.Destination.COSBucketDestination&&e.Destination.COSBucketDestination.Encryption){var n=e.Destination.COSBucketDestination.Encryption;Object.keys(n).indexOf(`SSE-COS`)>-1&&(n.SSECOS=n[`SSE-COS`],delete n[`SSE-COS`])}}),r.InventoryConfigurations=i,c.extend(r,{statusCode:n.statusCode,headers:n.headers}),t(null,r)})}function K(e,t){$.call(this,{Action:`name/cos:DeleteBucketInventory`,method:`DELETE`,Bucket:e.Bucket,Region:e.Region,headers:e.Headers,action:`inventory`,qs:{id:e.Id},tracker:e.tracker},function(e,n){if(e&&e.statusCode===204)return t(null,{statusCode:e.statusCode});if(e)return t(e);t(null,{statusCode:n.statusCode,headers:n.headers})})}function q(e,t){if(!e.AccelerateConfiguration){t(c.error(Error(`missing param AccelerateConfiguration`)));return}var n={AccelerateConfiguration:e.AccelerateConfiguration||{}},r=c.json2xml(n),i={};i[`Content-Type`]=`application/xml`,i[`Content-MD5`]=c.b64(c.md5(r)),$.call(this,{Action:`name/cos:PutBucketAccelerate`,method:`PUT`,Bucket:e.Bucket,Region:e.Region,body:r,action:`accelerate`,headers:i,tracker:e.tracker},function(e,n){if(e)return t(e);t(null,{statusCode:n.statusCode,headers:n.headers})})}function J(e,t){$.call(this,{Action:`name/cos:GetBucketAccelerate`,method:`GET`,Bucket:e.Bucket,Region:e.Region,action:`accelerate`,tracker:e.tracker},function(e,n){e||!n.AccelerateConfiguration&&(n.AccelerateConfiguration={}),t(e,n)})}function Y(e,t){var n=e.ServerSideEncryptionConfiguration||{},r=n.Rule||n.Rules||[],i=c.json2xml({ServerSideEncryptionConfiguration:{Rule:r}}),a=e.Headers;a[`Content-Type`]=`application/xml`,a[`Content-MD5`]=c.b64(c.md5(i)),$.call(this,{Action:`name/cos:PutBucketEncryption`,method:`PUT`,Bucket:e.Bucket,Region:e.Region,body:i,action:`encryption`,headers:a,tracker:e.tracker},function(e,n){if(e&&e.statusCode===204)return t(null,{statusCode:e.statusCode});if(e)return t(e);t(null,{statusCode:n.statusCode,headers:n.headers})})}function oe(e,t){$.call(this,{Action:`name/cos:GetBucketEncryption`,method:`GET`,Bucket:e.Bucket,Region:e.Region,headers:e.Headers,action:`encryption`,tracker:e.tracker},function(e,n){if(e){if(e.statusCode===404&&e.code===`NoSuchEncryptionConfiguration`){var r={EncryptionConfiguration:{Rules:[]},statusCode:e.statusCode};e.headers&&(r.headers=e.headers),t(null,r)}else t(e);return}n.EncryptionConfiguration={Rules:c.makeArray(n.EncryptionConfiguration&&n.EncryptionConfiguration.Rule||[])},t(e,n)})}function se(e,t){$.call(this,{Action:`name/cos:DeleteBucketReplication`,method:`DELETE`,Bucket:e.Bucket,Region:e.Region,headers:e.Headers,action:`encryption`,tracker:e.tracker},function(e,n){if(e&&e.statusCode===204)return t(null,{statusCode:e.statusCode});if(e)return t(e);t(null,{statusCode:n.statusCode,headers:n.headers})})}function ce(e,t){$.call(this,{Action:`name/cos:HeadObject`,method:`HEAD`,Bucket:e.Bucket,Region:e.Region,Key:e.Key,VersionId:e.VersionId,headers:e.Headers,tracker:e.tracker},function(n,r){if(n){var i=n.statusCode;return e.Headers[`If-Modified-Since`]&&i&&i===304?t(null,{NotModified:!0,statusCode:i}):t(n)}r.ETag=c.attr(r.headers,`etag`,``),t(null,r)})}function le(e,t){var n={};n.prefix=e.Prefix||``,n.delimiter=e.Delimiter,n[`key-marker`]=e.KeyMarker,n[`version-id-marker`]=e.VersionIdMarker,n[`max-keys`]=e.MaxKeys,n[`encoding-type`]=e.EncodingType,$.call(this,{Action:`name/cos:GetBucketObjectVersions`,ResourceKey:n.prefix,method:`GET`,Bucket:e.Bucket,Region:e.Region,headers:e.Headers,qs:n,action:`versions`,tracker:e.tracker},function(e,n){if(e)return t(e);var r=n.ListVersionsResult||{},i=r.DeleteMarker||[];i=c.isArray(i)?i:[i];var a=r.Version||[];a=c.isArray(a)?a:[a];var o=c.clone(r);delete o.DeleteMarker,delete o.Version,c.extend(o,{DeleteMarkers:i,Versions:a,statusCode:n.statusCode,headers:n.headers}),t(null,o)})}function ue(e,t){var n=this;if(n.logger.info({cate:`PROCESS`,tag:`download`,msg:`[key=${e.Key}] getObject开始`}),this.options.ObjectKeySimplifyCheck&&c.simplifyPath(e.Key)===`/`){t(c.error(Error(`The Getobject Key is illegal`)));return}var r=e.Query||{},i=e.QueryString||``,a=c.throttleOnProgress.call(this,0,e.onProgress),o=e.tracker;o&&o.setParams({signStartTime:new Date().getTime()}),r[`response-content-type`]=e.ResponseContentType,r[`response-content-language`]=e.ResponseContentLanguage,r[`response-expires`]=e.ResponseExpires,r[`response-cache-control`]=e.ResponseCacheControl,r[`response-content-disposition`]=e.ResponseContentDisposition,r[`response-content-encoding`]=e.ResponseContentEncoding,$.call(this,{Action:`name/cos:GetObject`,method:`GET`,Bucket:e.Bucket,Region:e.Region,Key:e.Key,VersionId:e.VersionId,DataType:e.DataType,headers:e.Headers,qs:r,qsStr:i,rawBody:!0,onDownloadProgress:a,tracker:o},function(r,i){if(a(null,!0),r){var o=r.statusCode;return e.Headers[`If-Modified-Since`]&&o&&o===304?t(null,{NotModified:!0}):t(r)}t(null,{Body:i.body,ETag:c.attr(i.headers,`etag`,``),statusCode:i.statusCode,headers:i.headers}),n.logger.info({cate:`PROCESS`,tag:`download`,msg:`[key=${e.Key}] getObject结束`})})}function de(e,t){var n=this,r=e.ContentLength,i=c.throttleOnProgress.call(n,r,e.onProgress);n.logger.info({cate:`PROCESS`,tag:`upload`,msg:`[key=${e.Key}] putObject开始`});var a=e.Headers;!a[`Cache-Control`]&&!a[`cache-control`]&&(a[`Cache-Control`]=``),!a[`Content-Type`]&&!a[`content-type`]&&(a[`Content-Type`]=e.Body&&e.Body.type||``);var o=e.UploadAddMetaMd5||n.options.UploadAddMetaMd5||n.options.UploadCheckContentMd5,s=e.tracker;o&&s&&s.setParams({md5StartTime:new Date().getTime()}),o&&n.logger.debug({cate:`PROCESS`,tag:`upload`,msg:`[key=${e.Key}] 开始计算 md5`}),c.getBodyMd5(o,e.Body,function(o){o&&(n.logger.debug({cate:`PROCESS`,tag:`upload`,msg:`[key=${e.Key}] md5: ${o}，md5Base64=${c.b64(o)}`}),s&&s.setParams({md5EndTime:new Date().getTime()}),n.options.UploadCheckContentMd5&&(a[`Content-MD5`]=c.b64(o)),(e.UploadAddMetaMd5||n.options.UploadAddMetaMd5)&&(a[`x-cos-meta-md5`]=o)),e.ContentLength!==void 0&&(a[`Content-Length`]=e.ContentLength),i(null,!0),$.call(n,{Action:`name/cos:PutObject`,TaskId:e.TaskId,method:`PUT`,Bucket:e.Bucket,Region:e.Region,Key:e.Key,headers:e.Headers,qs:e.Query,body:e.Body,onProgress:i,tracker:s},function(a,o){if(a)return n.logger.error({cate:`ERROR`,tag:`upload`,msg:`上传失败，错误信息：${JSON.stringify(a)}`}),i(null,!0),t(a);i({loaded:r,total:r},!0);var s=Q({ForcePathStyle:n.options.ForcePathStyle,protocol:n.options.Protocol,domain:n.options.Domain,bucket:e.Bucket,region:n.options.UseAccelerate?`accelerate`:e.Region,object:e.Key});s=s.substr(s.indexOf(`://`)+3),o.Location=s,o.ETag=c.attr(o.headers,`etag`,``),n.logger.info({cate:`RESULT`,tag:`upload`,msg:`上传成功，Location=${s}`}),n.logger.info({cate:`PROCESS`,tag:`upload`,msg:`[key=${e.Key}] putObject结束`}),t(null,o)})},e.onHashProgress)}function X(e,t){$.call(this,{Action:`name/cos:DeleteObject`,method:`DELETE`,Bucket:e.Bucket,Region:e.Region,Key:e.Key,headers:e.Headers,VersionId:e.VersionId,action:e.Recursive?`recursive`:``,tracker:e.tracker},function(e,n){if(e){var r=e.statusCode;return r&&r===404?t(null,{BucketNotFound:!0,statusCode:r}):t(e)}t(null,{statusCode:n.statusCode,headers:n.headers})})}function fe(e,t){var n={};e.VersionId&&(n.versionId=e.VersionId),$.call(this,{Action:`name/cos:GetObjectACL`,method:`GET`,Bucket:e.Bucket,Region:e.Region,Key:e.Key,headers:e.Headers,qs:n,action:`acl`,tracker:e.tracker},function(e,n){if(e)return t(e);var r=n.AccessControlPolicy||{},i=r.Owner||{},a=r.AccessControlList&&r.AccessControlList.Grant||[];a=c.isArray(a)?a:[a];var o=Ne(r);delete o.GrantWrite,n.headers&&n.headers[`x-cos-acl`]&&(o.ACL=n.headers[`x-cos-acl`]),o=c.extend(o,{Owner:i,Grants:a,statusCode:n.statusCode,headers:n.headers}),t(null,o)})}function pe(e,t){var n=e.Headers,r=``;if(e.AccessControlPolicy){var i=c.clone(e.AccessControlPolicy||{}),a=i.Grants||i.Grant;a=c.isArray(a)?a:[a],delete i.Grant,delete i.Grants,i.AccessControlList={Grant:a},r=c.json2xml({AccessControlPolicy:i}),n[`Content-Type`]=`application/xml`,n[`Content-MD5`]=c.b64(c.md5(r))}c.each(n,function(e,t){t.indexOf(`x-cos-grant-`)===0&&(n[t]=Z(n[t]))}),$.call(this,{Action:`name/cos:PutObjectACL`,method:`PUT`,Bucket:e.Bucket,Region:e.Region,Key:e.Key,action:`acl`,headers:n,body:r,tracker:e.tracker},function(e,n){if(e)return t(e);t(null,{statusCode:n.statusCode,headers:n.headers})})}function me(e,t){var n=e.Headers;n.Origin=e.Origin,n[`Access-Control-Request-Method`]=e.AccessControlRequestMethod,n[`Access-Control-Request-Headers`]=e.AccessControlRequestHeaders,$.call(this,{Action:`name/cos:OptionsObject`,method:`OPTIONS`,Bucket:e.Bucket,Region:e.Region,Key:e.Key,headers:n,tracker:e.tracker},function(e,n){if(e)return e.statusCode&&e.statusCode===403?t(null,{OptionsForbidden:!0,statusCode:e.statusCode}):t(e);var r=n.headers||{};t(null,{AccessControlAllowOrigin:r[`access-control-allow-origin`],AccessControlAllowMethods:r[`access-control-allow-methods`],AccessControlAllowHeaders:r[`access-control-allow-headers`],AccessControlExposeHeaders:r[`access-control-expose-headers`],AccessControlMaxAge:r[`access-control-max-age`],statusCode:n.statusCode,headers:n.headers})})}function he(e,t){var n=this,r=e.Headers;!r[`Cache-Control`]&&!r[`cache-control`]&&(r[`Cache-Control`]=``);var i=e.CopySource||``,a=c.getSourceParams.call(this,i);if(!a){t(c.error(Error(`CopySource format error`)));return}var o=a.Bucket,s=a.Region,l=decodeURIComponent(a.Key);$.call(this,{Scope:[{action:`name/cos:GetObject`,bucket:o,region:s,prefix:l},{action:`name/cos:PutObject`,bucket:e.Bucket,region:e.Region,prefix:e.Key}],method:`PUT`,Bucket:e.Bucket,Region:e.Region,Key:e.Key,VersionId:e.VersionId,headers:e.Headers,tracker:e.tracker},function(r,i){if(r)return t(r);var a=c.clone(i.CopyObjectResult||{}),o=Q({ForcePathStyle:n.options.ForcePathStyle,protocol:n.options.Protocol,domain:n.options.Domain,bucket:e.Bucket,region:e.Region,object:e.Key,isLocation:!0});c.extend(a,{Location:o,statusCode:i.statusCode,headers:i.headers}),t(null,a)})}function ge(e,t){var n=e.CopySource||``,r=c.getSourceParams.call(this,n);if(!r){t(c.error(Error(`CopySource format error`)));return}var i=r.Bucket,a=r.Region,o=decodeURIComponent(r.Key);$.call(this,{Scope:[{action:`name/cos:GetObject`,bucket:i,region:a,prefix:o},{action:`name/cos:PutObject`,bucket:e.Bucket,region:e.Region,prefix:e.Key}],method:`PUT`,Bucket:e.Bucket,Region:e.Region,Key:e.Key,VersionId:e.VersionId,qs:{partNumber:e.PartNumber,uploadId:e.UploadId},headers:e.Headers,tracker:e.tracker},function(e,n){if(e)return t(e);var r=c.clone(n.CopyPartResult||{});c.extend(r,{statusCode:n.statusCode,headers:n.headers}),t(null,r)})}function _e(e,t){var n=e.Objects||[],r=e.Quiet;n=c.isArray(n)?n:[n];var i=c.json2xml({Delete:{Object:n,Quiet:r||!1}}),a=e.Headers;a[`Content-Type`]=`application/xml`,a[`Content-MD5`]=c.b64(c.md5(i));var o=c.map(n,function(t){return{action:`name/cos:DeleteObject`,bucket:e.Bucket,region:e.Region,prefix:t.Key}});$.call(this,{Scope:o,method:`POST`,Bucket:e.Bucket,Region:e.Region,body:i,action:`delete`,headers:a,tracker:e.tracker},function(e,n){if(e)return t(e);var r=n.DeleteResult||{},i=r.Deleted||[],a=r.Error||[];i=c.isArray(i)?i:[i],a=c.isArray(a)?a:[a];var o=c.clone(r);c.extend(o,{Error:a,Deleted:i,statusCode:n.statusCode,headers:n.headers}),t(null,o)})}function ve(e,t){var n=e.Headers;if(!e.RestoreRequest){t(c.error(Error(`missing param RestoreRequest`)));return}var r=e.RestoreRequest||{},i=c.json2xml({RestoreRequest:r});n[`Content-Type`]=`application/xml`,n[`Content-MD5`]=c.b64(c.md5(i)),$.call(this,{Action:`name/cos:RestoreObject`,method:`POST`,Bucket:e.Bucket,Region:e.Region,Key:e.Key,VersionId:e.VersionId,body:i,action:`restore`,headers:n,tracker:e.tracker},t)}function ye(e,t){var n=e.Tagging||{},r=n.TagSet||n.Tags||e.Tags||[];r=c.clone(c.isArray(r)?r:[r]);var i=c.json2xml({Tagging:{TagSet:{Tag:r}}}),a=e.Headers;a[`Content-Type`]=`application/xml`,a[`Content-MD5`]=c.b64(c.md5(i)),$.call(this,{Action:`name/cos:PutObjectTagging`,method:`PUT`,Bucket:e.Bucket,Key:e.Key,Region:e.Region,body:i,action:`tagging`,headers:a,VersionId:e.VersionId,tracker:e.tracker},function(e,n){if(e&&e.statusCode===204)return t(null,{statusCode:e.statusCode});if(e)return t(e);t(null,{statusCode:n.statusCode,headers:n.headers})})}function be(e,t){$.call(this,{Action:`name/cos:GetObjectTagging`,method:`GET`,Key:e.Key,Bucket:e.Bucket,Region:e.Region,headers:e.Headers,action:`tagging`,VersionId:e.VersionId,tracker:e.tracker},function(e,n){if(e){if(e.statusCode===404&&e.error&&(e.error===`Not Found`||e.error.Code===`NoSuchTagSet`)){var r={Tags:[],statusCode:e.statusCode};e.headers&&(r.headers=e.headers),t(null,r)}else t(e);return}var i=[];try{i=n.Tagging.TagSet.Tag||[]}catch{}i=c.clone(c.isArray(i)?i:[i]),t(null,{Tags:i,statusCode:n.statusCode,headers:n.headers})})}function xe(e,t){$.call(this,{Action:`name/cos:DeleteObjectTagging`,method:`DELETE`,Bucket:e.Bucket,Region:e.Region,Key:e.Key,headers:e.Headers,action:`tagging`,VersionId:e.VersionId,tracker:e.tracker},function(e,n){if(e&&e.statusCode===204)return t(null,{statusCode:e.statusCode});if(e)return t(e);t(null,{statusCode:n.statusCode,headers:n.headers})})}function Se(e,t){if(!e.SelectType)return t(c.error(Error(`missing param SelectType`)));var n=e.SelectRequest||{},r=c.json2xml({SelectRequest:n}),i=e.Headers;i[`Content-Type`]=`application/xml`,i[`Content-MD5`]=c.b64(c.md5(r)),$.call(this,{Action:`name/cos:GetObject`,method:`POST`,Bucket:e.Bucket,Region:e.Region,Key:e.Key,headers:e.Headers,action:`select`,qs:{"select-type":e.SelectType},VersionId:e.VersionId,body:r,DataType:`arraybuffer`,rawBody:!0,tracker:e.tracker},function(e,n){if(e&&e.statusCode===204)return t(null,{statusCode:e.statusCode});if(e)return t(e);var r=c.parseSelectPayload(n.body);t(null,{statusCode:n.statusCode,headers:n.headers,Body:r.body,Payload:r.payload})})}function Ce(e,t){var n=this,r=e.Headers,i=e.tracker;!r[`Cache-Control`]&&!r[`cache-control`]&&(r[`Cache-Control`]=``),!r[`Content-Type`]&&!r[`content-type`]&&(r[`Content-Type`]=e.Body&&e.Body.type||``);var a=e.Body&&(e.UploadAddMetaMd5||n.options.UploadAddMetaMd5);a&&i&&i.setParams({md5StartTime:new Date().getTime()}),c.getBodyMd5(a,e.Body,function(r){r&&(e.Headers[`x-cos-meta-md5`]=r),a&&i&&i.setParams({md5EndTime:new Date().getTime()}),$.call(n,{Action:`name/cos:InitiateMultipartUpload`,method:`POST`,Bucket:e.Bucket,Region:e.Region,Key:e.Key,action:`uploads`,headers:e.Headers,qs:e.Query,tracker:i},function(e,n){if(e)return i&&i.parent&&i.parent.setParams({errorNode:`multipartInit`}),t(e);if(n=c.clone(n||{}),n&&n.InitiateMultipartUploadResult)return t(null,c.extend(n.InitiateMultipartUploadResult,{statusCode:n.statusCode,headers:n.headers}));t(null,n)})},e.onHashProgress)}function we(e,t){var n=this;c.getFileSize(`multipartUpload`,e,function(){var r=e.tracker,i=n.options.UploadCheckContentMd5;i&&r&&r.setParams({md5StartTime:new Date().getTime()}),c.getBodyMd5(i,e.Body,function(a){a&&(e.Headers[`Content-MD5`]=c.b64(a)),i&&r&&r.setParams({md5EndTime:new Date().getTime()}),r&&r.setParams({partNumber:e.PartNumber}),$.call(n,{Action:`name/cos:UploadPart`,TaskId:e.TaskId,method:`PUT`,Bucket:e.Bucket,Region:e.Region,Key:e.Key,qs:{partNumber:e.PartNumber,uploadId:e.UploadId},headers:e.Headers,onProgress:e.onProgress,body:e.Body||null,tracker:r},function(e,n){if(e)return r&&r.parent&&r.parent.setParams({errorNode:`multipartUpload`}),t(e);t(null,{ETag:c.attr(n.headers,`etag`,``),statusCode:n.statusCode,headers:n.headers})})})})}function Te(e,t){for(var n=this,r=e.UploadId,i=e.Parts,a=e.tracker,o=0,s=i.length;o<s;o++)i[o].ETag&&i[o].ETag.indexOf(`"`)===0||(i[o].ETag=`"`+i[o].ETag+`"`);var l=c.json2xml({CompleteMultipartUpload:{Part:i}});l=l.replace(/\n\s*/g,``);var u=e.Headers;u[`Content-Type`]=`application/xml`,u[`Content-MD5`]=c.b64(c.md5(l)),$.call(this,{Action:`name/cos:CompleteMultipartUpload`,method:`POST`,Bucket:e.Bucket,Region:e.Region,Key:e.Key,qs:{uploadId:r},body:l,headers:u,tracker:a},function(r,i){if(r)return a&&a.parent&&a.parent.setParams({errorNode:`multipartComplete`}),t(r);var o=Q({ForcePathStyle:n.options.ForcePathStyle,protocol:n.options.Protocol,domain:n.options.Domain,bucket:e.Bucket,region:n.options.UseAccelerate?`accelerate`:e.Region,object:e.Key,isLocation:!0}),s=i.CompleteMultipartUploadResult||{};if(s.ProcessResults&&(s.UploadResult={OriginalInfo:{Key:s.Key,Location:o,ETag:s.ETag,ImageInfo:s.ImageInfo},ProcessResults:s.ProcessResults},delete s.ImageInfo,delete s.ProcessResults),s.CallbackResult){var l=s.CallbackResult;if(l.Status===`200`&&l.CallbackBody)try{s.CallbackBody=JSON.parse(c.decodeBase64(l.CallbackBody))}catch{s.CallbackBody={}}else s.CallbackError=l.Error||{};delete s.CallbackResult}if(s.ReturnBodyResult){var u=s.ReturnBodyResult;if(u.Status===`200`&&u.ReturnBody)try{s.ReturnBody=JSON.parse(c.decodeBase64(u.ReturnBody))}catch{s.ReturnBody={}}else s.ReturnError={Code:u.Code,Message:u.Message,Status:u.Status};delete s.ReturnBodyResult}var d=c.extend(s,{Location:o,statusCode:i.statusCode,headers:i.headers});t(null,d)})}function Ee(e,t){var n={};n.delimiter=e.Delimiter,n[`encoding-type`]=e.EncodingType,n.prefix=e.Prefix||``,n[`max-uploads`]=e.MaxUploads,n[`key-marker`]=e.KeyMarker,n[`upload-id-marker`]=e.UploadIdMarker,n=c.clearKey(n);var r=e.tracker;r&&r.setParams({signStartTime:new Date().getTime()}),$.call(this,{Action:`name/cos:ListMultipartUploads`,ResourceKey:n.prefix,method:`GET`,Bucket:e.Bucket,Region:e.Region,headers:e.Headers,qs:n,action:`uploads`,tracker:r},function(e,n){if(e)return r&&r.parent&&r.parent.setParams({errorNode:`multipartList`}),t(e);if(n&&n.ListMultipartUploadsResult){var i=n.ListMultipartUploadsResult.Upload||[];i=c.isArray(i)?i:[i],n.ListMultipartUploadsResult.Upload=i}var a=c.clone(n.ListMultipartUploadsResult||{});c.extend(a,{statusCode:n.statusCode,headers:n.headers}),t(null,a)})}function De(e,t){var n={},r=e.tracker;n.uploadId=e.UploadId,n[`encoding-type`]=e.EncodingType,n[`max-parts`]=e.MaxParts,n[`part-number-marker`]=e.PartNumberMarker,$.call(this,{Action:`name/cos:ListParts`,method:`GET`,Bucket:e.Bucket,Region:e.Region,Key:e.Key,headers:e.Headers,qs:n,tracker:r},function(e,n){if(e)return r&&r.parent&&r.parent.setParams({errorNode:`multipartListPart`}),t(e);var i=n.ListPartsResult||{},a=i.Part||[];a=c.isArray(a)?a:[a],i.Part=a;var o=c.clone(i);c.extend(o,{statusCode:n.statusCode,headers:n.headers}),t(null,o)})}function Oe(e,t){var n={};n.uploadId=e.UploadId,$.call(this,{Action:`name/cos:AbortMultipartUpload`,method:`DELETE`,Bucket:e.Bucket,Region:e.Region,Key:e.Key,headers:e.Headers,qs:n,tracker:e.tracker},function(e,n){if(e)return t(e);t(null,{statusCode:n.statusCode,headers:n.headers})})}function ke(e,t){$.call(this,{method:e.Method,Bucket:e.Bucket,Region:e.Region,Key:e.Key,action:e.Action,headers:e.Headers,qs:e.Query,body:e.Body,Url:e.Url,rawBody:e.RawBody,DataType:e.DataType,tracker:e.tracker},function(e,n){if(e)return t(e);n&&n.body&&(n.Body=n.body,delete n.body),t(e,n)})}function Ae(e,t){var n=e.Headers;!n[`Cache-Control`]&&!n[`cache-control`]&&(n[`Cache-Control`]=``),!n[`Content-Type`]&&!n[`content-type`]&&(n[`Content-Type`]=e.Body&&e.Body.type||``),$.call(this,{Action:`name/cos:AppendObject`,method:`POST`,Bucket:e.Bucket,Region:e.Region,action:`append`,Key:e.Key,body:e.Body,qs:{position:e.Position},headers:e.Headers,tracker:e.tracker},function(e,n){if(e)return t(e);t(null,n)})}function je(e){var t=this;return c.getAuth({SecretId:e.SecretId||this.options.SecretId||``,SecretKey:e.SecretKey||this.options.SecretKey||``,Bucket:e.Bucket,Region:e.Region,Method:e.Method,Key:e.Key,Query:e.Query,Headers:e.Headers,Expires:e.Expires,UseRawKey:t.options.UseRawKey,SystemClockOffset:t.options.SystemClockOffset})}function Me(e,t){var n=this,r=e.UseAccelerate===void 0?n.options.UseAccelerate:e.UseAccelerate,i=Q({ForcePathStyle:n.options.ForcePathStyle,protocol:e.Protocol||n.options.Protocol,domain:e.Domain||n.options.Domain,bucket:e.Bucket,region:r?`accelerate`:e.Region,object:e.Key}),a=``;e.Query&&(a+=c.obj2str(e.Query)),e.QueryString&&(a+=(a?`&`:``)+e.QueryString);var o=i;if(e.Sign!==void 0&&!e.Sign)return a&&(o+=`?`+a),t(null,{Url:o}),o;var s=Pe.call(this,{Bucket:e.Bucket,Region:e.Region,UseAccelerate:e.UseAccelerate,Url:i}),l=Fe.call(this,{Action:(e.Method||``).toUpperCase()===`PUT`?`name/cos:PutObject`:`name/cos:GetObject`,Bucket:e.Bucket||``,Region:e.Region||``,Method:e.Method||`get`,Key:e.Key,Expires:e.Expires,Headers:e.Headers,Query:e.Query,SignHost:s,ForceSignHost:e.ForceSignHost===!1?!1:n.options.ForceSignHost},function(e,n){if(t){if(e){t(e);return}var r=function(e){var t=e.match(/q-url-param-list.*?(?=&)/g)[0],n=`q-url-param-list=`+encodeURIComponent(t.replace(/q-url-param-list=/,``)).toLowerCase(),r=new RegExp(t,`g`);return e.replace(r,n)},o=i;o+=`?`+(n.Authorization.indexOf(`q-signature`)>-1?r(n.Authorization):`sign=`+encodeURIComponent(n.Authorization)),n.SecurityToken&&(o+=`&x-cos-security-token=`+n.SecurityToken),n.ClientIP&&(o+=`&clientIP=`+n.ClientIP),n.ClientUA&&(o+=`&clientUA=`+n.ClientUA),n.Token&&(o+=`&token=`+n.Token),a&&(o+=`&`+a),setTimeout(function(){t(null,{Url:o})})}});return l?(o+=`?`+l.Authorization+(l.SecurityToken?`&x-cos-security-token=`+l.SecurityToken:``),a&&(o+=`&`+a)):a&&(o+=`?`+a),o}function Ne(e){var t={GrantFullControl:[],GrantWrite:[],GrantRead:[],GrantReadAcp:[],GrantWriteAcp:[],ACL:``},n={FULL_CONTROL:`GrantFullControl`,WRITE:`GrantWrite`,READ:`GrantRead`,READ_ACP:`GrantReadAcp`,WRITE_ACP:`GrantWriteAcp`},r=(e&&e.AccessControlList||{}).Grant;r&&=c.isArray(r)?r:[r];var i={READ:0,WRITE:0,FULL_CONTROL:0};return r&&r.length&&c.each(r,function(r){var a=r.Grantee.URI&&r.Grantee.URI.endsWith(`/groups/global/AllUsers`);r.Grantee.ID===`qcs::cam::anyone:anyone`||a?i[r.Permission]=1:r.Grantee.ID!==e.Owner.ID&&t[n[r.Permission]].push(`id="`+r.Grantee.ID+`"`)}),i.FULL_CONTROL||i.WRITE&&i.READ?t.ACL=`public-read-write`:i.READ?t.ACL=`public-read`:t.ACL=`private`,c.each(n,function(e){t[e]=Z(t[e].join(`,`))}),t}function Z(e){var t=e.split(`,`),n={},r,i;for(r=0;r<t.length;)i=t[r].trim(),n[i]?t.splice(r,1):(n[i]=!0,t[r]=i,r++);return t.join(`,`)}function Q(e){var t=e.region||``,n=e.bucket||``,r=n.substr(0,n.lastIndexOf(`-`)),a=n.substr(n.lastIndexOf(`-`)+1),o=e.domain,s=e.object;typeof o==`function`&&(o=o({Bucket:n,Region:t})),[`http`,`https`].includes(e.protocol)&&(e.protocol+=`:`);var l=e.protocol||(c.isBrowser&&(typeof location>`u`?`undefined`:i(location))===`object`&&location.protocol===`http:`?`http:`:`https:`);o||(o=[`cn-south`,`cn-south-2`,`cn-north`,`cn-east`,`cn-southwest`,`sg`].indexOf(t)>-1?`{Region}.myqcloud.com`:`cos.{Region}.myqcloud.com`,e.ForcePathStyle||(o=`{Bucket}.`+o)),o=o.replace(/\{\{AppId\}\}/gi,a).replace(/\{\{Bucket\}\}/gi,r).replace(/\{\{Region\}\}/gi,t).replace(/\{\{.*?\}\}/gi,``),o=o.replace(/\{AppId\}/gi,a).replace(/\{BucketName\}/gi,r).replace(/\{Bucket\}/gi,n).replace(/\{Region\}/gi,t).replace(/\{.*?\}/gi,``),/^[a-zA-Z]+:\/\//.test(o)||(o=l+`//`+o),o.slice(-1)===`/`&&(o=o.slice(0,-1));var u=o;return e.ForcePathStyle&&(u+=`/`+n),u+=`/`,s&&(u+=c.camSafeUrlEncode(s).replace(/%2F/g,`/`)),e.isLocation&&(u=u.replace(/^https?:\/\//,``)),u}var Pe=function(e){if(!(e.Url||e.Bucket&&e.Region))return``;var t=e.UseAccelerate===void 0?this.options.UseAccelerate:e.UseAccelerate;return(e.Url||Q({ForcePathStyle:this.options.ForcePathStyle,protocol:this.options.Protocol,domain:this.options.Domain,bucket:e.Bucket,region:t?`accelerate`:e.Region})).replace(/^https?:\/\/([^/]+)(\/.*)?$/,`$1`)};function Fe(e,t){var n=c.clone(e.Headers),r=``;c.each(n,function(e,t){(e===``||[`content-type`,`cache-control`,`expires`].indexOf(t.toLowerCase())>-1)&&delete n[t],t.toLowerCase()===`host`&&(r=e)});var i=e.ForceSignHost!==!1;!r&&e.SignHost&&i&&(n.Host=e.SignHost);var a=!1,o=function(e,n){a||(a=!0,n&&n.XCosSecurityToken&&!n.SecurityToken&&(n=c.clone(n),n.SecurityToken=n.XCosSecurityToken,delete n.XCosSecurityToken),t&&t(e,n))},s=this,l=e.Bucket||``,u=e.Region||``,d=e.Key||``;s.options.ForcePathStyle&&l&&(d=l+`/`+d);var f=`/`+d,p={},m=e.Scope;if(!m){var h=e.Action||``,g=e.ResourceKey||e.Key||``;m=e.Scope||[{action:h,bucket:l,region:u,prefix:g}]}var _=c.md5(JSON.stringify(m));s._StsCache=s._StsCache||[],(function(){var e,t;for(e=s._StsCache.length-1;e>=0;e--){t=s._StsCache[e];var n=Math.round(c.getSkewTime(s.options.SystemClockOffset)/1e3)+30;if(t.StartTime&&n<t.StartTime||n>=t.ExpiredTime){s._StsCache.splice(e,1);continue}if(!t.ScopeLimit||t.ScopeLimit&&t.ScopeKey===_){p=t;break}}})();var v=function(){var t=``;p.StartTime&&e.Expires?t=p.StartTime+`;`+(p.StartTime+e.Expires*1):p.StartTime&&p.ExpiredTime&&(t=p.StartTime+`;`+p.ExpiredTime);var r={Authorization:c.getAuth({SecretId:p.TmpSecretId,SecretKey:p.TmpSecretKey,Method:e.Method,Pathname:f,Query:e.Query,Headers:n,Expires:e.Expires,UseRawKey:s.options.UseRawKey,SystemClockOffset:s.options.SystemClockOffset,KeyTime:t,ForceSignHost:i}),SecurityToken:p.SecurityToken||p.XCosSecurityToken||``,Token:p.Token||``,ClientIP:p.ClientIP||``,ClientUA:p.ClientUA||``,SignFrom:`client`};o(null,r)},y=function(e){if(e.Authorization){var t=!1,n=e.Authorization;if(n)if(n.indexOf(` `)>-1)t=!1;else if(n.indexOf(`q-sign-algorithm=`)>-1&&n.indexOf(`q-ak=`)>-1&&n.indexOf(`q-sign-time=`)>-1&&n.indexOf(`q-key-time=`)>-1&&n.indexOf(`q-url-param-list=`)>-1)t=!0;else try{n=atob(n),n.indexOf(`a=`)>-1&&n.indexOf(`k=`)>-1&&n.indexOf(`t=`)>-1&&n.indexOf(`r=`)>-1&&n.indexOf(`b=`)>-1&&(t=!0)}catch{}if(!t)return c.error(Error(`getAuthorization callback params format error`))}else{if(!e.TmpSecretId)return c.error(Error(`getAuthorization callback params missing "TmpSecretId"`));if(!e.TmpSecretKey)return c.error(Error(`getAuthorization callback params missing "TmpSecretKey"`));if(!e.SecurityToken&&!e.XCosSecurityToken)return c.error(Error(`getAuthorization callback params missing "SecurityToken"`));if(!e.ExpiredTime)return c.error(Error(`getAuthorization callback params missing "ExpiredTime"`));if(e.ExpiredTime&&e.ExpiredTime.toString().length!==10)return c.error(Error(`getAuthorization callback params "ExpiredTime" should be 10 digits`));if(e.StartTime&&e.StartTime.toString().length!==10)return c.error(Error(`getAuthorization callback params "StartTime" should be 10 StartTime`))}return!1};if(p.ExpiredTime&&p.ExpiredTime-c.getSkewTime(s.options.SystemClockOffset)/1e3>60)v();else if(s.options.getAuthorization)s.options.getAuthorization.call(s,{Bucket:l,Region:u,Method:e.Method,Key:d,Pathname:f,Query:e.Query,Headers:n,Scope:m,SystemClockOffset:s.options.SystemClockOffset,ForceSignHost:i},function(e){typeof e==`string`&&(e={Authorization:e});var t=y(e);if(t)return o(t);e.Authorization?o(null,e):(p=e||{},p.Scope=m,p.ScopeKey=_,s._StsCache.push(p),v())});else if(s.options.getSTS)s.options.getSTS.call(s,{Bucket:l,Region:u},function(e){p=e||{},p.Scope=m,p.ScopeKey=_,p.TmpSecretId||=p.SecretId,p.TmpSecretKey||=p.SecretKey;var t=y(p);if(t)return o(t);s._StsCache.push(p),v()});else return function(){var t=``;if(s.options.StartTime&&e.Expires){if(s.options.StartTime.toString().length!==10)return o(c.error(Error(`params "StartTime" should be 10 digits`)));t=s.options.StartTime+`;`+(s.options.StartTime+e.Expires*1)}else if(s.options.StartTime&&s.options.ExpiredTime){if(s.options.StartTime.toString().length!==10)return o(c.error(Error(`params "StartTime" should be 10 digits`)));if(s.options.ExpiredTime.toString().length!==10)return o(c.error(Error(`params "ExpiredTime" should be 10 digits`)));t=s.options.StartTime+`;`+s.options.ExpiredTime*1}var r={Authorization:c.getAuth({SecretId:e.SecretId||s.options.SecretId,SecretKey:e.SecretKey||s.options.SecretKey,Method:e.Method,Pathname:f,Query:e.Query,Headers:n,Expires:e.Expires,KeyTime:t,UseRawKey:s.options.UseRawKey,SystemClockOffset:s.options.SystemClockOffset,ForceSignHost:i}),SecurityToken:s.options.SecurityToken||s.options.XCosSecurityToken,SignFrom:`client`};return o(null,r),r}();return``}function Ie(e){var t=this,n=!1,r=!1,i=!1,a=e.headers&&(e.headers.date||e.headers.Date)||e.error&&e.error.ServerTime;try{var o=e.error.Code,s=e.error.Message;(o===`RequestTimeTooSkewed`||o===`AccessDenied`&&s===`Request has expired`)&&(r=!0)}catch{}if(e)if(r&&a){var l=Date.parse(a);this.options.CorrectClockSkew&&Math.abs(c.getSkewTime(this.options.SystemClockOffset)-l)>=3e4&&(console.error(`error: Local time is too skewed.`),this.options.SystemClockOffset=l-Date.now(),n=!0)}else Math.floor(e.statusCode/100)===5?(n=!0,i=!1):(e.message===`timeout`||e.message===`CORS blocked or network error`)&&(n=!0,i=t.options.AutoSwitchHost);return{canRetry:n,networkError:i}}function Le(e){var t=e.requestUrl,n=e.clientCalcSign,r=e.networkError;return!this.options.AutoSwitchHost||!t||!n||!r?!1:/^https?:\/\/[^\/]*\.cos\.[^\/]*\.myqcloud\.com(\/.*)?$/.test(t)&&!/^https?:\/\/[^\/]*\.cos\.accelerate\.myqcloud\.com(\/.*)?$/.test(t)}function $(e,t){var n=this;!e.headers&&(e.headers={}),!e.qs&&(e.qs={}),e.VersionId&&(e.qs.versionId=e.VersionId),e.qs=c.clearKey(e.qs),e.headers&&=c.clearKey(e.headers),e.qs&&=c.clearKey(e.qs);var r=c.clone(e.qs);e.action&&(r[e.action]=``);var i=e.url||e.Url,a=e.SignHost||Pe.call(this,{Bucket:e.Bucket,Region:e.Region,Url:i}),s=e.tracker,l=function(i){var c=n.options.SystemClockOffset;s&&s.setParams({signStartTime:new Date().getTime(),httpRetryTimes:i-1}),e.SwitchHost&&(a=a.replace(/myqcloud.com/,`tencentcos.cn`));var u=o(o({},e),{},{Query:r,SignHost:a,ForceSignHost:n.options.ForceSignHost});delete u.tracker,n.logger.debug({cate:`PROCESS`,tag:`base`,msg:`开始计算签名, opt=${JSON.stringify(u)}`}),Fe.call(n,{Bucket:e.Bucket||``,Region:e.Region||``,Method:e.method,Key:e.Key,Query:r,Headers:e.headers,SignHost:a,Action:e.Action,ResourceKey:e.ResourceKey,Scope:e.Scope,ForceSignHost:n.options.ForceSignHost,SwitchHost:e.SwitchHost},function(r,a){if(r){n.logger.error({cate:`PROCESS`,tag:`base`,msg:`签名获取失败, err=${JSON.stringify(r.message)}`}),t(r);return}s&&s.setParams({signEndTime:new Date().getTime(),httpStartTime:new Date().getTime()}),e.AuthData=a,n.logger.debug({cate:`PROCESS`,tag:`base`,msg:`签名获取成功`}),n.logger.info({cate:`PROCESS`,tag:`base`,msg:`准备发起请求`}),Re.call(n,e,function(r,o){s&&s.setParams({httpEndTime:new Date().getTime()});var u=!1,d=!1;if(r){var f=Ie.call(n,r);u=f.canRetry||c!==n.options.SystemClockOffset,d=f.networkError,n.logger.error({cate:`PROCESS`,tag:`network`,msg:`请求失败, err=${JSON.stringify(r)}, canRetry=${u}, networkError=${d}, tryTimes=${i}`})}r&&i<4&&u?(e.headers&&(delete e.headers.Authorization,delete e.headers.token,delete e.headers.clientIP,delete e.headers.clientUA,e.headers[`x-cos-security-token`]&&delete e.headers[`x-cos-security-token`],e.headers[`x-ci-security-token`]&&delete e.headers[`x-ci-security-token`]),e.SwitchHost=Le.call(n,{requestUrl:r?.url||``,clientCalcSign:a.SignFrom===`client`,networkError:d}),e.headers[`x-cos-sdk-retry`]=!0,n.logger.info({cate:`PROCESS`,tag:`base`,msg:`重试请求, 重试第${i}次`}),l(i+1)):(n.logger.info({cate:`PROCESS`,tag:`base`,msg:`请求完成`}),t(r,o))})})};l(1)}function Re(e,t){var n=this,r=e.TaskId;if(!(r&&!n._isRunningTask(r))){var i=e.Bucket,a=e.Region,o=e.Key,l=e.method||`GET`,u=e.Url||e.url,d=e.body,f=e.rawBody;n.options.UseAccelerate&&(a=`accelerate`),u||=Q({ForcePathStyle:n.options.ForcePathStyle,protocol:n.options.Protocol,domain:n.options.Domain,bucket:i,region:a,object:o}),e.SwitchHost&&(u=u.replace(/myqcloud.com/,`tencentcos.cn`));var p=o?u:``;e.action&&(u=u+`?`+(c.isIOS_QQ?`${e.action}=`:e.action)),e.qsStr&&(u=u.indexOf(`?`)>-1?u+`&`+e.qsStr:u+`?`+e.qsStr);var m={method:l,url:u,headers:e.headers,qs:e.qs,body:d},h=`x-cos-security-token`;if(c.isCIHost(u)&&(h=`x-ci-security-token`),m.headers.Authorization=e.AuthData.Authorization,e.AuthData.Token&&(m.headers.token=e.AuthData.Token),e.AuthData.ClientIP&&(m.headers.clientIP=e.AuthData.ClientIP),e.AuthData.ClientUA&&(m.headers.clientUA=e.AuthData.ClientUA),e.AuthData.SecurityToken&&(m.headers[h]=e.AuthData.SecurityToken),e.Action&&(m.action=e.Action),m.key=e.Key||e.ResourceKey,m.headers&&=c.clearKey(m.headers),m=c.clearKey(m),e.onProgress&&typeof e.onProgress==`function`){var g=d&&(d.size||d.length)||0;m.onProgress=function(t){if(!(r&&!n._isRunningTask(r))){var i=t?t.loaded:0;e.onProgress({loaded:i,total:g})}}}e.onDownloadProgress&&(m.onDownloadProgress=e.onDownloadProgress),e.DataType&&(m.dataType=e.DataType),this.options.Timeout&&(m.timeout=this.options.Timeout),n.options.ForcePathStyle&&(m.pathStyle=n.options.ForcePathStyle);var _=c.uuid();n.logger.info({cate:`PROCESS`,tag:`network`,msg:`[Request] ${_}, requestOpt=${JSON.stringify(m)}`}),n.emit(`before-send`,m);var v=m.url.includes(`accelerate.`),y=m.qs?Object.keys(m.qs).map(function(e){return`${e}=${m.qs[e]}`}).join(`&`):``,b=y?m.url+`?`+y:m.url;e.tracker&&(e.tracker.setParams({url:b,httpMethod:m.method,accelerate:v,httpSize:m.body?.size||0}),e.tracker.parent&&!e.tracker.parent.params.url&&e.tracker.parent.setParams({url:p,accelerate:v}));var x=(n.options.Request||s)(m,function(i){if(!(i&&i.error===`abort`)){var a={options:m,error:i&&i.error,statusCode:i&&i.statusCode||0,statusMessage:i&&i.statusMessage||``,headers:i&&i.headers||{},body:i&&i.body};n.emit(`after-receive`,a);var o=a.error,s=a.body,l={statusCode:a.statusCode,statusMessage:a.statusMessage,headers:a.headers},u=o?`[error]`:`[success]`;n.logger.info({cate:`PROCESS`,tag:`network`,msg:`[Response] ${_}, ${u}, response=${JSON.stringify(l)}`});var d,p=function(i,a){if(r&&n.off(`inner-kill-task`,S),!d){d=!0;var o={};if(l&&l.statusCode&&(o.statusCode=l.statusCode),l&&l.headers&&(o.headers=l.headers),i)m.url&&(o.url=m.url),m.method&&(o.method=m.method),i=c.extend(i||{},o),t(i,null);else{if(e.Action===`name/cos:PutObject`){var s={};for(var u in e.headers){var f=u.toLowerCase();s[f]=e.headers[u]}s[`x-cos-callback`]?a.Error?(a.CallbackError=c.clone(a.Error),delete a.Error):a.CallbackBody=c.clone(a):s[`x-cos-return-body`]&&(a.Error?(a.ReturnError=c.clone(a.Error),delete a.Error):a.ReturnBody=c.clone(a))}a=c.extend(a||{},o),t(null,a)}x=null}};if(o)return p(c.error(o));var h=l.statusCode,g=Math.floor(h/100)===2;if(f){if(g)return p(null,{body:s});if(s instanceof Blob){c.readAsBinaryString(s,function(e){var t=c.parseResBody(e),n=t.Error||t;return p(c.error(Error(n.Message||`response body error`),{code:n.Code,error:n}))});return}}var v=c.parseResBody(s),y=v.Error||v;g?p(null,v):y?p(c.error(Error(y.Message),{code:y.Code,error:y})):h?p(c.error(Error(l.statusMessage),{code:``+h})):h&&p(c.error(Error(`statusCode error`)))}}),S=function(e){e.TaskId===r&&(x&&x.abort&&x.abort(),n.off(`inner-kill-task`,S))};r&&n.on(`inner-kill-task`,S)}}var ze={getService:l,putBucket:u,headBucket:d,getBucket:f,deleteBucket:p,putBucketAcl:m,getBucketAcl:h,putBucketCors:g,getBucketCors:_,deleteBucketCors:v,getBucketLocation:y,getBucketPolicy:x,putBucketPolicy:b,deleteBucketPolicy:S,putBucketTagging:C,getBucketTagging:w,deleteBucketTagging:T,putBucketLifecycle:E,getBucketLifecycle:D,deleteBucketLifecycle:O,putBucketVersioning:ee,getBucketVersioning:k,putBucketReplication:A,getBucketReplication:j,deleteBucketReplication:te,putBucketWebsite:M,getBucketWebsite:N,deleteBucketWebsite:P,putBucketReferer:ne,getBucketReferer:F,putBucketDomain:re,getBucketDomain:I,deleteBucketDomain:L,putBucketOrigin:R,getBucketOrigin:ie,deleteBucketOrigin:ae,putBucketLogging:z,getBucketLogging:B,putBucketInventory:H,postBucketInventory:U,getBucketInventory:W,listBucketInventory:G,deleteBucketInventory:K,putBucketAccelerate:q,getBucketAccelerate:J,putBucketEncryption:Y,getBucketEncryption:oe,deleteBucketEncryption:se,getObject:ue,headObject:ce,listObjectVersions:le,putObject:de,deleteObject:X,getObjectAcl:fe,putObjectAcl:pe,optionsObject:me,putObjectCopy:he,deleteMultipleObject:_e,restoreObject:ve,putObjectTagging:ye,getObjectTagging:be,deleteObjectTagging:xe,selectObjectContent:Se,appendObject:Ae,uploadPartCopy:ge,multipartInit:Ce,multipartUpload:we,multipartComplete:Te,multipartList:Ee,multipartListPart:De,multipartAbort:Oe,request:ke,getObjectUrl:Me,getAuth:je};function Be(e,t,n){c.each([`Cors`,`Acl`],function(r){if(e.slice(-r.length)===r){var i=e.slice(0,-r.length)+r.toUpperCase(),a=c.apiWrapper(e,t),o=!1;n[i]=function(){!o&&console.warn(`warning: cos.`+i+` has been deprecated. Please Use cos.`+e+` instead.`),o=!0,a.apply(this,arguments)}}})}e.exports.init=function(e,t){t.transferToTaskMethod(ze,`putObject`),c.each(ze,function(t,n){e.prototype[n]=c.apiWrapper(n,t),Be(n,t,e.prototype)})}}),"./src/cos.js":(function(e,t,n){var r=n(
/*! ./util */
`./src/util.js`),i=n(
/*! ./event */
`./src/event.js`),a=n(
/*! ./task */
`./src/task.js`),o=n(
/*! ./base */
`./src/base.js`),s=n(
/*! ./advance */
`./src/advance.js`),c=n(
/*! ./logger */
`./src/logger.js`),l=n(
/*! ../package.json */
`./package.json`),u={AppId:``,SecretId:``,SecretKey:``,SecurityToken:``,StartTime:0,ExpiredTime:0,ChunkRetryTimes:2,FileParallelLimit:3,ChunkParallelLimit:3,ChunkSize:1024*1024,SliceSize:1024*1024,CopyChunkParallelLimit:20,CopyChunkSize:1024*1024*10,CopySliceSize:1024*1024*10,MaxPartNumber:1e4,ProgressInterval:1e3,Domain:``,ServiceDomain:``,Protocol:``,CompatibilityMode:!1,ForcePathStyle:!1,UseRawKey:!1,Timeout:0,CorrectClockSkew:!0,SystemClockOffset:0,UploadCheckContentMd5:!1,UploadQueueSize:1e4,UploadAddMetaMd5:!1,UploadIdCacheLimit:50,UseAccelerate:!1,ForceSignHost:!0,AutoSwitchHost:!0,CopySourceParser:null,ObjectKeySimplifyCheck:!0,DeepTracker:!1,TrackerDelay:5e3,CustomId:``,BeaconReporter:null,ClsReporter:null,EnableLog:!1,EnableLogcat:!1,LogLevel:`VERBOSE`,ClsLogger:null,LogExtras:{}},d=function(e){var t=this;if(this.options=r.extend(r.clone(u),e||{}),this.options.FileParallelLimit=Math.max(1,this.options.FileParallelLimit),this.options.ChunkParallelLimit=Math.max(1,this.options.ChunkParallelLimit),this.options.ChunkRetryTimes=Math.max(0,this.options.ChunkRetryTimes),this.options.ChunkSize=Math.max(1024*1024,this.options.ChunkSize),this.options.CopyChunkParallelLimit=Math.max(1,this.options.CopyChunkParallelLimit),this.options.CopyChunkSize=Math.max(1024*1024,this.options.CopyChunkSize),this.options.CopySliceSize=Math.max(0,this.options.CopySliceSize),this.options.MaxPartNumber=Math.max(1024,Math.min(1e4,this.options.MaxPartNumber)),this.options.Timeout=Math.max(0,this.options.Timeout),this.options.EnableReporter=this.options.BeaconReporter||this.options.ClsReporter,this.options.AppId&&console.warn(`warning: AppId has been deprecated, Please put it at the end of parameter Bucket(E.g: "test-1250000000").`),this.options.SecretId&&this.options.SecretId.indexOf(` `)>-1&&(console.error(`error: SecretId格式错误，请检查`),console.error(`error: SecretId format is incorrect. Please check`)),this.options.SecretKey&&this.options.SecretKey.indexOf(` `)>-1&&(console.error(`error: SecretKey格式错误，请检查`),console.error(`error: SecretKey format is incorrect. Please check`)),r.isNode()&&(console.log(`Tip: Next.js、Nuxt.js 等服务端渲染技术可正常使用JavaScript SDK，请忽略下方 nodejs 环境警告`),console.warn(`warning: cos-js-sdk-v5 不支持 nodejs 环境使用，请改用 cos-nodejs-sdk-v5，参考文档： https://cloud.tencent.com/document/product/436/8629`),console.warn(`warning: cos-js-sdk-v5 does not support nodejs environment. Please use cos-nodejs-sdk-v5 instead. See: https://cloud.tencent.com/document/product/436/8629`)),this.options.ForcePathStyle)throw console.warn(`cos-js-sdk-v5不再支持使用path-style，仅支持使用virtual-hosted-style，参考文档：https://cloud.tencent.com/document/product/436/96243`),Error(`ForcePathStyle is not supported`);i.init(this),a.init(this),this.logger=new c({enableLog:this.options.EnableLog,enableLogcat:this.options.EnableLogcat,level:this.options.LogLevel??`VERBOSE`,clsLogger:this.options.ClsLogger,logExtras:this.options.LogExtras??{}}),this.options.EnableLog&&(i.init(this.logger),this.logger.on(`log-message`,function(e){t.emit(`log-message`,e)}))};o.init(d,a),s.init(d,a),d.util={md5:r.md5,xml2json:r.xml2json,json2xml:r.json2xml,encodeBase64:r.encodeBase64},d.getAuthorization=r.getAuth,d.version=l.version,e.exports=d}),"./src/event.js":(function(e,t){var n=function(e){var t={},n=function(e){return!t[e]&&(t[e]=[]),t[e]};e.on=function(e,t){e===`task-list-update`&&console.warn(`warning: Event "`+e+`" has been deprecated. Please use "list-update" instead.`),n(e).push(t)},e.off=function(e,t){for(var r=n(e),i=r.length-1;i>=0;i--)t===r[i]&&r.splice(i,1)},e.emit=function(e,t){for(var r=n(e).map(function(e){return e}),i=0;i<r.length;i++)r[i](t)}},r=function(){n(this)};e.exports.init=n,e.exports.EventProxy=r}),"./src/logger.js":(function(e,t,n){var r=n(
/*! @babel/runtime/helpers/classCallCheck */
`./node_modules/@babel/runtime/helpers/classCallCheck.js`),i=n(
/*! @babel/runtime/helpers/createClass */
`./node_modules/@babel/runtime/helpers/createClass.js`),a=n(
/*! @babel/runtime/helpers/defineProperty */
`./node_modules/@babel/runtime/helpers/defineProperty.js`),o=n(
/*! ../package.json */
`./package.json`).version,s=[`VERBOSE`,`DEBUG`,`INFO`,`WARN`,`ERROR`];e.exports=function(){function e(t){r(this,e),a(this,`level`,`VERBOSE`),a(this,`clsLogger`,null),a(this,`logExtras`,{}),this.enableLog=t.enableLog??!1,this.level=t.level||`VERBOSE`,s.includes(this.level)||(this.level=`VERBOSE`),this.enableLogcat=t.enableLogcat,this.clsLogger=t.clsLogger,this.logExtras=t.logExtras}return i(e,[{key:`info`,value:function(){if([`VERBOSE`,`INFO`].includes(this.level)){var e=[...arguments];this.log.apply(this,[`info`].concat(e))}}},{key:`debug`,value:function(){if([`VERBOSE`,`DEBUG`].includes(this.level)){var e=[...arguments];this.log.apply(this,[`debug`].concat(e))}}},{key:`warn`,value:function(){if([`VERBOSE`,`WARN`].includes(this.level)){var e=[...arguments];this.log.apply(this,[`warn`].concat(e))}}},{key:`error`,value:function(){if([`VERBOSE`,`ERROR`].includes(this.level)){var e=[...arguments];this.log.apply(this,[`error`].concat(e))}}},{key:`log`,value:function(){if(this.enableLog){var e=arguments.length<=0?void 0:arguments[0],t=arguments.length<=1?void 0:arguments[1],n=t.cate,r=n===void 0?`base`:n,i=t.tag,a=i===void 0?`base`:i,s=t.msg,c={version:`cos-js-sdk-v5-${o}`,timestamp:new Date().toISOString(),cate:`[${r.toUpperCase()}]`,tag:`[${a.toUpperCase()}]`,msg:s,extras:this.logExtras};this.enableLogcat&&console[e](`[${c.version}] ${c.timestamp} ${c.cate} ${c.tag} ${c.msg} ${c.extras?JSON.stringify(c.extras):``}`),this.clsLogger&&this.clsLogger.log(c,!1),this.emit(`log-message`,c)}}}])}()}),"./src/session.js":(function(e,t,n){var r=n(
/*! ./util */
`./src/util.js`),i=`cos_sdk_upload_cache`,a=720*3600,o,s,c=function(){try{var e=JSON.parse(localStorage.getItem(i))}catch{}e||=[],o=e},l=function(){try{o.length?localStorage.setItem(i,JSON.stringify(o)):localStorage.removeItem(i)}catch{}},u=function(){if(!o){c.call(this);for(var e=!1,t=Math.round(Date.now()/1e3),n=o.length-1;n>=0;n--){var r=o[n][2];(!r||r+a<t)&&(o.splice(n,1),e=!0)}e&&l()}},d=function(){s||=setTimeout(function(){l(),s=null},400)},f={using:{},setUsing:function(e){f.using[e]=!0},removeUsing:function(e){delete f.using[e]},getFileId:function(e,t,n,i){return e.name&&e.size&&e.lastModifiedDate&&t?r.md5([e.name,e.size,e.lastModifiedDate,t,n,i].join(`::`)):null},getCopyFileId:function(e,t,n,i,a){var o=t[`content-length`],s=t.etag||``,c=t[`last-modified`];return e&&n?r.md5([e,o,s,c,n,i,a].join(`::`)):null},getUploadIdList:function(e){if(!e)return null;u.call(this);for(var t=[],n=0;n<o.length;n++)o[n][0]===e&&t.push(o[n][1]);return t.length?t:null},saveUploadId:function(e,t,n){if(u.call(this),e){for(var r=o.length-1;r>=0;r--){var i=o[r];i[0]===e&&i[1]===t&&o.splice(r,1)}o.unshift([e,t,Math.round(Date.now()/1e3)]),o.length>n&&o.splice(n),d()}},removeUploadId:function(e){u.call(this),delete f.using[e];for(var t=o.length-1;t>=0;t--)o[t][1]===e&&o.splice(t,1);d()}};e.exports=f}),"./src/task.js":(function(e,t,n){var r=n(
/*! ./session */
`./src/session.js`),i=n(
/*! ./util */
`./src/util.js`),a={},o=function(e,t){a[t]=e[t],e[t]=function(e,n){e.SkipTask?a[t].call(this,e,n):this._addTask(t,e,n)}},s=function(e){var t=[],n={},o=0,s=0,c=function(e){var t={id:e.id,Bucket:e.Bucket,Region:e.Region,Key:e.Key,FilePath:e.FilePath,state:e.state,loaded:e.loaded,size:e.size,speed:e.speed,percent:e.percent,hashPercent:e.hashPercent,error:e.error};return e.FilePath&&(t.FilePath=e.FilePath),e._custom&&(t._custom=e._custom),t},l=function(){var n,r=function(){n=0,e.emit(`task-list-update`,{list:i.map(t,c)}),e.emit(`list-update`,{list:i.map(t,c)})};return function(){n||=setTimeout(r)}}(),u=function(){if(!(t.length<=e.options.UploadQueueSize)){for(var r=0;r<s&&r<t.length&&t.length>e.options.UploadQueueSize;){var i=t[r].state===`waiting`||t[r].state===`checking`||t[r].state===`uploading`;!t[r]||!i?(n[t[r].id]&&delete n[t[r].id],t.splice(r,1),s--):r++}l()}},d=function(){if(!(o>=e.options.FileParallelLimit)){for(;t[s]&&t[s].state!==`waiting`;)s++;if(!(s>=t.length)){var n=t[s];s++,o++,n.state=`checking`,n.params.onTaskStart&&n.params.onTaskStart(c(n)),!n.params.UploadData&&(n.params.UploadData={});var r=i.formatParams(n.api,n.params);a[n.api].call(e,r,function(t,r){e._isRunningTask(n.id)&&((n.state===`checking`||n.state===`uploading`)&&(n.state=t?`error`:`success`,t&&(n.error=t),o--,l(),d(),n.callback&&n.callback(t,r),n.state===`success`&&(n.params&&(delete n.params.UploadData,delete n.params.Body,delete n.params),delete n.callback)),u())}),l(),setTimeout(d)}}},f=function(t,i){var a=n[t];if(a){var s=a&&a.state===`waiting`,c=a&&(a.state===`checking`||a.state===`uploading`);if(i===`canceled`&&a.state!==`canceled`||i===`paused`&&s||i===`paused`&&c){a.state=i,e.emit(`inner-kill-task`,{TaskId:t,toState:i});try{var f=a&&a.params&&a.params.UploadData.UploadId}catch{}i===`canceled`&&f&&r.removeUsing(f),l(),c&&(o--,d()),i===`canceled`&&(a.params&&(delete a.params.UploadData,delete a.params.Body,delete a.params),delete a.callback)}u()}};e._addTasks=function(t){i.each(t,function(t){e._addTask(t.api,t.params,t.callback,!0)}),l()};var p=!0;e._addTask=function(r,a,o,s){a=i.formatParams(r,a);var c=i.uuid();a.TaskId=c,a.onTaskReady&&a.onTaskReady(c),a.TaskReady&&(a.TaskReady(c),p&&console.warn(`warning: Param "TaskReady" has been deprecated. Please use "onTaskReady" instead.`),p=!1);var f={params:a,callback:o,api:r,index:t.length,id:c,Bucket:a.Bucket,Region:a.Region,Key:a.Key,FilePath:a.FilePath||``,state:`waiting`,loaded:0,size:0,speed:0,percent:0,hashPercent:0,error:null,_custom:a._custom},m=a.onHashProgress;a.onHashProgress=function(t){e._isRunningTask(f.id)&&(f.hashPercent=t.percent,m&&m(t),l())};var h=a.onProgress;return a.onProgress=function(t){e._isRunningTask(f.id)&&(f.state===`checking`&&(f.state=`uploading`),f.loaded=t.loaded,f.speed=t.speed,f.percent=t.percent,h&&h(t),l())},i.getFileSize(r,a,function(e,r){if(e)return o(i.error(e));n[c]=f,t.push(f),f.size=r,!s&&l(),d(),u()}),c},e._isRunningTask=function(e){var t=n[e];return!!(t&&(t.state===`checking`||t.state===`uploading`))},e.getTaskList=function(){return i.map(t,c)},e.cancelTask=function(e){f(e,`canceled`)},e.pauseTask=function(e){f(e,`paused`)},e.restartTask=function(e){var t=n[e];t&&(t.state===`paused`||t.state===`error`)&&(t.state=`waiting`,l(),s=Math.min(s,t.index),d())},e.isUploadRunning=function(){return o||s<t.length}};e.exports.transferToTaskMethod=o,e.exports.init=s}),"./src/tracker.js":(function(e,t,n){var r=n(
/*! @babel/runtime/helpers/classCallCheck */
`./node_modules/@babel/runtime/helpers/classCallCheck.js`),i=n(
/*! @babel/runtime/helpers/createClass */
`./node_modules/@babel/runtime/helpers/createClass.js`),a=n(
/*! @babel/runtime/helpers/typeof */
`./node_modules/@babel/runtime/helpers/typeof.js`),o=n(
/*! ../package.json */
`./package.json`),s=null,c=function(e,t){if(!s){if(typeof e!=`function`)throw Error(`Beacon not found`);s=new e({appkey:`0WEB05PY6MHRGK0U`,versionCode:o.version,channelID:`js_sdk`,openid:`openid`,unionid:`unid`,strictMode:!1,delay:t,sessionDuration:60*1e3})}return s},l=function(e){return!e||e<0?0:(e/1e3).toFixed(3)},u={getUid:function(){var e=function(){return((1+Math.random())*65536|0).toString(16).substring(1)};return e()+e()+`-`+e()+`-`+e()+`-`+e()+`-`+e()+e()+e()},getNetType:function(){if((typeof navigator>`u`?`undefined`:a(navigator))===`object`){var e=navigator.connection||navigator.mozConnection||navigator.webkitConnection;return e?.type||e?.effectiveType||`unknown`}return`unknown`},getProtocol:function(){return(typeof location>`u`?`undefined`:a(location))===`object`?location.protocol.replace(/:/,``):`unknown protocol`},getOsType:function(){if((typeof navigator>`u`?`undefined`:a(navigator))!==`object`)return`unknown os`;var e=navigator.userAgent.toLowerCase(),t=/macintosh|mac os x/i.test(navigator.userAgent);return e.indexOf(`win32`)>=0||e.indexOf(`wow32`)>=0?`win32`:e.indexOf(`win64`)>=0||e.indexOf(`wow64`)>=0?`win64`:t?`mac`:`unknown os`},isMobile:function(){return!!((typeof navigator>`u`?`undefined`:a(navigator))===`object`&&navigator.userAgent.match(/(phone|pad|pod|iPhone|iPod|ios|iPad|Android|Mobile|BlackBerry|IEMobile|MQQBrowser|JUC|Fennec|wOSBrowser|BrowserNG|WebOS|Symbian|Windows Phone)/i))},isAndroid:function(){return!!((typeof navigator>`u`?`undefined`:a(navigator))===`object`&&navigator.userAgent.match(/(Android|Adr|Linux)/i))},isIOS:function(){return!!((typeof navigator>`u`?`undefined`:a(navigator))===`object`&&navigator.userAgent.match(/(iPhone|iPod|iPad|iOS)/i))},isOtherMobile:function(){return d&&!isAndroid&&!isIOS},getUA:function(){return(typeof navigator>`u`?`undefined`:a(navigator))===`object`?navigator.userAgent:`unknown device`}},d=u.isMobile(),f=u.isAndroid()?`android`:u.isIOS?`ios`:`other_mobile`,p=u.getOsType(),m=d?f:p,h=u.getUA(),g=u.getProtocol(),_=function(e){return[`putObject`,`sliceUploadFile`,`uploadFile`,`uploadFiles`].includes(e)?`UploadTask`:e===`getObject`?`DownloadTask`:[`putObjectCopy`,`sliceCopyFile`].includes(e)?`CopyTask`:e};function v(e){return e.replace(/([A-Z])/g,`_$1`).toLowerCase()}function y(e){var t={},n=`sdkVersionName.sdkVersionCode.osName.networkType.requestName.requestResult.bucket.region.appid.accelerate.url.host.requestPath.userAgent.networkProtocol.httpMethod.httpSize.httpSpeed.httpTookTime.httpMd5.httpSign.httpFullTime.httpDomain.partNumber.httpRetryTimes.customId.traceId.realApi`.split(`.`),r=[].concat(n,[`errorNode`,`errorCode`,`errorName`,`errorMessage`,`errorRequestId`,`errorHttpCode`,`errorServiceName`,`errorType`,`fullError`]),i=e.requestResult===`Success`?n:r;for(var a in e){if(!i.includes(a))continue;var o=v(a);t[o]=e[a]}return t.request_name=e.realApi?_(e.realApi):e.requestName,t}e.exports=function(){function e(t){r(this,e);var n=t.parent,i=t.traceId,a=t.bucket,s=t.region,l=t.apiName,d=t.realApi,f=t.httpMethod,p=t.fileKey,_=t.fileSize,v=t.accelerate,y=t.customId,b=t.delay,x=t.deepTracker,S=t.Beacon,C=t.clsReporter,w=a&&a.substr(a.lastIndexOf(`-`)+1)||``;this.parent=n,this.deepTracker=x,this.delay=b,C&&!this.clsReporter&&(this.clsReporter=C),this.params={sdkVersionName:`cos-js-sdk-v5`,sdkVersionCode:o.version,osName:m,networkType:``,requestName:l||``,requestResult:``,realApi:d,bucket:a,region:s,accelerate:v,httpMethod:f,url:``,host:``,httpDomain:``,requestPath:p||``,userAgent:h,networkProtocol:g,errorType:``,errorCode:``,errorName:``,errorMessage:``,errorRequestId:``,errorHttpCode:0,errorServiceName:``,errorNode:``,httpTookTime:0,httpSize:_||0,httpMd5:0,httpSign:0,httpFullTime:0,httpSpeed:0,md5StartTime:0,md5EndTime:0,signStartTime:0,signEndTime:0,httpStartTime:0,httpEndTime:0,startTime:new Date().getTime(),endTime:0,traceId:i||u.getUid(),appid:w,partNumber:0,httpRetryTimes:0,customId:y||``,partTime:0},S&&(this.beacon=c(S,b))}return i(e,[{key:`formatResult`,value:function(e,t){var n=new Date().getTime(),r=u.getNetType(),i=e?e?.code||e?.error?.code||e?.error?.Code:``,a=e?e?.message||e?.error?.message||e?.error?.Message:``,o=a,s=e?e?.resource||e?.error?.resource||e?.error?.Resource:``,c=e?e?.statusCode:t.statusCode,d=e?e?.headers&&e?.headers[`x-cos-request-id`]:t?.headers&&t?.headers[`x-cos-request-id`],f=e?d?`Server`:`Client`:``;this.params.requestName===`getObject`&&(this.params.httpSize=t?t.headers&&t.headers[`content-length`]:0);var p=this.params.realApi===`sliceUploadFile`,m=this.params.realApi===`sliceCopyFile`;if(p||m){var h=this.params.httpSize/1024/this.params.partTime;Object.assign(this.params,{httpSpeed:h<0?0:h.toFixed(3)})}else{var g=n-this.params.startTime,_=this.params.httpEndTime-this.params.httpStartTime,v=this.params.httpSize/1024/(_/1e3),y=this.params.md5EndTime-this.params.md5StartTime,b=this.params.signEndTime-this.params.signStartTime;this.parent&&(this.parent.addParamValue(`httpTookTime`,l(_)),this.parent.addParamValue(`httpFullTime`,l(g)),this.parent.addParamValue(`httpMd5`,l(y)),this.parent.addParamValue(`httpSign`,l(b)),[`multipartUpload`,`uploadPartCopy`,`putObjectCopy`].includes(this.params.requestName)&&this.parent.addParamValue(`partTime`,l(_))),Object.assign(this.params,{httpFullTime:l(g),httpMd5:l(y),httpSign:l(b),httpTookTime:l(_),httpSpeed:v<0?0:v.toFixed(3)})}if(Object.assign(this.params,{networkType:r,requestResult:e?`Failure`:`Success`,errorType:f,errorCode:i,errorHttpCode:c,errorName:o,errorMessage:a,errorServiceName:s,errorRequestId:d}),e&&(!i||!a)&&(this.params.fullError=e?JSON.stringify(e):``),this.params.url){try{var x=/^http(s)?:\/\/(.*?)\//.exec(this.params.url);this.params.host=x[2]}catch{this.params.host=this.params.url}this.params.httpDomain=this.params.host}}},{key:`report`,value:function(e,t){if(!(!this.beacon&&!this.clsReporter)){this.formatResult(e,t);var n=y(this.params);this.beacon&&this.sendEventsToBeacon(n),this.clsReporter&&this.sendEventsToCLS(n)}}},{key:`setParams`,value:function(e){Object.assign(this.params,e)}},{key:`addParamValue`,value:function(e,t){this.params[e]=(+this.params[e]+ +t).toFixed(3)}},{key:`sendEventsToBeacon`,value:function(e){if(!((this.params.requestName===`sliceUploadFile`||this.params.realApi===`sliceUploadFile`)&&!this.deepTracker)){var t=`qcloud_track_cos_sdk`;this.delay===0?this.beacon&&this.beacon.onDirectUserAction(t,e):this.beacon&&this.beacon.onUserAction(t,e)}}},{key:`sendEventsToCLS`,value:function(e){var t=this.delay===0;this.clsReporter.log(e,t)}},{key:`generateSubTracker`,value:function(t){return Object.assign(t,{parent:this,deepTracker:this.deepTracker,traceId:this.params.traceId,bucket:this.params.bucket,region:this.params.region,accelerate:this.params.accelerate,fileKey:this.params.requestPath,customId:this.params.customId,delay:this.delay,clsReporter:this.clsReporter}),new e(t)}}])}()}),"./src/util.js":(function(e,t,n){(function(t){var r=n(
/*! @babel/runtime/helpers/typeof */
`./node_modules/@babel/runtime/helpers/typeof.js`);function i(e,t){var n=typeof Symbol<`u`&&e[Symbol.iterator]||e[`@@iterator`];if(!n){if(Array.isArray(e)||(n=a(e))||t&&e&&typeof e.length==`number`){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var o,s=!0,c=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return s=e.done,e},e:function(e){c=!0,o=e},f:function(){try{s||n.return==null||n.return()}finally{if(c)throw o}}}}function a(e,t){if(e){if(typeof e==`string`)return o(e,t);var n={}.toString.call(e).slice(8,-1);return n===`Object`&&e.constructor&&(n=e.constructor.name),n===`Map`||n===`Set`?Array.from(e):n===`Arguments`||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?o(e,t):void 0}}function o(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var s=n(
/*! ../lib/md5 */
`./lib/md5.js`),c=n(
/*! ../lib/crypto */
`./lib/crypto.js`),l=n(
/*! fast-xml-parser */
`./node_modules/fast-xml-parser/src/fxp.js`),u=l.XMLParser,d=l.XMLBuilder,f=new u({ignoreDeclaration:!0,ignoreAttributes:!0,parseTagValue:!1,trimValues:!1}),p=new d,m=n(
/*! ../lib/base64 */
`./lib/base64.js`),h=n(
/*! ./tracker */
`./src/tracker.js`),g=`#text`,_=function(e){if(R(e))for(var t in e){var n=e[t];typeof n==`string`?t===g&&delete e[t]:Array.isArray(n)?n.forEach(function(e){_(e)}):R(n)&&_(n)}},v=function(e){var t=f.parse(e);return _(t),t},y=function(e){return p.build(e)};function b(e){return encodeURIComponent(e).replace(/!/g,`%21`).replace(/'/g,`%27`).replace(/\(/g,`%28`).replace(/\)/g,`%29`).replace(/\*/g,`%2A`)}function x(e,t){var n=[];for(var r in e)e.hasOwnProperty(r)&&n.push(t?b(r).toLowerCase():r);return n.sort(function(e,t){return e=e.toLowerCase(),t=t.toLowerCase(),e===t?0:e>t?1:-1})}var S=function(e,t){var n,r,i,a=[],o=x(e);for(n=0;n<o.length;n++)r=o[n],i=e[r]===void 0||e[r]===null?``:``+e[r],r=t?b(r).toLowerCase():b(r),i=b(i)||``,a.push(r+`=`+i);return a.join(`&`)},C=[`cache-control`,`content-disposition`,`content-encoding`,`content-length`,`content-md5`,`expect`,`expires`,`host`,`if-match`,`if-modified-since`,`if-none-match`,`if-unmodified-since`,`origin`,`range`,`transfer-encoding`,`pic-operations`],w=function(e){var t={};for(var n in e){var r=n.toLowerCase();(r.indexOf(`x-cos-`)>-1||r.indexOf(`x-ci-`)>-1||C.indexOf(r)>-1)&&(t[n]=e[n])}return t},T=function(e){e||={};var t=e.SecretId,n=e.SecretKey,r=e.KeyTime,i=(e.method||e.Method||`get`).toLowerCase(),a=F(e.Query||e.params||{}),o=w(F(e.Headers||e.headers||{})),s=e.Key||``,l;e.UseRawKey?l=e.Pathname||e.pathname||`/`+s:(l=e.Pathname||e.pathname||s,l.indexOf(`/`)!==0&&(l=`/`+l));var u=e.ForceSignHost!==!1;if(!o.Host&&!o.host&&e.Bucket&&e.Region&&u&&(o.Host=e.Bucket+`.cos.`+e.Region+`.myqcloud.com`),!t)throw Error(`missing param SecretId`);if(!n)throw Error(`missing param SecretKey`);var d=Math.round(Y(e.SystemClockOffset)/1e3)-1,f=d,p=e.Expires||e.expires;p===void 0?f+=900:f+=p*1||0;var m=`sha1`,h=t,g=r||d+`;`+f,_=r||d+`;`+f,v=x(o,!0).join(`;`).toLowerCase(),y=x(a,!0).join(`;`).toLowerCase(),b=c.HmacSHA1(_,n).toString(),S=[i,l,X.obj2str(a,!0),X.obj2str(o,!0),``].join(`
`),C=[`sha1`,g,c.SHA1(S).toString(),``].join(`
`),T=c.HmacSHA1(C,b).toString();return[`q-sign-algorithm=`+m,`q-ak=`+h,`q-sign-time=`+g,`q-key-time=`+_,`q-header-list=`+v,`q-url-param-list=`+y,`q-signature=`+T].join(`&`)},E=function(e,t,n){var r=t/8,i=e.slice(n,n+r);return new Uint8Array(i).reverse(),new{8:Uint8Array,16:Uint16Array,32:Uint32Array}[t](i)[0]},D=function(e,t,n,r){var i=e.slice(t,n),a=``;return new Uint8Array(i).forEach(function(e){a+=String.fromCharCode(e)}),r&&(a=decodeURIComponent(escape(a))),a},O=function(e){for(var t={},n=D(e),r={records:[]};e.byteLength;){var i=E(e,32,0),a=E(e,32,4),o=i-a-16,s=0,c;for(e=e.slice(12);s<a;){var l=E(e,8,s),u=D(e,s+1,s+1+l),d=E(e,16,s+l+2);t[u]=D(e,s+l+4,s+l+4+d),s+=l+4+d}if(t[`:event-type`]===`Records`)c=D(e,s,s+o,!0),r.records.push(c);else if(t[`:event-type`]===`Stats`)c=D(e,s,s+o,!0),r.stats=X.xml2json(c).Stats;else if(t[`:event-type`]===`error`){var f=t[`:error-code`],p=t[`:error-message`],m=Error(p);m.message=p,m.name=m.code=f,r.error=m}else [`Progress`,`Continuation`,`End`].includes(t[`:event-type`]);e=e.slice(s+o+4)}return{payload:r.records.join(``),body:n}},ee=function(e){var t=this.options.CopySourceParser;if(t)return t(e);var n=e.match(/^([^.]+-\d+)\.cos(v6|-cdc|-cdz|-internal)?\.([^.]+)\.((myqcloud\.com)|(tencentcos\.cn))\/(.+)$/);return n?{Bucket:n[1],Region:n[3],Key:n[7]}:null},k=function(){},A=function(e){var t={};for(var n in e)e.hasOwnProperty(n)&&e[n]!==void 0&&e[n]!==null&&(t[n]=e[n]);return t},j=function(e,t){var n,r=new FileReader;FileReader.prototype.readAsBinaryString?(n=FileReader.prototype.readAsBinaryString,r.onload=function(){t(this.result)}):FileReader.prototype.readAsArrayBuffer?n=function(e){var n=``,r=new FileReader;r.onload=function(e){for(var i=new Uint8Array(r.result),a=i.byteLength,o=0;o<a;o++)n+=String.fromCharCode(i[o]);t(n)},r.readAsArrayBuffer(e)}:console.error(`FileReader not support readAsBinaryString`),n.call(r,e)},te=function(){var e=function(e,t){e=e.split(`.`),t=t.split(`.`);for(var n=0;n<t.length;n++)if(e[n]!==t[n])return parseInt(e[n])>parseInt(t[n])?1:-1;return 0};return function(t){if(!t)return!1;var n=(t.match(/Chrome\/([.\d]+)/)||[])[1],r=(t.match(/QBCore\/([.\d]+)/)||[])[1],i=(t.match(/QQBrowser\/([.\d]+)/)||[])[1];return n&&e(n,`53.0.2785.116`)<0&&r&&e(r,`3.53.991.400`)<0&&i&&e(i,`9.0.2524.400`)<=0||!1}(typeof navigator<`u`&&navigator.userAgent)}(),M=function(e,t,n,r,i){var a;if(e.slice?a=e.slice(t,n):e.mozSlice?a=e.mozSlice(t,n):e.webkitSlice&&(a=e.webkitSlice(t,n)),r&&te){var o=new FileReader;o.onload=function(e){a=null,i(new Blob([o.result]))},o.readAsArrayBuffer(a)}else i(a)},N=function(e,t,n,r){n||=k,e?typeof t==`string`?n(X.md5(t,!0)):Blob&&t instanceof Blob?X.getFileMd5(t,function(e,t){n(t)},r):n():n()},P=1024*1024,ne=function(e,t,n){var r=e.size,i=0,a=s.getCtx(),o=function(s){if(s>=r){var c=a.digest(`hex`);t(null,c);return}var l=Math.min(r,s+P);X.fileSlice(e,s,l,!1,function(e){j(e,function(t){e=null,a=a.update(t,!0),i+=t.length,t=null,n&&n({loaded:i,total:r,percent:Math.round(i/r*1e4)/1e4}),o(s+P)})})};o(0)};function F(e){return B(e,function(e){return r(e)===`object`&&e!==null?F(e):e})}function re(e,t,n){return e&&t in e?e[t]:n}function I(e,t){return z(t,function(n,r){e[r]=t[r]}),e}function L(e){return e instanceof Array}function R(e){return Object.prototype.toString.call(e)===`[object Object]`}function ie(e,t){for(var n=!1,r=0;r<e.length;r++)if(t===e[r]){n=!0;break}return n}function ae(e){return L(e)?e:[e]}function z(e,t){for(var n in e)e.hasOwnProperty(n)&&t(e[n],n)}function B(e,t){var n=L(e)?[]:{};for(var r in e)e.hasOwnProperty(r)&&(n[r]=t(e[r],r));return n}function V(e,t){var n=L(e),r=n?[]:{};for(var i in e)e.hasOwnProperty(i)&&t(e[i],i)&&(n?r.push(e[i]):r[i]=e[i]);return r}var H=function(e){var t,n,r,i=``;for(t=0,n=e.length/2;t<n;t++)r=parseInt(e[t*2]+e[t*2+1],16),i+=String.fromCharCode(r);return btoa(i)},U=function(){var e=function(){return((1+Math.random())*65536|0).toString(16).substring(1)};return e()+e()+`-`+e()+`-`+e()+`-`+e()+`-`+e()+e()+e()},W=function(e,t){var n=t.Bucket,r=t.Region,i=t.Key,a=this.options.Domain,o=!a||typeof a==`string`&&a.indexOf(`{Bucket}`)>-1,s=!a||typeof a==`string`&&a.indexOf(`{Region}`)>-1;if(e.indexOf(`Bucket`)>-1||e===`deleteMultipleObject`||e===`multipartList`||e===`listObjectVersions`){if(o&&!n)return`Bucket`;if(s&&!r)return`Region`}else if(e.indexOf(`Object`)>-1||e.indexOf(`multipart`)>-1||e===`sliceUploadFile`||e===`abortUploadTask`||e===`uploadFile`){if(o&&!n)return`Bucket`;if(s&&!r)return`Region`;if(!i)return`Key`}return!1},G=function(e,t){if(t=I({},t),e!==`getAuth`&&e!==`getV4Auth`&&e!==`getObjectUrl`){var n=t.Headers||{};t&&r(t)===`object`&&((function(){for(var e in t)t.hasOwnProperty(e)&&e.indexOf(`x-cos-`)>-1&&(n[e]=t[e])})(),X.each({"x-cos-mfa":`MFA`,"Content-MD5":`ContentMD5`,"Content-Length":`ContentLength`,"Content-Type":`ContentType`,Expect:`Expect`,Expires:`Expires`,"Cache-Control":`CacheControl`,"Content-Disposition":`ContentDisposition`,"Content-Encoding":`ContentEncoding`,Range:`Range`,"If-Modified-Since":`IfModifiedSince`,"If-Unmodified-Since":`IfUnmodifiedSince`,"If-Match":`IfMatch`,"If-None-Match":`IfNoneMatch`,"x-cos-copy-source":`CopySource`,"x-cos-copy-source-Range":`CopySourceRange`,"x-cos-metadata-directive":`MetadataDirective`,"x-cos-copy-source-If-Modified-Since":`CopySourceIfModifiedSince`,"x-cos-copy-source-If-Unmodified-Since":`CopySourceIfUnmodifiedSince`,"x-cos-copy-source-If-Match":`CopySourceIfMatch`,"x-cos-copy-source-If-None-Match":`CopySourceIfNoneMatch`,"x-cos-acl":`ACL`,"x-cos-grant-read":`GrantRead`,"x-cos-grant-write":`GrantWrite`,"x-cos-grant-full-control":`GrantFullControl`,"x-cos-grant-read-acp":`GrantReadAcp`,"x-cos-grant-write-acp":`GrantWriteAcp`,"x-cos-storage-class":`StorageClass`,"x-cos-traffic-limit":`TrafficLimit`,"x-cos-mime-limit":`MimeLimit`,"x-cos-server-side-encryption-customer-algorithm":`SSECustomerAlgorithm`,"x-cos-server-side-encryption-customer-key":`SSECustomerKey`,"x-cos-server-side-encryption-customer-key-MD5":`SSECustomerKeyMD5`,"x-cos-server-side-encryption":`ServerSideEncryption`,"x-cos-server-side-encryption-cos-kms-key-id":`SSEKMSKeyId`,"x-cos-server-side-encryption-context":`SSEContext`,"Pic-Operations":`PicOperations`,"x-cos-callback":`Callback`,"x-cos-callback-var":`CallbackVar`,"x-cos-return-body":`ReturnBody`},function(e,r){t[e]!==void 0&&(n[r]=t[e])}),t.Headers=A(n))}return t},K=function(e,t){return function(n,r){var i=this;typeof n==`function`&&(r=n,n={}),n=G(e,n);var a;if(i.options.EnableReporter)if(n.calledBySdk===`sliceUploadFile`||n.calledBySdk===`sliceCopyFile`)a=n.tracker&&n.tracker.generateSubTracker({apiName:e});else if([`uploadFile`,`uploadFiles`].includes(e))a=null;else{var o=0;n.Body&&(o=typeof n.Body==`string`?n.Body.length:n.Body.size||n.Body.byteLength||0);var s=i.options.UseAccelerate||typeof i.options.Domain==`string`&&i.options.Domain.includes(`accelerate.`);a=new h({Beacon:i.options.BeaconReporter,clsReporter:i.options.ClsReporter,bucket:n.Bucket,region:n.Region,apiName:e,realApi:e,accelerate:s,fileKey:n.Key,fileSize:o,deepTracker:i.options.DeepTracker,customId:i.options.CustomId,delay:i.options.TrackerDelay})}n.tracker=a;var c=function(e){return e&&e.headers&&(e.headers[`x-ci-request-id`]&&(e.RequestId=e.headers[`x-ci-request-id`]),e.headers[`x-cos-request-id`]&&(e.RequestId=e.headers[`x-cos-request-id`]),e.headers[`x-cos-version-id`]&&(e.VersionId=e.headers[`x-cos-version-id`]),e.headers[`x-cos-delete-marker`]&&(e.DeleteMarker=e.headers[`x-cos-delete-marker`])),e},l=function(e,t){a&&a.report(e,t),r&&r(c(e),c(t))},u=function(){if(e!==`getService`&&e!==`abortUploadTask`){var t=W.call(i,e,n);if(t)return`missing param `+t;if(n.Region){if(i.options.CompatibilityMode){if(!/^([a-z\d-.]+)$/.test(n.Region))return`Region format error.`}else if(n.Region.indexOf(`cos.`)>-1)return`param Region should not be start with "cos."`;else if(!/^([a-z\d-]+)$/.test(n.Region))return`Region format error.`;!i.options.CompatibilityMode&&n.Region.indexOf(`-`)===-1&&n.Region!==`yfb`&&n.Region!==`default`&&n.Region!==`accelerate`&&console.warn(`warning: param Region format error, find help here: https://cloud.tencent.com/document/product/436/6224`)}if(n.Bucket){if(!/^([a-z\d-]+)-(\d+)$/.test(n.Bucket))if(n.AppId)n.Bucket=n.Bucket+`-`+n.AppId;else if(i.options.AppId)n.Bucket=n.Bucket+`-`+i.options.AppId;else return`Bucket should format as "test-1250000000".`;n.AppId&&(console.warn(`warning: AppId has been deprecated, Please put it at the end of parameter Bucket(E.g Bucket:"test-1250000000" ).`),delete n.AppId)}!i.options.UseRawKey&&n.Key&&n.Key.substr(0,1)===`/`&&(n.Key=n.Key.substr(1))}}(),d=[`getAuth`,`getObjectUrl`].includes(e);if(typeof Promise==`function`&&!d&&!r)return new Promise(function(e,a){if(r=function(t,n){t?a(t):e(n)},u)return l(X.error(Error(u)));t.call(i,n,l)});if(u)return l(X.error(Error(u)));var f=t.call(i,n,l);if(d)return f}},q=function(e,t){var n=this,r=0,i=0,a=Date.now(),o,s;function c(){if(s=0,t&&typeof t==`function`){o=Date.now();var n=Math.max(0,Math.round((i-r)/((o-a)/1e3)*100)/100)||0,c=i===0&&e===0?1:Math.floor(i/e*100)/100||0;a=o,r=i;try{t({loaded:i,total:e,speed:n,percent:c})}catch{}}}return function(t,r){if(t&&(i=t.loaded,e=t.total),r)clearTimeout(s),c();else{if(s)return;s=setTimeout(c,n.options.ProgressInterval)}}},J=function(e,t,n){var r;if(typeof t.Body==`string`?t.Body=new Blob([t.Body],{type:`text/plain`}):t.Body instanceof ArrayBuffer&&(t.Body=new Blob([t.Body])),t.Body&&(t.Body instanceof Blob||t.Body.toString()===`[object File]`||t.Body.toString()===`[object Blob]`))r=t.Body.size;else{n(X.error(Error(`params body format error, Only allow File|Blob|String.`)));return}t.ContentLength=r,n(null,r)},Y=function(e){return Date.now()+(e||0)},oe=function(e,t){var n=e;return e.message=e.message||null,typeof t==`string`?(e.error=t,e.message=t):r(t)===`object`&&t!==null&&(I(e,t),(t.code||t.name)&&(e.code=t.code||t.name),t.message&&(e.message=t.message),t.stack&&(e.stack=t.stack)),typeof Object.defineProperty==`function`&&(Object.defineProperty(e,`name`,{writable:!0,enumerable:!1}),Object.defineProperty(e,`message`,{enumerable:!0})),e.name=t&&t.name||e.name||e.code||`Error`,e.code||=e.name,e.error||=F(n),e},se=function(){return(typeof globalThis>`u`?`undefined`:r(globalThis))===`object`&&(globalThis.constructor.name===`DedicatedWorkerGlobalScope`||globalThis.FileReaderSync)},ce=function(){return(typeof window>`u`?`undefined`:r(window))!==`object`&&(t===void 0?`undefined`:r(t))===`object`&&!se()},le=function(e){return/^https?:\/\/([^/]+\.)?ci\.[^/]+/.test(e)},ue=function(){return(typeof navigator>`u`?`undefined`:r(navigator))===`object`?!!navigator.userAgent.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/):!1}(),de=function(){return(typeof navigator>`u`?`undefined`:r(navigator))===`object`?/\sQQ/i.test(navigator.userAgent):!1}(),X={noop:k,formatParams:G,apiWrapper:K,xml2json:v,json2xml:y,md5:s,clearKey:A,fileSlice:M,getBodyMd5:N,getFileMd5:ne,b64:H,extend:I,isArray:L,isInArray:ie,makeArray:ae,each:z,map:B,filter:V,clone:F,attr:re,uuid:U,camSafeUrlEncode:b,throttleOnProgress:q,getFileSize:J,getSkewTime:Y,error:oe,obj2str:S,getAuth:T,parseSelectPayload:O,getSourceParams:ee,isBrowser:!0,isNode:ce,isCIHost:le,isIOS_QQ:ue&&de,encodeBase64:function(e,t){var n=m.encode(e);return t&&(n=n.replaceAll(`+`,`-`).replaceAll(`/`,`_`).replaceAll(`=`,``)),n},decodeBase64:function(e){return e?m.decode(e):``},simplifyPath:function(e){var t=e.split(`/`),n=[],r=i(t),a;try{for(r.s();!(a=r.n()).done;){var o=a.value;o===`..`?n.length&&n.pop():o.length&&o!==`.`&&n.push(o)}}catch(e){r.e(e)}finally{r.f()}return`/`+n.join(`/`)},readAsBinaryString:j,parseResBody:function(e){var t;if(e&&typeof e==`string`){var n=e.trim(),r=n.indexOf(`<`)===0,i=n.indexOf(`{`)===0;if(r)t=X.xml2json(e)||{};else if(i)try{var a=e.replace(/\n/g,` `),o=JSON.parse(a);t=Object.prototype.toString.call(o)===`[object Object]`?o:e}catch{t=e}else t=e}else t=e||{};return t}};e.exports=X}).call(this,n(
/*! ./../node_modules/process/browser.js */
`./node_modules/process/browser.js`))})})})}));o();var g=s(h()),_={key:0,class:`box`},v=[`src`],y=[`src`],b=`https://luxcurl-img-1321046331.cos.ap-shanghai.myqcloud.com`,x=`luxcurl-img-1321046331`,S=`ap-shanghai`,C=e({__name:`Waterfall`,setup(e){let a=new g.default({SecretId:``,SecretKey:``}),o,s=d(!1);function c(){s.value=!0,a.getBucket({Bucket:x,Region:S,Prefix:``},function(e,t){e?console.error(`tenxun`,e):(o=t.Contents.filter(e=>{let t=e.Key,n=t.lastIndexOf(`.`),r=t.substring(n+1);return[`png`,`jpeg`,`jpg`,`mp4`,`webp`].includes(r)}).map(e=>b+`/`+e.Key),T())})}async function u(e){return new Promise(t=>{let n=new Image;n.src=e,n.onload=()=>{t(n)}})}let p=d(null),h=d(null),C=d([]),w=d([]);async function T(){let e=E();for(let t of e)console.error(t),await D(t)}function E(){let e=[],t=o.length,n=C.value.length+w.value.length;return t-n>0&&(e=o.slice(n)),e}async function D(e){let t=await u(e),n=t.width,r=t.height,i=p.value.getBoundingClientRect().height,a=h.value.getBoundingClientRect().height;i>a?w.value.push({url:e,width:n,height:r}):C.value.push({url:e,width:n,height:r})}function O(){}return(e,a)=>(n(),m(i,null,[f(`button`,{onClick:c},`显示全部图片的瀑布流`),s.value?(n(),m(`div`,_,[f(`div`,{ref_key:`leftRef`,ref:p,class:`column`},[(n(!0),m(i,null,t(C.value,e=>(n(),m(`div`,{class:`box-content relative`,style:l(`width: 100%;padding-top: ${e.height*100/e.width}%`),key:e.id,onClick:O},[f(`img`,{src:e.url,class:`absolute w-full h-full top-0 left-0`},null,8,v)],4))),128))],512),f(`div`,{ref_key:`rightRef`,ref:h,class:`column`},[(n(!0),m(i,null,t(w.value,e=>(n(),m(`div`,{class:`box-content relative`,style:l(`width: 100%;padding-top: ${e.height*100/e.width}%`),key:e.id},[f(`img`,{src:e.url,class:`absolute w-full h-full top-0 left-0`},null,8,y)],4))),128))],512)])):r(``,!0)],64))}});o();const w=JSON.parse(`{"title":"","description":"","frontmatter":{},"headers":[],"relativePath":"useful/前端效果实现/瀑布流.md","filePath":"useful/前端效果实现/瀑布流.md","lastUpdated":1709394628000}`);var T=Object.assign({name:`useful/前端效果实现/瀑布流.md`},{setup(e){return(e,t)=>{let r=a(`clientOnly`);return n(),m(`div`,null,[p(r,null,{default:u(()=>[p(C)]),_:1})])}}});export{w as __pageData,T as default};